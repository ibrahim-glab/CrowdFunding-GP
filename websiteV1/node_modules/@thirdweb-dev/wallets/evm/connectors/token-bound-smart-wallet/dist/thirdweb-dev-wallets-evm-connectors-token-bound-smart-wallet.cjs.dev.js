'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var ethers = require('ethers');
var evm_connectors_smartWallet_dist_thirdwebDevWalletsEvmConnectorsSmartWallet = require('../../smart-wallet/dist/thirdweb-dev-wallets-evm-connectors-smart-wallet.cjs.dev.js');
var constants = require('../../../../dist/constants-300b7df5.cjs.dev.js');
require('../../../../dist/connector-a63dd9e7.cjs.dev.js');
require('eventemitter3');
require('../../../../dist/url-4b641c31.cjs.dev.js');
require('@thirdweb-dev/chains');
require('../../../../dist/headers-3cc7b8c1.cjs.dev.js');
require('@account-abstraction/contracts');
require('../../../../dist/defineProperty-982e7acf.cjs.dev.js');
require('@thirdweb-dev/sdk');

class TokenBoundSmartWalletConnector extends evm_connectors_smartWallet_dist_thirdwebDevWalletsEvmConnectorsSmartWallet.SmartWalletConnector {
  constructor(input) {
    super({
      ...input,
      factoryAddress: input.registryAddress || constants.ERC6551_REGISTRY
    });
    this.tbaConfig = input;
    // TODO default account implementation address
  }
  defaultFactoryInfo() {
    return {
      createAccount: async factory => {
        return factory.prepare("createAccount", [this.tbaConfig.accountImplementation, this.chainId, this.tbaConfig.tokenContract, this.tbaConfig.tokenId, this.tbaConfig.salt, ethers.ethers.utils.toUtf8Bytes("")]);
      },
      getAccountAddress: async factory => {
        return await factory.call("account", [this.tbaConfig.accountImplementation, this.chainId, this.tbaConfig.tokenContract, this.tbaConfig.tokenId, this.tbaConfig.salt]);
      }
    };
  }
}

exports.TokenBoundSmartWalletConnector = TokenBoundSmartWalletConnector;
