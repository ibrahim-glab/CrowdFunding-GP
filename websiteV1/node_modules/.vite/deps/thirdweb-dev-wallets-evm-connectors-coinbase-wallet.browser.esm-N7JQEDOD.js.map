{
  "version": 3,
  "sources": ["../../@thirdweb-dev/wallets/evm/connectors/coinbase-wallet/dist/thirdweb-dev-wallets-evm-connectors-coinbase-wallet.browser.esm.js"],
  "sourcesContent": ["import { _ as _classPrivateMethodInitSpec, a as _classPrivateMethodGet } from '../../../../dist/classPrivateMethodGet-ea199cc3.browser.esm.js';\r\nimport { _ as _classPrivateFieldInitSpec, b as _classPrivateFieldGet, a as _classPrivateFieldSet } from '../../../../dist/classPrivateFieldSet-a5db7c83.browser.esm.js';\r\nimport { _ as _defineProperty } from '../../../../dist/defineProperty-d7c057bf.browser.esm.js';\r\nimport { W as WagmiConnector } from '../../../../dist/WagmiConnector-2f14002d.browser.esm.js';\r\nimport { U as UserRejectedRequestError, C as ChainNotConfiguredError, A as AddChainError, S as SwitchChainError } from '../../../../dist/errors-9f6736cb.browser.esm.js';\r\nimport { utils, providers } from 'ethers';\r\nimport { w as walletIds } from '../../../../dist/walletIds-8e17ffe6.browser.esm.js';\r\nimport { g as getValidPublicRPCUrl } from '../../../../dist/url-a45219bd.browser.esm.js';\r\nimport { n as normalizeChainId } from '../../../../dist/normalizeChainId-1fb9aedf.browser.esm.js';\r\nimport '@thirdweb-dev/chains';\r\nimport 'eventemitter3';\r\n\r\nvar _client = /*#__PURE__*/new WeakMap();\r\nvar _provider = /*#__PURE__*/new WeakMap();\r\nvar _isUserRejectedRequestError = /*#__PURE__*/new WeakSet();\r\nclass CoinbaseWalletConnector extends WagmiConnector {\r\n  constructor(_ref) {\r\n    let {\r\n      chains,\r\n      options\r\n    } = _ref;\r\n    super({\r\n      chains,\r\n      options: {\r\n        reloadOnDisconnect: false,\r\n        ...options\r\n      }\r\n    });\r\n    _classPrivateMethodInitSpec(this, _isUserRejectedRequestError);\r\n    _defineProperty(this, \"id\", walletIds.coinbase);\r\n    _defineProperty(this, \"name\", \"Coinbase Wallet\");\r\n    _defineProperty(this, \"ready\", true);\r\n    _classPrivateFieldInitSpec(this, _client, {\r\n      writable: true,\r\n      value: void 0\r\n    });\r\n    _classPrivateFieldInitSpec(this, _provider, {\r\n      writable: true,\r\n      value: void 0\r\n    });\r\n    _defineProperty(this, \"onAccountsChanged\", accounts => {\r\n      if (accounts.length === 0) {\r\n        this.emit(\"disconnect\");\r\n      } else {\r\n        this.emit(\"change\", {\r\n          account: utils.getAddress(accounts[0])\r\n        });\r\n      }\r\n    });\r\n    _defineProperty(this, \"onChainChanged\", chainId => {\r\n      const id = normalizeChainId(chainId);\r\n      const unsupported = this.isChainUnsupported(id);\r\n      this.emit(\"change\", {\r\n        chain: {\r\n          id,\r\n          unsupported\r\n        }\r\n      });\r\n    });\r\n    _defineProperty(this, \"onDisconnect\", () => {\r\n      this.emit(\"disconnect\");\r\n    });\r\n  }\r\n  async connect() {\r\n    let {\r\n      chainId\r\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n    try {\r\n      const provider = await this.getProvider();\r\n      this.setupListeners();\r\n      this.emit(\"message\", {\r\n        type: \"connecting\"\r\n      });\r\n      const accounts = await provider.enable();\r\n      const account = utils.getAddress(accounts[0]);\r\n      // Switch to chain if provided\r\n      let id = await this.getChainId();\r\n      let unsupported = this.isChainUnsupported(id);\r\n      if (chainId && id !== chainId) {\r\n        try {\r\n          const chain = await this.switchChain(chainId);\r\n          id = chain.chainId;\r\n          unsupported = this.isChainUnsupported(id);\r\n        } catch (e) {\r\n          console.error(`Connected but failed to switch to desired chain ${chainId}`, e);\r\n        }\r\n      }\r\n      return {\r\n        account,\r\n        chain: {\r\n          id,\r\n          unsupported\r\n        },\r\n        provider: new providers.Web3Provider(provider)\r\n      };\r\n    } catch (error) {\r\n      if (/(user closed modal|accounts received is empty)/i.test(error.message)) {\r\n        throw new UserRejectedRequestError(error);\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n  async disconnect() {\r\n    if (!_classPrivateFieldGet(this, _provider)) {\r\n      return;\r\n    }\r\n    const provider = await this.getProvider();\r\n    provider.removeListener(\"accountsChanged\", this.onAccountsChanged);\r\n    provider.removeListener(\"chainChanged\", this.onChainChanged);\r\n    provider.removeListener(\"disconnect\", this.onDisconnect);\r\n    provider.disconnect();\r\n    provider.close();\r\n  }\r\n  async getAccount() {\r\n    const provider = await this.getProvider();\r\n    const accounts = await provider.request({\r\n      method: \"eth_accounts\"\r\n    });\r\n    if (accounts.length === 0) {\r\n      throw new Error(\"No accounts found\");\r\n    }\r\n    // return checksum address\r\n    return utils.getAddress(accounts[0]);\r\n  }\r\n  async getChainId() {\r\n    const provider = await this.getProvider();\r\n    const chainId = normalizeChainId(provider.chainId);\r\n    return chainId;\r\n  }\r\n  async getProvider() {\r\n    if (!_classPrivateFieldGet(this, _provider)) {\r\n      let CoinbaseWalletSDK = (await import('@coinbase/wallet-sdk')).default;\r\n      // Workaround for Vite dev import errors\r\n      // https://github.com/vitejs/vite/issues/7112\r\n      if (typeof CoinbaseWalletSDK !== \"function\" &&\r\n      // @ts-expect-error This import error is not visible to TypeScript\r\n      typeof CoinbaseWalletSDK.default === \"function\") {\r\n        CoinbaseWalletSDK = CoinbaseWalletSDK.default;\r\n      }\r\n      _classPrivateFieldSet(this, _client, new CoinbaseWalletSDK(this.options));\r\n      const walletExtensionChainId = _classPrivateFieldGet(this, _client).walletExtension?.getChainId();\r\n      const chain = this.chains.find(chain_ => this.options.chainId ? chain_.chainId === this.options.chainId : chain_.chainId === walletExtensionChainId) || this.chains[0];\r\n      const chainId = this.options.chainId || chain?.chainId;\r\n      const jsonRpcUrl = this.options.jsonRpcUrl || chain?.rpc[0];\r\n      _classPrivateFieldSet(this, _provider, _classPrivateFieldGet(this, _client).makeWeb3Provider(jsonRpcUrl, chainId));\r\n    }\r\n    return _classPrivateFieldGet(this, _provider);\r\n  }\r\n  async getSigner() {\r\n    let {\r\n      chainId\r\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n    const [provider, account] = await Promise.all([this.getProvider(), this.getAccount()]);\r\n    return new providers.Web3Provider(provider, chainId).getSigner(account);\r\n  }\r\n  async isAuthorized() {\r\n    try {\r\n      const account = await this.getAccount();\r\n      return !!account;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n  async switchChain(chainId) {\r\n    const provider = await this.getProvider();\r\n    const id = utils.hexValue(chainId);\r\n    try {\r\n      await provider.request({\r\n        method: \"wallet_switchEthereumChain\",\r\n        params: [{\r\n          chainId: id\r\n        }]\r\n      });\r\n      return this.chains.find(x => x.chainId === chainId) ?? {\r\n        chainId: chainId,\r\n        name: `Chain ${id}`,\r\n        slug: `${id}`,\r\n        nativeCurrency: {\r\n          name: \"Ether\",\r\n          decimals: 18,\r\n          symbol: \"ETH\"\r\n        },\r\n        rpc: [\"\"],\r\n        testnet: false,\r\n        chain: \"ethereum\",\r\n        shortName: \"eth\"\r\n      };\r\n    } catch (error) {\r\n      const chain = this.chains.find(x => x.chainId === chainId);\r\n      if (!chain) {\r\n        throw new ChainNotConfiguredError({\r\n          chainId,\r\n          connectorId: this.id\r\n        });\r\n      }\r\n\r\n      // Indicates chain is not added to provider\r\n      if (error.code === 4902) {\r\n        try {\r\n          await provider.request({\r\n            method: \"wallet_addEthereumChain\",\r\n            params: [{\r\n              chainId: id,\r\n              chainName: chain.name,\r\n              nativeCurrency: chain.nativeCurrency,\r\n              rpcUrls: getValidPublicRPCUrl(chain),\r\n              // no client id on purpose here\r\n              blockExplorerUrls: this.getBlockExplorerUrls(chain)\r\n            }]\r\n          });\r\n          return chain;\r\n        } catch (addError) {\r\n          if (_classPrivateMethodGet(this, _isUserRejectedRequestError, _isUserRejectedRequestError2).call(this, addError)) {\r\n            throw new UserRejectedRequestError(addError);\r\n          }\r\n          throw new AddChainError();\r\n        }\r\n      }\r\n      if (_classPrivateMethodGet(this, _isUserRejectedRequestError, _isUserRejectedRequestError2).call(this, error)) {\r\n        throw new UserRejectedRequestError(error);\r\n      }\r\n      throw new SwitchChainError(error);\r\n    }\r\n  }\r\n  async setupListeners() {\r\n    const provider = await this.getProvider();\r\n    provider.on(\"accountsChanged\", this.onAccountsChanged);\r\n    provider.on(\"chainChanged\", this.onChainChanged);\r\n    provider.on(\"disconnect\", this.onDisconnect);\r\n  }\r\n  async getQrUrl() {\r\n    await this.getProvider();\r\n    if (!_classPrivateFieldGet(this, _client)) {\r\n      throw new Error(\"Coinbase Wallet SDK not initialized\");\r\n    }\r\n    return _classPrivateFieldGet(this, _client).getQrUrl();\r\n  }\r\n}\r\nfunction _isUserRejectedRequestError2(error) {\r\n  return /(user rejected)/i.test(error.message);\r\n}\r\n\r\nexport { CoinbaseWalletConnector };\r\n"],
  "mappings": "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",
  "names": []
}
