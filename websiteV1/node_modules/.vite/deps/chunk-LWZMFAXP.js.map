{
  "version": 3,
  "sources": ["../../@thirdweb-dev/sdk/dist/thirdweb-checkout-23db4ad3.browser.esm.js"],
  "sourcesContent": ["import { aS as ChainId } from './index-e7118e8b.browser.esm.js';\r\nimport invariant from 'tiny-invariant';\r\n\r\nconst PAPER_API_BASE = `https://paper.xyz/api`;\r\nconst PAPER_API_VERSION = `2022-08-12`;\r\n\r\n/**\r\n * @internal\r\n */\r\nconst PAPER_API_URL = `${PAPER_API_BASE}/${PAPER_API_VERSION}/platform/thirdweb`;\r\nconst PAPER_CHAIN_ID_MAP = {\r\n  [ChainId.Mainnet]: \"Ethereum\",\r\n  [ChainId.Goerli]: \"Goerli\",\r\n  [ChainId.Polygon]: \"Polygon\",\r\n  [ChainId.Mumbai]: \"Mumbai\",\r\n  [ChainId.Avalanche]: \"Avalanche\"\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nfunction parseChainIdToPaperChain(chainId) {\r\n  invariant(chainId in PAPER_CHAIN_ID_MAP, `chainId not supported by paper: ${chainId}`);\r\n  return PAPER_CHAIN_ID_MAP[chainId];\r\n}\r\n/**\r\n *\r\n * @param contractAddress - the contract address\r\n * @param chainId - the chain id\r\n * @internal\r\n * @returns The paper xyz contract id\r\n * @throws if the contract is not registered on paper xyz\r\n */\r\nasync function fetchRegisteredCheckoutId(contractAddress, chainId) {\r\n  const paperChain = parseChainIdToPaperChain(chainId);\r\n  const res = await fetch(`${PAPER_API_URL}/register-contract?contractAddress=${contractAddress}&chain=${paperChain}`);\r\n  const json = await res.json();\r\n  invariant(json.result.id, \"Contract is not registered with paper\");\r\n  return json.result.id;\r\n}\r\n\r\n/**\r\n * The parameters for creating a paper.xyz checkout link.\r\n * @public\r\n */\r\n\r\n/**\r\n * @internal\r\n */\r\n\r\n/**\r\n * @internal\r\n */\r\n\r\nconst DEFAULT_PARAMS = {\r\n  expiresInMinutes: 15,\r\n  feeBearer: \"BUYER\",\r\n  sendEmailOnSuccess: true,\r\n  redirectAfterPayment: false\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nasync function createCheckoutLinkIntent(contractId, params) {\r\n  const res = await fetch(`${PAPER_API_URL}/checkout-link-intent`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({\r\n      contractId,\r\n      ...DEFAULT_PARAMS,\r\n      ...params,\r\n      metadata: {\r\n        ...params.metadata,\r\n        via_platform: \"thirdweb\"\r\n      },\r\n      // overrides that are hard coded\r\n      hideNativeMint: true,\r\n      hidePaperWallet: !!params.walletAddress,\r\n      hideExternalWallet: true,\r\n      hidePayWithCrypto: true,\r\n      usePaperKey: false\r\n    })\r\n  });\r\n  const json = await res.json();\r\n  invariant(json.checkoutLinkIntentUrl, \"Failed to create checkout link intent\");\r\n  return json.checkoutLinkIntentUrl;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nclass PaperCheckout {\r\n  constructor(contractWrapper) {\r\n    this.contractWrapper = contractWrapper;\r\n  }\r\n  async getCheckoutId() {\r\n    return fetchRegisteredCheckoutId(this.contractWrapper.address, await this.contractWrapper.getChainID());\r\n  }\r\n  async isEnabled() {\r\n    try {\r\n      return !!(await this.getCheckoutId());\r\n    } catch (err) {\r\n      return false;\r\n    }\r\n  }\r\n  async createLinkIntent(params) {\r\n    return await createCheckoutLinkIntent(await this.getCheckoutId(), params);\r\n  }\r\n}\r\n\r\nexport { PaperCheckout as P };\r\n"],
  "mappings": ";;;;;;AAGA,IAAM,iBAAiB;AACvB,IAAM,oBAAoB;AAK1B,IAAM,gBAAgB,GAAG,cAAc,IAAI,iBAAiB;AAC5D,IAAM,qBAAqB;AAAA,EACzB,CAAC,QAAQ,OAAO,GAAG;AAAA,EACnB,CAAC,QAAQ,MAAM,GAAG;AAAA,EAClB,CAAC,QAAQ,OAAO,GAAG;AAAA,EACnB,CAAC,QAAQ,MAAM,GAAG;AAAA,EAClB,CAAC,QAAQ,SAAS,GAAG;AACvB;AAKA,SAAS,yBAAyB,SAAS;AACzC,YAAU,WAAW,oBAAoB,mCAAmC,OAAO,EAAE;AACrF,SAAO,mBAAmB,OAAO;AACnC;AASA,eAAe,0BAA0B,iBAAiB,SAAS;AACjE,QAAM,aAAa,yBAAyB,OAAO;AACnD,QAAM,MAAM,MAAM,MAAM,GAAG,aAAa,sCAAsC,eAAe,UAAU,UAAU,EAAE;AACnH,QAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,YAAU,KAAK,OAAO,IAAI,uCAAuC;AACjE,SAAO,KAAK,OAAO;AACrB;AAeA,IAAM,iBAAiB;AAAA,EACrB,kBAAkB;AAAA,EAClB,WAAW;AAAA,EACX,oBAAoB;AAAA,EACpB,sBAAsB;AACxB;AAKA,eAAe,yBAAyB,YAAY,QAAQ;AAC1D,QAAM,MAAM,MAAM,MAAM,GAAG,aAAa,yBAAyB;AAAA,IAC/D,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,gBAAgB;AAAA,IAClB;AAAA,IACA,MAAM,KAAK,UAAU;AAAA,MACnB;AAAA,MACA,GAAG;AAAA,MACH,GAAG;AAAA,MACH,UAAU;AAAA,QACR,GAAG,OAAO;AAAA,QACV,cAAc;AAAA,MAChB;AAAA;AAAA,MAEA,gBAAgB;AAAA,MAChB,iBAAiB,CAAC,CAAC,OAAO;AAAA,MAC1B,oBAAoB;AAAA,MACpB,mBAAmB;AAAA,MACnB,aAAa;AAAA,IACf,CAAC;AAAA,EACH,CAAC;AACD,QAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,YAAU,KAAK,uBAAuB,uCAAuC;AAC7E,SAAO,KAAK;AACd;AAKA,IAAM,gBAAN,MAAoB;AAAA,EAClB,YAAY,iBAAiB;AAC3B,SAAK,kBAAkB;AAAA,EACzB;AAAA,EACA,MAAM,gBAAgB;AACpB,WAAO,0BAA0B,KAAK,gBAAgB,SAAS,MAAM,KAAK,gBAAgB,WAAW,CAAC;AAAA,EACxG;AAAA,EACA,MAAM,YAAY;AAChB,QAAI;AACF,aAAO,CAAC,CAAE,MAAM,KAAK,cAAc;AAAA,IACrC,SAAS,KAAK;AACZ,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EACA,MAAM,iBAAiB,QAAQ;AAC7B,WAAO,MAAM,yBAAyB,MAAM,KAAK,cAAc,GAAG,MAAM;AAAA,EAC1E;AACF;",
  "names": []
}
