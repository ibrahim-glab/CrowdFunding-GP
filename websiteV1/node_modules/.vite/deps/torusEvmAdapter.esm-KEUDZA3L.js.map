{
  "version": 3,
  "sources": ["../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js", "../../@babel/runtime/helpers/esm/objectWithoutProperties.js", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-utils/src/randomId.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-utils/src/url.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-utils/src/utils.ts", "../../@toruslabs/torus-embed/node_modules/eth-rpc-errors/src/classes.ts", "../../@toruslabs/torus-embed/node_modules/eth-rpc-errors/src/error-constants.ts", "../../@toruslabs/torus-embed/node_modules/eth-rpc-errors/src/utils.ts", "../../@toruslabs/torus-embed/node_modules/eth-rpc-errors/src/errors.ts", "../../@toruslabs/torus-embed/node_modules/eth-rpc-errors/src/index.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-jrpc/src/basePostMessageStream.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-jrpc/src/safeEventEmitter.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-jrpc/src/serializableError.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-jrpc/src/jrpc.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-jrpc/src/jrpcEngine.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-jrpc/src/substream.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-jrpc/src/mux.ts", "../../@toruslabs/torus-embed/node_modules/@toruslabs/openlogin-jrpc/src/postMessageStream.ts", "../../@metamask/obs-store/src/asStream.ts", "../../@metamask/obs-store/src/ObservableStore.ts", "../../@metamask/obs-store/src/ComposedStore.ts", "../../@metamask/obs-store/src/MergedStore.ts", "../../process-nextick-args/index.js", "../../through2/node_modules/isarray/index.js", "../../through2/node_modules/readable-stream/lib/internal/streams/stream-browser.js", "../../through2/node_modules/safe-buffer/index.js", "../../core-util-is/lib/util.js", "../../through2/node_modules/readable-stream/lib/internal/streams/BufferList.js", "../../through2/node_modules/readable-stream/lib/internal/streams/destroy.js", "../../through2/node_modules/readable-stream/lib/_stream_writable.js", "../../through2/node_modules/readable-stream/lib/_stream_duplex.js", "../../through2/node_modules/string_decoder/lib/string_decoder.js", "../../through2/node_modules/readable-stream/lib/_stream_readable.js", "../../through2/node_modules/readable-stream/lib/_stream_transform.js", "../../through2/node_modules/readable-stream/lib/_stream_passthrough.js", "../../through2/node_modules/readable-stream/readable-browser.js", "../../through2/through2.js", "../../@metamask/obs-store/src/transform.ts", "../../@metamask/obs-store/src/index.ts", "../../@toruslabs/torus-embed/src/interfaces.ts", "../../@toruslabs/torus-embed/src/supportedCurrencies.ts", "../../@toruslabs/torus-embed/src/config.ts", "../../@toruslabs/torus-embed/src/embedUtils.ts", "../../@toruslabs/torus-embed/src/loglevel.ts", "../../@toruslabs/torus-embed/src/messages.ts", "../../@toruslabs/torus-embed/src/utils.ts", "../../@toruslabs/torus-embed/src/inpage-provider.ts", "../../@toruslabs/torus-embed/src/integrity.ts", "../../@toruslabs/torus-embed/src/PopupHandler.ts", "../../@toruslabs/torus-embed/src/siteMetadata.ts", "../../@toruslabs/torus-embed/src/embed.ts", "../../@web3auth/torus-evm-adapter/src/torusWalletAdapter.ts"],
  "sourcesContent": ["export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}", "import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}", "import randombytes from \"randombytes\";\n\nexport const randomId = (): string => randombytes(32).toString(\"hex\");\n", "import { HashParams } from \"./hashParams\";\n\nexport class URLWithHashParams extends URL {\n  hashParams: HashParams = new URLSearchParams();\n\n  toString(): string {\n    this.hash = this.hashParams.toString();\n    return super.toString.call(this);\n  }\n}\n", "import base64urlLib from \"base64url\";\nimport keccakLib from \"keccak\";\n\nexport const base64url = base64urlLib;\n\nexport function safebtoa(str: string): string {\n  return base64url.encode(str);\n}\n\nexport function safeatob(str: string): string {\n  // Going backwards: from bytestream, to percent-encoding, to original string.\n  return base64url.decode(str);\n}\n\nexport const keccak = keccakLib;\n\nexport type BufferEncoding = \"ascii\" | \"utf8\" | \"utf-8\" | \"utf16le\" | \"ucs2\" | \"ucs-2\" | \"base64\" | \"latin1\" | \"binary\" | \"hex\";\n\nexport function base64toJSON(b64str: string): Record<string, unknown> {\n  return JSON.parse(base64url.decode(b64str));\n}\n\nexport function jsonToBase64(json: Record<string, unknown>): string {\n  return base64url.encode(JSON.stringify(json));\n}\n\nexport function keccak256(str: string): string {\n  let input: string | Buffer = str;\n  if (typeof str === \"string\" && str.slice(0, 2) === \"0x\" && str.length === 66) {\n    input = Buffer.from(str.slice(2), \"hex\");\n  }\n  const data = `0x${keccak(\"keccak256\").update(input).digest(\"hex\").padStart(64, \"0\")}`;\n  return data;\n}\n\nexport interface BaseLoginOptions {\n  /**\n   * If you need to send custom parameters to the Authorization Server,\n   * make sure to use the original parameter name.\n   */\n  [key: string]: unknown;\n  /**\n   * - `'page'`: displays the UI with a full page view\n   * - `'popup'`: displays the UI with a popup window\n   * - `'touch'`: displays the UI in a way that leverages a touch interface\n   * - `'wap'`: displays the UI with a \"feature phone\" type interface\n   */\n  display?: \"page\" | \"popup\" | \"touch\" | \"wap\" | string;\n  /**\n   * - `'none'`: do not prompt user for login or consent on re-authentication\n   * - `'login'`: prompt user for re-authentication\n   * - `'consent'`: prompt user for consent before processing request\n   * - `'select_account'`: prompt user to select an account\n   */\n  prompt?: \"none\" | \"login\" | \"consent\" | \"select_account\" | string;\n  /**\n   * Maximum allowable elapsed time (in seconds) since authentication.\n   * If the last time the user authenticated is greater than this value,\n   * the user must be re-authenticated.\n   */\n  max_age?: string | number;\n  /**\n   * The space-separated list of language tags, ordered by preference.\n   * For example: `'fr-CA fr en'`.\n   */\n  ui_locales?: string;\n  /**\n   * Previously issued ID Token.\n   */\n  id_token_hint?: string;\n  /**\n   * The user's email address or other identifier. When your app knows\n   * which user is trying to authenticate, you can provide this parameter\n   * to pre-fill the email box or select the right session for sign-in.\n   *\n   * This currently only affects the classic Lock experience.\n   */\n  login_hint?: string;\n  acr_values?: string;\n  /**\n   * The default scope to be used on authentication requests.\n   * The defaultScope defined in the Auth0Client is included\n   * along with this scope\n   */\n  scope?: string;\n  /**\n   * The default audience to be used for requesting API access.\n   */\n  audience?: string;\n  /**\n   * The name of the connection configured for your application.\n   * If null, it will redirect to the Auth0 Login Page and show\n   * the Login Widget.\n   */\n  connection?: string;\n}\n\nexport interface ExtraLoginOptions extends BaseLoginOptions {\n  /**\n   * Your Auth0 account domain such as `'example.auth0.com'`,\n   * `'example.eu.auth0.com'` or , `'example.mycompany.com'`\n   * (when using [custom domains](https://auth0.com/docs/custom-domains))\n   */\n  domain?: string;\n  /**\n   * The Client ID found on your Application settings page\n   */\n  client_id?: string;\n  /**\n   * The default URL where Auth0 will redirect your browser to with\n   * the authentication result. It must be whitelisted in\n   * the \"Allowed Callback URLs\" field in your Auth0 Application's\n   * settings. If not provided here, it should be provided in the other\n   * methods that provide authentication.\n   */\n  redirect_uri?: string;\n  /**\n   * The value in seconds used to account for clock skew in JWT expirations.\n   * Typically, this value is no more than a minute or two at maximum.\n   * Defaults to 60s.\n   */\n  leeway?: number;\n  /**\n   * The field in jwt token which maps to verifier id\n   */\n  verifierIdField?: string;\n  /**\n   * Whether the verifier id field is case sensitive\n   * @defaultValue true\n   */\n  isVerifierIdCaseSensitive?: boolean;\n}\n", null, null, null, null, null, "import { Duplex } from \"readable-stream\";\n\nfunction noop(): void {\n  return undefined;\n}\n\nconst SYN = \"SYN\";\nconst ACK = \"ACK\";\nconst BRK = \"BRK\";\n\nexport default class BasePostMessageStream extends Duplex {\n  _init: boolean;\n\n  _haveSyn: boolean;\n\n  _name: string;\n\n  _target: string;\n\n  _targetWindow: Window;\n\n  _targetOrigin: string;\n\n  _onMessage: any;\n\n  _synIntervalId: number;\n\n  constructor({\n    name,\n    target,\n    targetWindow = window,\n    targetOrigin = \"*\",\n  }: {\n    name: string;\n    target: string;\n    targetWindow?: Window;\n    targetOrigin?: string;\n  }) {\n    super({\n      objectMode: true,\n    });\n    if (!name || !target) {\n      throw new Error(\"Invalid input.\");\n    }\n    this._init = false;\n    this._haveSyn = false;\n    this._name = name;\n    this._target = target; // target origin\n    this._targetWindow = targetWindow;\n    this._targetOrigin = targetOrigin;\n    this._onMessage = this.onMessage.bind(this);\n    this._synIntervalId = null;\n\n    window.addEventListener(\"message\", this._onMessage, false);\n    this._handShake();\n  }\n\n  _break(): void {\n    this.cork();\n    this._write(BRK, null, noop);\n    this._haveSyn = false;\n    this._init = false;\n  }\n\n  _handShake(): void {\n    this._write(SYN, null, noop);\n    this.cork();\n  }\n\n  _onData(data: unknown): void {\n    if (!this._init) {\n      // listen for handshake\n      if (data === SYN) {\n        this._haveSyn = true;\n        this._write(ACK, null, noop);\n      } else if (data === ACK) {\n        this._init = true;\n        if (!this._haveSyn) {\n          this._write(ACK, null, noop);\n        }\n        this.uncork();\n      }\n    } else if (data === BRK) {\n      this._break();\n    } else {\n      // forward message\n      try {\n        this.push(data);\n      } catch (err) {\n        this.emit(\"error\", err);\n      }\n    }\n  }\n\n  _postMessage(data: unknown): void {\n    const originConstraint = this._targetOrigin;\n    this._targetWindow.postMessage(\n      {\n        target: this._target,\n        data,\n      },\n      originConstraint\n    );\n  }\n\n  onMessage(event: MessageEvent): void {\n    const message = event.data;\n\n    // validate message\n    if (\n      (this._targetOrigin !== \"*\" && event.origin !== this._targetOrigin) ||\n      event.source !== this._targetWindow ||\n      typeof message !== \"object\" ||\n      message.target !== this._name ||\n      !message.data\n    ) {\n      return;\n    }\n\n    this._onData(message.data);\n  }\n\n  _read(): void {\n    return undefined;\n  }\n\n  _write(data: unknown, _, cb: () => void): void {\n    this._postMessage(data);\n    cb();\n  }\n\n  _destroy(): void {\n    window.removeEventListener(\"message\", this._onMessage, false);\n  }\n}\n", "import { EventEmitter } from \"events\";\n\ntype Handler = (...args: any[]) => void;\ninterface EventMap {\n  [k: string]: Handler | Handler[] | undefined;\n}\n\nfunction safeApply<T, A extends any[]>(handler: (this: T, ...handlerArgs: A) => void, context: T, args: A): void {\n  try {\n    Reflect.apply(handler, context, args);\n  } catch (err) {\n    // Throw error after timeout so as not to interrupt the stack\n    setTimeout(() => {\n      throw err;\n    });\n  }\n}\n\nfunction arrayClone<T>(arr: T[]): T[] {\n  const n = arr.length;\n  const copy = new Array(n);\n  for (let i = 0; i < n; i += 1) {\n    copy[i] = arr[i];\n  }\n  return copy;\n}\n\nexport default class SafeEventEmitter extends EventEmitter {\n  emit(type: string, ...args: any[]): boolean {\n    let doError = type === \"error\";\n\n    const events: EventMap = (this as any)._events;\n    if (events !== undefined) {\n      doError = doError && events.error === undefined;\n    } else if (!doError) {\n      return false;\n    }\n\n    // If there is no 'error' event listener then throw.\n    if (doError) {\n      let er;\n      if (args.length > 0) {\n        [er] = args;\n      }\n      if (er instanceof Error) {\n        // Note: The comments on the `throw` lines are intentional, they show\n        // up in Node's output if this results in an unhandled exception.\n        throw er; // Unhandled 'error' event\n      }\n      // At least give some kind of context to the user\n      const err = new Error(`Unhandled error.${er ? ` (${er.message})` : \"\"}`);\n      (err as any).context = er;\n      throw err; // Unhandled 'error' event\n    }\n\n    const handler = events[type];\n\n    if (handler === undefined) {\n      return false;\n    }\n\n    if (typeof handler === \"function\") {\n      safeApply(handler, this, args);\n    } else {\n      const len = handler.length;\n      const listeners = arrayClone(handler);\n      for (let i = 0; i < len; i += 1) {\n        safeApply(listeners[i], this, args);\n      }\n    }\n\n    return true;\n  }\n}\n", "import stringify from \"fast-safe-stringify\";\n\nexport default class SerializableError<T> extends Error {\n  public code: number;\n\n  public data: T;\n\n  constructor({ code, message, data }: { code: number; message: string; data?: T }) {\n    if (!Number.isInteger(code)) {\n      throw new Error(\"code must be an integer\");\n    }\n    if (!message || typeof message !== \"string\") {\n      throw new Error(\"message must be string\");\n    }\n\n    super(message);\n    this.code = code;\n    if (data !== undefined) {\n      this.data = data;\n    }\n  }\n\n  toString(): string {\n    return stringify({\n      code: this.code,\n      message: this.message,\n      data: this.data,\n      stack: this.stack,\n    });\n  }\n}\n", "import { randomId } from \"@toruslabs/openlogin-utils\";\nimport { Duplex } from \"readable-stream\";\n\nimport SafeEventEmitter from \"./safeEventEmitter\";\nimport SerializableError from \"./serializableError\";\n\nexport type Json = boolean | number | string | null | { [property: string]: Json } | Json[];\n\nexport type JRPCVersion = \"2.0\";\nexport type JRPCId = number | string | void;\n\nexport type ConsoleLike = Pick<Console, \"log\" | \"warn\" | \"error\" | \"debug\" | \"info\" | \"trace\">;\nexport interface JRPCBase {\n  jsonrpc?: JRPCVersion;\n  id?: JRPCId;\n}\n\nexport interface JRPCResponse<T> extends JRPCBase {\n  result?: T;\n  error?: any;\n}\n\nexport const getRpcPromiseCallback =\n  (resolve: (value?: any) => void, reject: (error?: Error) => void, unwrapResult = true) =>\n  (error: Error, response: JRPCResponse<unknown>): void => {\n    if (error || response.error) {\n      reject(error || response.error);\n    } else if (!unwrapResult || Array.isArray(response)) {\n      resolve(response);\n    } else {\n      resolve(response.result);\n    }\n  };\n\nexport interface JRPCRequest<T> extends JRPCBase {\n  method: string;\n  params?: T;\n}\n\nexport type JRPCEngineNextCallback = (cb?: (done: (error?: Error) => void) => void) => void;\nexport type JRPCEngineEndCallback = (error?: Error) => void;\nexport type JRPCEngineReturnHandler = (done: (error?: Error) => void) => void;\n\ninterface IdMapValue {\n  req: JRPCRequest<unknown>;\n  res: JRPCResponse<unknown>;\n  next: JRPCEngineNextCallback;\n  end: JRPCEngineEndCallback;\n}\n\ninterface IdMap {\n  [requestId: string]: IdMapValue;\n}\n\nexport type JRPCMiddleware<T, U> = (req: JRPCRequest<T>, res: JRPCResponse<U>, next: JRPCEngineNextCallback, end: JRPCEngineEndCallback) => void;\n\nexport function createErrorMiddleware(log: ConsoleLike): JRPCMiddleware<unknown, unknown> {\n  return (req, res, next, end) => {\n    try {\n      // json-rpc-engine will terminate the request when it notices this error\n      if (typeof req.method !== \"string\" || !req.method) {\n        res.error = new SerializableError({ code: -32603, message: \"invalid method\" });\n        end();\n        return;\n      }\n      next((done) => {\n        const { error } = res;\n        if (!error) {\n          return done();\n        }\n        log.error(`OpenLogin - RPC Error: ${error.message}`, error);\n        return done();\n      });\n    } catch (error) {\n      log.error(`OpenLogin - RPC Error thrown: ${error.message}`, error);\n      res.error = new SerializableError({ code: -32603, message: error.message });\n      end();\n    }\n  };\n}\n\nexport function createStreamMiddleware(): { events: SafeEventEmitter; middleware: JRPCMiddleware<unknown, unknown>; stream: Duplex } {\n  const idMap: IdMap = {};\n\n  function readNoop() {\n    return false;\n  }\n\n  const events = new SafeEventEmitter();\n\n  function processResponse(res: JRPCResponse<unknown>) {\n    const context = idMap[res.id as unknown as string];\n    if (!context) {\n      throw new Error(`StreamMiddleware - Unknown response id \"${res.id}\"`);\n    }\n\n    delete idMap[res.id as unknown as string];\n    // copy whole res onto original res\n    Object.assign(context.res, res);\n    // run callback on empty stack,\n    // prevent internal stream-handler from catching errors\n    setTimeout(context.end);\n  }\n\n  function processNotification(res: JRPCRequest<unknown>) {\n    events.emit(\"notification\", res);\n  }\n\n  function processMessage(res: JRPCResponse<unknown>, _encoding: unknown, cb: (error?: Error | null) => void) {\n    let err;\n    try {\n      const isNotification = !res.id;\n      if (isNotification) {\n        processNotification(res as unknown as JRPCRequest<unknown>);\n      } else {\n        processResponse(res);\n      }\n    } catch (_err) {\n      err = _err;\n    }\n    // continue processing stream\n    cb(err);\n  }\n\n  const stream = new Duplex({\n    objectMode: true,\n    read: readNoop,\n    write: processMessage,\n  });\n\n  const middleware: JRPCMiddleware<unknown, unknown> = (req, res, next, end) => {\n    // write req to stream\n    stream.push(req);\n    // register request on id map\n    idMap[req.id as unknown as string] = { req, res, next, end };\n  };\n\n  return { events, middleware, stream };\n}\n\ntype ScaffoldMiddlewareHandler<T, U> = JRPCMiddleware<T, U> | Json;\n\nexport function createScaffoldMiddleware(handlers: {\n  [methodName: string]: ScaffoldMiddlewareHandler<unknown, unknown>;\n}): JRPCMiddleware<unknown, unknown> {\n  return (req, res, next, end) => {\n    const handler = handlers[req.method];\n    // if no handler, return\n    if (handler === undefined) {\n      return next();\n    }\n    // if handler is fn, call as middleware\n    if (typeof handler === \"function\") {\n      return handler(req, res, next, end);\n    }\n    // if handler is some other value, use as result\n    res.result = handler;\n    return end();\n  };\n}\n\nexport function createIdRemapMiddleware(): JRPCMiddleware<unknown, unknown> {\n  return (req, res, next, _end) => {\n    const originalId = req.id;\n    const newId = randomId();\n    req.id = newId;\n    res.id = newId;\n    next((done) => {\n      req.id = originalId;\n      res.id = originalId;\n      done();\n    });\n  };\n}\n\nexport function createLoggerMiddleware(logger: ConsoleLike): JRPCMiddleware<unknown, unknown> {\n  return (req, res, next, _) => {\n    logger.debug(\"REQ\", req, \"RES\", res);\n    next();\n  };\n}\n\nexport type AsyncJRPCEngineNextCallback = () => Promise<void>;\n\ntype Maybe<T> = Partial<T> | null | undefined;\n\nexport interface JRPCSuccess<T> extends JRPCBase {\n  result: Maybe<T>;\n}\n\nexport interface JRPCError {\n  code: number;\n  message: string;\n  data?: unknown;\n  stack?: string;\n}\n\nexport interface PendingJRPCResponse<T> extends JRPCBase {\n  result?: T;\n  error?: Error | JRPCError;\n}\n\nexport interface JRPCFailure extends JRPCBase {\n  error: JRPCError;\n}\n\nexport type AsyncJRPCMiddleware<T, U> = (req: JRPCRequest<T>, res: PendingJRPCResponse<U>, next: AsyncJRPCEngineNextCallback) => Promise<void>;\n\ntype ReturnHandlerCallback = (error: null | Error) => void;\n\nexport function createAsyncMiddleware<T, U>(asyncMiddleware: AsyncJRPCMiddleware<T, U>): JRPCMiddleware<T, U> {\n  return async (req, res, next, end) => {\n    // nextPromise is the key to the implementation\n    // it is resolved by the return handler passed to the\n    // \"next\" function\n    let resolveNextPromise: () => void;\n    const nextPromise = new Promise<void>((resolve) => {\n      resolveNextPromise = resolve;\n    });\n\n    let returnHandlerCallback: unknown = null;\n    let nextWasCalled = false;\n\n    // This will be called by the consumer's async middleware.\n    const asyncNext = async () => {\n      nextWasCalled = true;\n\n      // We pass a return handler to next(). When it is called by the engine,\n      // the consumer's async middleware will resume executing.\n\n      next((runReturnHandlersCallback) => {\n        // This callback comes from JRPCEngine._runReturnHandlers\n        returnHandlerCallback = runReturnHandlersCallback;\n        resolveNextPromise();\n      });\n      await nextPromise;\n    };\n\n    try {\n      await asyncMiddleware(req, res, asyncNext);\n\n      if (nextWasCalled) {\n        await nextPromise; // we must wait until the return handler is called\n        (returnHandlerCallback as ReturnHandlerCallback)(null);\n      } else {\n        end(null);\n      }\n    } catch (error) {\n      if (returnHandlerCallback) {\n        (returnHandlerCallback as ReturnHandlerCallback)(error);\n      } else {\n        end(error);\n      }\n    }\n  };\n}\n", "import { serializeError } from \"eth-rpc-errors\";\nimport { Duplex } from \"readable-stream\";\n\nimport { JRPCEngineEndCallback, JRPCEngineNextCallback, JRPCEngineReturnHandler, JRPCMiddleware, JRPCRequest, JRPCResponse } from \"./jrpc\";\nimport SafeEventEmitter from \"./safeEventEmitter\";\nimport SerializableError from \"./serializableError\";\n\n/**\n * A JSON-RPC request and response processor.\n * Give it a stack of middleware, pass it requests, and get back responses.\n */\nexport class JRPCEngine extends SafeEventEmitter {\n  private _middleware: JRPCMiddleware<unknown, unknown>[];\n\n  constructor() {\n    super();\n    this._middleware = [];\n  }\n\n  /**\n   * Serially executes the given stack of middleware.\n   *\n   * @returns An array of any error encountered during middleware execution,\n   * a boolean indicating whether the request was completed, and an array of\n   * middleware-defined return handlers.\n   */\n  private static async _runAllMiddleware(\n    req: JRPCRequest<unknown>,\n    res: JRPCResponse<unknown>,\n    middlewareStack: JRPCMiddleware<unknown, unknown>[]\n  ): Promise<\n    [\n      unknown, // error\n      boolean, // isComplete\n      JRPCEngineReturnHandler[]\n    ]\n  > {\n    const returnHandlers: JRPCEngineReturnHandler[] = [];\n    let error = null;\n    let isComplete = false;\n\n    // Go down stack of middleware, call and collect optional returnHandlers\n    for (const middleware of middlewareStack) {\n      [error, isComplete] = await JRPCEngine._runMiddleware(req, res, middleware, returnHandlers);\n      if (isComplete) {\n        break;\n      }\n    }\n    return [error, isComplete, returnHandlers.reverse()];\n  }\n\n  /**\n   * Runs an individual middleware.\n   *\n   * @returns An array of any error encountered during middleware exection,\n   * and a boolean indicating whether the request should end.\n   */\n  private static _runMiddleware(\n    req: JRPCRequest<unknown>,\n    res: JRPCResponse<unknown>,\n    middleware: JRPCMiddleware<unknown, unknown>,\n    returnHandlers: JRPCEngineReturnHandler[]\n  ): Promise<[unknown, boolean]> {\n    return new Promise((resolve) => {\n      const end: JRPCEngineEndCallback = (err?: unknown) => {\n        const error = err || res.error;\n        if (error) {\n          res.error = serializeError(error);\n        }\n        // True indicates that the request should end\n        resolve([error, true]);\n      };\n\n      const next: JRPCEngineNextCallback = (returnHandler?: JRPCEngineReturnHandler) => {\n        if (res.error) {\n          end(res.error);\n        } else {\n          if (returnHandler) {\n            if (typeof returnHandler !== \"function\") {\n              end(new SerializableError({ code: -32603, message: \"JRPCEngine: 'next' return handlers must be functions\" }));\n            }\n            returnHandlers.push(returnHandler);\n          }\n\n          // False indicates that the request should not end\n          resolve([null, false]);\n        }\n      };\n\n      try {\n        middleware(req, res, next, end);\n      } catch (error) {\n        end(error);\n      }\n    });\n  }\n\n  /**\n   * Serially executes array of return handlers. The request and response are\n   * assumed to be in their scope.\n   */\n  private static async _runReturnHandlers(handlers: JRPCEngineReturnHandler[]): Promise<void> {\n    for (const handler of handlers) {\n      await new Promise<void>((resolve, reject) => {\n        handler((err) => (err ? reject(err) : resolve()));\n      });\n    }\n  }\n\n  /**\n   * Throws an error if the response has neither a result nor an error, or if\n   * the \"isComplete\" flag is falsy.\n   */\n  private static _checkForCompletion(req: JRPCRequest<unknown>, res: JRPCResponse<unknown>, isComplete: boolean): void {\n    if (!(\"result\" in res) && !(\"error\" in res)) {\n      throw new SerializableError({ code: -32603, message: \"Response has no error or result for request\" });\n    }\n    if (!isComplete) {\n      throw new SerializableError({ code: -32603, message: \"Nothing ended request\" });\n    }\n  }\n\n  /**\n   * Add a middleware function to the engine's middleware stack.\n   *\n   * @param middleware - The middleware function to add.\n   */\n  push<T, U>(middleware: JRPCMiddleware<T, U>): void {\n    this._middleware.push(middleware as JRPCMiddleware<unknown, unknown>);\n  }\n\n  /**\n   * Handle a JSON-RPC request, and return a response.\n   *\n   * @param request - The request to handle.\n   * @param callback - An error-first callback that will receive the response.\n   */\n  handle<T, U>(request: JRPCRequest<T>, callback: (error: unknown, response: JRPCResponse<U>) => void): void;\n\n  /**\n   * Handle an array of JSON-RPC requests, and return an array of responses.\n   *\n   * @param request - The requests to handle.\n   * @param callback - An error-first callback that will receive the array of\n   * responses.\n   */\n  handle<T, U>(requests: JRPCRequest<T>[], callback: (error: unknown, responses: JRPCResponse<U>[]) => void): void;\n\n  /**\n   * Handle a JSON-RPC request, and return a response.\n   *\n   * @param request - The request to handle.\n   * @returns A promise that resolves with the response, or rejects with an\n   * error.\n   */\n  handle<T, U>(request: JRPCRequest<T>): Promise<JRPCResponse<U>>;\n\n  /**\n   * Handle an array of JSON-RPC requests, and return an array of responses.\n   *\n   * @param request - The requests to handle.\n   * @returns A promise that resolves with the array of responses, or rejects\n   * with an error.\n   */\n  handle<T, U>(requests: JRPCRequest<T>[]): Promise<JRPCResponse<U>[]>;\n\n  handle(req: unknown, cb?: any) {\n    if (cb && typeof cb !== \"function\") {\n      throw new Error('\"callback\" must be a function if provided.');\n    }\n\n    if (Array.isArray(req)) {\n      if (cb) {\n        return this._handleBatch(req, cb);\n      }\n      return this._handleBatch(req);\n    }\n\n    if (cb) {\n      return this._handle(req as JRPCRequest<unknown>, cb);\n    }\n    return this._promiseHandle(req as JRPCRequest<unknown>);\n  }\n\n  /**\n   * Returns this engine as a middleware function that can be pushed to other\n   * engines.\n   *\n   * @returns This engine as a middleware function.\n   */\n  asMiddleware(): JRPCMiddleware<unknown, unknown> {\n    return async (req, res, next, end) => {\n      try {\n        const [middlewareError, isComplete, returnHandlers] = await JRPCEngine._runAllMiddleware(req, res, this._middleware);\n\n        if (isComplete) {\n          await JRPCEngine._runReturnHandlers(returnHandlers);\n          return end(middlewareError as Error);\n        }\n\n        return next(async (handlerCallback) => {\n          try {\n            await JRPCEngine._runReturnHandlers(returnHandlers);\n          } catch (error) {\n            return handlerCallback(error);\n          }\n          return handlerCallback();\n        });\n      } catch (error) {\n        return end(error);\n      }\n    };\n  }\n\n  /**\n   * Like _handle, but for batch requests.\n   */\n  private _handleBatch(reqs: JRPCRequest<unknown>[]): Promise<JRPCResponse<unknown>[]>;\n\n  /**\n   * Like _handle, but for batch requests.\n   */\n  private _handleBatch(reqs: JRPCRequest<unknown>[], cb: (error: unknown, responses?: JRPCResponse<unknown>[]) => void): Promise<void>;\n\n  private async _handleBatch(\n    reqs: JRPCRequest<unknown>[],\n    cb?: (error: unknown, responses?: JRPCResponse<unknown>[]) => void\n  ): Promise<JRPCResponse<unknown>[] | void> {\n    // The order here is important\n    try {\n      // 2. Wait for all requests to finish, or throw on some kind of fatal\n      // error\n      const responses = await Promise.all(\n        // 1. Begin executing each request in the order received\n        reqs.map(this._promiseHandle.bind(this))\n      );\n\n      // 3. Return batch response\n      if (cb) {\n        return cb(null, responses);\n      }\n      return responses;\n    } catch (error) {\n      if (cb) {\n        return cb(error);\n      }\n\n      throw error;\n    }\n  }\n\n  /**\n   * A promise-wrapped _handle.\n   */\n  private _promiseHandle(req: JRPCRequest<unknown>): Promise<JRPCResponse<unknown>> {\n    return new Promise((resolve) => {\n      this._handle(req, (_err, res) => {\n        // There will always be a response, and it will always have any error\n        // that is caught and propagated.\n        resolve(res);\n      });\n    });\n  }\n\n  /**\n   * Ensures that the request object is valid, processes it, and passes any\n   * error and the response object to the given callback.\n   *\n   * Does not reject.\n   */\n  private async _handle(callerReq: JRPCRequest<unknown>, cb: (error: unknown, response: JRPCResponse<unknown>) => void): Promise<void> {\n    if (!callerReq || Array.isArray(callerReq) || typeof callerReq !== \"object\") {\n      const error = new SerializableError({ code: -32603, message: \"request must be plain object\" });\n      return cb(error, { id: undefined, jsonrpc: \"2.0\", error });\n    }\n\n    if (typeof callerReq.method !== \"string\") {\n      const error = new SerializableError({ code: -32603, message: \"method must be string\" });\n      return cb(error, { id: callerReq.id, jsonrpc: \"2.0\", error });\n    }\n\n    const req: JRPCRequest<unknown> = { ...callerReq };\n    const res: JRPCResponse<unknown> = {\n      id: req.id,\n      jsonrpc: req.jsonrpc,\n    };\n    let error: Error = null;\n\n    try {\n      await this._processRequest(req, res);\n    } catch (_error) {\n      // A request handler error, a re-thrown middleware error, or something\n      // unexpected.\n      error = _error;\n    }\n\n    if (error) {\n      // Ensure no result is present on an errored response\n      delete res.result;\n      if (!res.error) {\n        res.error = serializeError(error);\n      }\n    }\n\n    return cb(error, res as JRPCResponse<unknown>);\n  }\n\n  /**\n   * For the given request and response, runs all middleware and their return\n   * handlers, if any, and ensures that internal request processing semantics\n   * are satisfied.\n   */\n  private async _processRequest(req: JRPCRequest<unknown>, res: JRPCResponse<unknown>): Promise<void> {\n    const [error, isComplete, returnHandlers] = await JRPCEngine._runAllMiddleware(req, res, this._middleware);\n\n    // Throw if \"end\" was not called, or if the response has neither a result\n    // nor an error.\n    JRPCEngine._checkForCompletion(req, res, isComplete);\n\n    // The return handlers should run even if an error was encountered during\n    // middleware processing.\n    await JRPCEngine._runReturnHandlers(returnHandlers);\n\n    // Now we re-throw the middleware processing error, if any, to catch it\n    // further up the call chain.\n    if (error) {\n      throw error;\n    }\n  }\n}\n\nexport function mergeMiddleware(middlewareStack: JRPCMiddleware<unknown, unknown>[]): JRPCMiddleware<unknown, unknown> {\n  const engine = new JRPCEngine();\n  middlewareStack.forEach((middleware) => engine.push(middleware));\n  return engine.asMiddleware();\n}\n\nexport interface EngineStreamOptions {\n  engine: JRPCEngine;\n}\n\nexport function createEngineStream(opts: EngineStreamOptions): Duplex {\n  if (!opts || !opts.engine) {\n    throw new Error(\"Missing engine parameter!\");\n  }\n\n  const { engine } = opts;\n  // eslint-disable-next-line prefer-const\n  let stream: Duplex;\n\n  function read() {\n    return undefined;\n  }\n\n  function write(req: JRPCRequest<unknown>, _encoding: unknown, cb: (error?: Error | null) => void) {\n    engine.handle(req, (_err, res) => {\n      stream.push(res);\n    });\n    cb();\n  }\n\n  stream = new Duplex({ objectMode: true, read, write });\n\n  // forward notifications\n  if (engine.on) {\n    engine.on(\"notification\", (message) => {\n      stream.push(message);\n    });\n  }\n  return stream;\n}\n", "import { BufferEncoding } from \"@toruslabs/openlogin-utils\";\nimport { Duplex } from \"readable-stream\";\n\nexport default class Substream extends Duplex {\n  private readonly _parent: any;\n\n  private readonly _name: string;\n\n  constructor({ parent, name }: { parent: any; name: string }) {\n    super({ objectMode: true });\n    this._parent = parent;\n    this._name = name;\n  }\n\n  /**\n   * Explicitly sets read operations to a no-op.\n   */\n  _read(): void {\n    return undefined;\n  }\n\n  /**\n   * Called when data should be written to this writable stream.\n   *\n   * @param chunk - Arbitrary object to write\n   * @param encoding - Encoding to use when writing payload\n   * @param callback - Called when writing is complete or an error occurs\n   */\n  _write(chunk: unknown, _encoding: BufferEncoding, callback: (error?: Error | null) => void): void {\n    this._parent.push({\n      name: this._name,\n      data: chunk,\n    });\n    callback();\n  }\n}\n", "import { BufferEncoding } from \"@toruslabs/openlogin-utils\";\nimport eos from \"end-of-stream\";\nimport once from \"once\";\nimport pump from \"pump\";\nimport { Duplex } from \"readable-stream\";\nimport type { Readable, Writable } from \"stream\";\n\nimport Substream from \"./substream\";\n\nexport const IGNORE_SUBSTREAM = Symbol(\"IGNORE_SUBSTREAM\");\n\nexport type Stream = Readable | Writable;\n\ninterface Chunk {\n  name: string;\n  data: unknown;\n}\n\nexport class ObjectMultiplex extends Duplex {\n  public _substreams: Record<string, Substream | typeof IGNORE_SUBSTREAM>;\n\n  getStream: (name: string) => Substream | symbol;\n\n  constructor(opts: Record<string, unknown> = {}) {\n    super({\n      ...opts,\n      objectMode: true,\n    });\n    this._substreams = {};\n  }\n\n  createStream(name: string): Substream {\n    // validate name\n    if (!name) {\n      throw new Error(\"ObjectMultiplex - name must not be empty\");\n    }\n\n    if (this._substreams[name]) {\n      throw new Error(`ObjectMultiplex - Substream for name \"${name}\" already exists`);\n    }\n\n    // create substream\n    const substream = new Substream({ parent: this, name });\n    this._substreams[name] = substream;\n\n    // listen for parent stream to end\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    anyStreamEnd(this, (_error?: Error | null) => substream.destroy(_error || undefined));\n\n    return substream;\n  }\n\n  // ignore streams (dont display orphaned data warning)\n  ignoreStream(name: string): void {\n    // validate name\n    if (!name) {\n      throw new Error(\"ObjectMultiplex - name must not be empty\");\n    }\n    if (this._substreams[name]) {\n      throw new Error(`ObjectMultiplex - Substream for name \"${name}\" already exists`);\n    }\n    // set\n    this._substreams[name] = IGNORE_SUBSTREAM;\n  }\n\n  _read(): void {\n    return undefined;\n  }\n\n  _write(chunk: Chunk, _encoding: BufferEncoding, callback: (error?: Error | null) => void): void {\n    const { name, data } = chunk;\n\n    if (!name) {\n      window.console.warn(`ObjectMultiplex - malformed chunk without name \"${chunk}\"`);\n      return callback();\n    }\n\n    // get corresponding substream\n    const substream = this._substreams[name];\n    if (!substream) {\n      window.console.warn(`ObjectMultiplex - orphaned data for stream \"${name}\"`);\n      return callback();\n    }\n\n    // push data into substream\n    if (substream !== IGNORE_SUBSTREAM) {\n      substream.push(data);\n    }\n\n    return callback();\n  }\n}\n\n// util\nfunction anyStreamEnd(stream: ObjectMultiplex, _cb: (error?: Error | null) => void) {\n  const cb = once(_cb);\n  eos(stream as unknown as Stream, { readable: false }, cb);\n  eos(stream as unknown as Stream, { writable: false }, cb);\n}\n\nexport function setupMultiplex(stream: Duplex): ObjectMultiplex {\n  const mux = new ObjectMultiplex();\n  mux.getStream = function streamHelper(name: string) {\n    if (this._substreams[name]) {\n      return this._substreams[name];\n    }\n    return this.createStream(name);\n  };\n\n  pump(stream as unknown as Stream, mux as unknown as Stream, stream as unknown as Stream, (err) => {\n    if (err) window.console.error(err);\n  });\n  return mux;\n}\n", "import BasePostMessageStream from \"./basePostMessageStream\";\n\nexport default class PostMessageStream extends BasePostMessageStream {\n  _postMessage(data: unknown): void {\n    let originConstraint = this._targetOrigin;\n    if (typeof data === \"object\") {\n      const dataObj = data as Record<string, unknown>;\n      if (typeof dataObj.data === \"object\") {\n        const dataObjData = dataObj.data as Record<string, unknown>;\n        if (Array.isArray(dataObjData.params) && dataObjData.params.length > 0) {\n          const dataObjDataParam = dataObjData.params[0] as Record<string, unknown>;\n          if (dataObjDataParam._origin) {\n            originConstraint = dataObjDataParam._origin as string;\n          }\n\n          // add a constraint for the response\n          dataObjDataParam._origin = window.location.origin;\n        }\n      }\n    }\n\n    this._targetWindow.postMessage(\n      {\n        target: this._target,\n        data,\n      },\n      originConstraint\n    );\n  }\n}\n", "import { Duplex as DuplexStream } from 'stream';\n\nimport { ObservableStore } from './ObservableStore';\n\nclass ObservableStoreStream<T> extends DuplexStream {\n  handler: (state: T) => void;\n\n  obsStore: ObservableStore<T>;\n\n  constructor(obsStore: ObservableStore<T>) {\n    super({\n      // pass values, not serializations\n      objectMode: true,\n    });\n    // dont buffer outgoing updates\n    this.resume();\n    // save handler so we can unsubscribe later\n    this.handler = (state: T) => this.push(state);\n    // subscribe to obsStore changes\n    this.obsStore = obsStore;\n    this.obsStore.subscribe(this.handler);\n  }\n\n  // emit current state on new destination\n  pipe<U extends NodeJS.WritableStream>(\n    dest: U,\n    options?: { end?: boolean },\n  ): U {\n    const result = super.pipe(dest, options);\n    dest.write(this.obsStore.getState() as any);\n    return result;\n  }\n\n  // write from incoming stream to state\n  _write(\n    chunk: any,\n    _encoding: string,\n    callback: (error?: Error | null) => void,\n  ): void {\n    this.obsStore.putState(chunk);\n    callback();\n  }\n\n  // noop - outgoing stream is asking us if we have data we arent giving it\n  _read(_size: number): void {\n    return undefined;\n  }\n\n  // unsubscribe from event emitter\n  _destroy(err: Error | null, callback: (error: Error | null) => void): void {\n    this.obsStore.unsubscribe(this.handler);\n    super._destroy(err, callback);\n  }\n}\n\nexport function storeAsStream<T>(\n  obsStore: ObservableStore<T>,\n): ObservableStoreStream<T> {\n  return new ObservableStoreStream(obsStore);\n}\n", "import SafeEventEmitter from '@metamask/safe-event-emitter';\n\nexport class ObservableStore<T> extends SafeEventEmitter {\n  private _state: T;\n\n  constructor(initState: T) {\n    super();\n    if (initState) {\n      this._state = initState;\n    } else {\n      // Typecast/default state: Preserve existing behavior\n      this._state = {} as unknown as T;\n    }\n  }\n\n  // wrapper around internal getState\n  getState(): T {\n    return this._getState();\n  }\n\n  // wrapper around internal putState\n  putState(newState: T): void {\n    this._putState(newState);\n    this.emit('update', newState);\n  }\n\n  updateState(partialState: Partial<T>): void {\n    // if non-null object, merge\n    if (partialState && typeof partialState === 'object') {\n      const state = this.getState();\n      this.putState({ ...state, ...partialState });\n      // if not object, use new value\n    } else {\n      this.putState(partialState);\n    }\n  }\n\n  // subscribe to changes\n  subscribe(handler: (state: T) => void): void {\n    this.on('update', handler);\n  }\n\n  // unsubscribe to changes\n  unsubscribe(handler: (state: T) => void): void {\n    this.removeListener('update', handler);\n  }\n\n  //\n  // private\n  //\n\n  // read from persistence\n  protected _getState(): T {\n    return this._state;\n  }\n\n  // write to persistence\n  protected _putState(newState: T): void {\n    this._state = newState;\n  }\n}\n", "import { ObservableStore } from './ObservableStore';\n\nexport class ComposedStore<\n  T extends Record<string, Record<string, unknown>>,\n> extends ObservableStore<T> {\n  private _children: Record<keyof T, ObservableStore<T[keyof T]>>;\n\n  constructor(children: Record<keyof T, ObservableStore<T[keyof T]>>) {\n    // Typecast: Preserve existing behavior\n    super({} as unknown as T);\n\n    // subscribe to children\n    this._children = children || {};\n    Object.keys(this._children).forEach((childKey) => {\n      const child = this._children[childKey];\n      this._addChild(childKey, child);\n    });\n  }\n\n  _addChild(childKey: keyof T, child: ObservableStore<T[keyof T]>) {\n    const updateFromChild = (childValue: T[keyof T]) => {\n      const state = this.getState();\n      state[childKey] = childValue;\n      this.putState(state);\n    };\n\n    child.subscribe(updateFromChild);\n    updateFromChild(child.getState());\n  }\n}\n", "import { ObservableStore } from './ObservableStore';\n\nexport class MergedStore<\n  T extends Record<string, unknown>,\n> extends ObservableStore<T> {\n  private _children: ObservableStore<Partial<T>>[];\n\n  constructor(children = []) {\n    // Typecast: Preserve existing behavior\n    super({} as unknown as T);\n\n    this._children = children;\n    // subscribe to children\n    children.forEach((child) => this._addChild(child));\n    this._updateWholeState();\n  }\n\n  _addChild(child: ObservableStore<Partial<T>>): void {\n    child.subscribe(() => this._updateWholeState());\n  }\n\n  _updateWholeState(): void {\n    const childStates = this._children.map((child) => child.getState());\n    // apply shallow merge over states\n    const state = Object.assign({}, ...childStates);\n    this.putState(state);\n  }\n}\n", "'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n", "var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n", "module.exports = require('events').EventEmitter;\n", "/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n", "'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}", "'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        pna.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        pna.nextTick(emitErrorNT, this, err);\n      }\n    }\n\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        pna.nextTick(emitErrorNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        pna.nextTick(emitErrorNT, _this, err);\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n\n  // reuse the free corkReq.\n  state.corkedRequestsFree.next = corkReq;\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, { hasUnpiped: false });\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};", "exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n", "var Transform = require('readable-stream').Transform\n  , inherits  = require('util').inherits\n  , xtend     = require('xtend')\n\nfunction DestroyableTransform(opts) {\n  Transform.call(this, opts)\n  this._destroyed = false\n}\n\ninherits(DestroyableTransform, Transform)\n\nDestroyableTransform.prototype.destroy = function(err) {\n  if (this._destroyed) return\n  this._destroyed = true\n  \n  var self = this\n  process.nextTick(function() {\n    if (err)\n      self.emit('error', err)\n    self.emit('close')\n  })\n}\n\n// a noop _transform function\nfunction noop (chunk, enc, callback) {\n  callback(null, chunk)\n}\n\n\n// create a new export function, used by both the main export and\n// the .ctor export, contains common logic for dealing with arguments\nfunction through2 (construct) {\n  return function (options, transform, flush) {\n    if (typeof options == 'function') {\n      flush     = transform\n      transform = options\n      options   = {}\n    }\n\n    if (typeof transform != 'function')\n      transform = noop\n\n    if (typeof flush != 'function')\n      flush = null\n\n    return construct(options, transform, flush)\n  }\n}\n\n\n// main export, just make me a transform stream!\nmodule.exports = through2(function (options, transform, flush) {\n  var t2 = new DestroyableTransform(options)\n\n  t2._transform = transform\n\n  if (flush)\n    t2._flush = flush\n\n  return t2\n})\n\n\n// make me a reusable prototype that I can `new`, or implicitly `new`\n// with a constructor call\nmodule.exports.ctor = through2(function (options, transform, flush) {\n  function Through2 (override) {\n    if (!(this instanceof Through2))\n      return new Through2(override)\n\n    this.options = xtend(options, override)\n\n    DestroyableTransform.call(this, this.options)\n  }\n\n  inherits(Through2, DestroyableTransform)\n\n  Through2.prototype._transform = transform\n\n  if (flush)\n    Through2.prototype._flush = flush\n\n  return Through2\n})\n\n\nmodule.exports.obj = through2(function (options, transform, flush) {\n  var t2 = new DestroyableTransform(xtend({ objectMode: true, highWaterMark: 16 }, options))\n\n  t2._transform = transform\n\n  if (flush)\n    t2._flush = flush\n\n  return t2\n})\n", "import { obj as TransformStream } from 'through2';\n\nexport function storeTransformStream<T, U>(syncTransformFn: (state: T) => U) {\n  return TransformStream((state, _encoding, cb) => {\n    try {\n      const newState = syncTransformFn(state);\n      cb(null, newState);\n      return undefined;\n    } catch (err) {\n      cb(err);\n      return undefined;\n    }\n  });\n}\n", "export * from './asStream';\nexport * from './ComposedStore';\nexport * from './MergedStore';\nexport * from './ObservableStore';\nexport * from './transform';\n", "import { JRPCId, JRPCMiddleware, JRPCRequest, JRPCVersion, SafeEventEmitter } from \"@toruslabs/openlogin-jrpc\";\nimport createHash from \"create-hash\";\nimport type { Duplex } from \"readable-stream\";\n\nexport const LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  TWITCH: \"twitch\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n} as const;\n\nexport const WALLET_VERIFIERS = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  TWITCH: \"twitch\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  EMAIL_PASSWORDLESS: \"torus-auth0-email-passwordless\",\n} as const;\n\nexport const WALLET_OPENLOGIN_VERIFIER_MAP = {\n  [WALLET_VERIFIERS.GOOGLE]: \"tkey-google\",\n  [WALLET_VERIFIERS.FACEBOOK]: \"tkey-facebook\",\n  [WALLET_VERIFIERS.TWITCH]: \"tkey-twitch\",\n  [WALLET_VERIFIERS.REDDIT]: \"tkey-reddit\",\n  [WALLET_VERIFIERS.DISCORD]: \"tkey-discord\",\n  [WALLET_VERIFIERS.EMAIL_PASSWORDLESS]: \"tkey-auth0-email-passwordless\",\n} as const;\n\nexport const PAYMENT_PROVIDER = {\n  MOONPAY: \"moonpay\",\n  WYRE: \"wyre\",\n  RAMPNETWORK: \"rampnetwork\",\n  XANPOOL: \"xanpool\",\n  MERCURYO: \"mercuryo\",\n  TRANSAK: \"transak\",\n  BANXA: \"banxa\",\n} as const;\n\nexport const SUPPORTED_PAYMENT_NETWORK = {\n  MAINNET: \"mainnet\",\n  MATIC: \"matic\",\n  BSC_MAINNET: \"bsc_mainnet\",\n  AVALANCHE_MAINNET: \"avalanche_mainnet\",\n  XDAI: \"xdai\",\n} as const;\n\nexport const TORUS_BUILD_ENV = {\n  PRODUCTION: \"production\",\n  DEVELOPMENT: \"development\",\n  BINANCE: \"binance\",\n  TESTING: \"testing\",\n  LRC: \"lrc\",\n  BETA: \"beta\",\n  BNB: \"bnb\",\n  POLYGON: \"polygon\",\n} as const;\n\nexport type PAYMENT_PROVIDER_TYPE = (typeof PAYMENT_PROVIDER)[keyof typeof PAYMENT_PROVIDER];\n\nexport type SUPPORTED_PAYMENT_NETWORK_TYPE = (typeof SUPPORTED_PAYMENT_NETWORK)[keyof typeof SUPPORTED_PAYMENT_NETWORK];\n\nexport type TORUS_BUILD_ENV_TYPE = (typeof TORUS_BUILD_ENV)[keyof typeof TORUS_BUILD_ENV];\n\nexport interface IPaymentProvider {\n  line1: string;\n  line2: string;\n  line3: string;\n  supportPage: string;\n  minOrderValue: number;\n  maxOrderValue: number;\n  validCurrencies: string[];\n  validCryptoCurrenciesByChain: Partial<Record<string, { value: string; display: string }[]>>;\n  includeFees: boolean;\n  enforceMax: boolean;\n  sell?: boolean;\n}\n\nexport interface IHashAlgorithmOptions {\n  algorithms?: createHash.algorithm[];\n  delimiter?: string;\n  full?: boolean;\n}\n\nexport interface SRI {\n  hashes: Record<createHash.algorithm, string>;\n  integrity?: string;\n}\n\nexport const BUTTON_POSITION = {\n  BOTTOM_LEFT: \"bottom-left\",\n  TOP_LEFT: \"top-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  TOP_RIGHT: \"top-right\",\n} as const;\n\nexport type EMBED_TRANSLATION_ITEM = {\n  continue: string;\n  actionRequired: string;\n  pendingAction: string;\n  cookiesRequired: string;\n  enableCookies: string;\n  clickHere: string;\n};\n\nexport type BUTTON_POSITION_TYPE = (typeof BUTTON_POSITION)[keyof typeof BUTTON_POSITION];\n\nexport type WALLET_PATH = \"transfer\" | \"topup\" | \"home\" | \"settings\" | \"history\" | \"discover\";\nexport type ETHEREUM_NETWORK_TYPE = \"sepolia\" | \"mainnet\" | \"goerli\" | \"localhost\" | \"matic\" | \"mumbai\" | \"xdai\" | \"bsc_mainnet\" | \"bsc_testnet\";\n\nexport type LOGIN_TYPE =\n  | \"google\"\n  | \"facebook\"\n  | \"reddit\"\n  | \"discord\"\n  | \"twitch\"\n  | \"apple\"\n  | \"github\"\n  | \"linkedin\"\n  | \"twitter\"\n  | \"weibo\"\n  | \"line\"\n  | \"jwt\"\n  | \"email_password\"\n  | \"passwordless\";\n\nexport interface TorusCtorArgs {\n  /**\n   * Determines where the torus widget is visible on the page.\n   * @defaultValue bottom-left\n   */\n  buttonPosition?: BUTTON_POSITION_TYPE;\n\n  /**\n   * Size of the widget button\n   * @defaultValue 56\n   */\n  buttonSize?: number;\n\n  /**\n   * Z-index of the modal and iframe\n   * @defaultValue 99999\n   */\n  modalZIndex?: number;\n\n  /**\n   * Api key\n   * Get yours today at {@link https://developer.tor.us | Dashboard}\n   */\n  apiKey?: string;\n}\n\nexport interface TorusLoginParams {\n  verifier?: string;\n  login_hint?: string;\n}\n\nexport interface NetworkInterface {\n  /**\n   * If any network other than the ones in enum, it should a JSON RPC URL\n   */\n  host: ETHEREUM_NETWORK_TYPE | string;\n  /**\n   * chainId for the network. If not provided, we query the host\n   */\n  chainId?: number;\n  /**\n   * Name of the network\n   */\n  networkName?: string;\n  /**\n   * Url of the block explorer\n   */\n  blockExplorer?: string;\n  /**\n   * Default currency ticker of the network (e.g: BNB)\n   */\n  ticker?: string;\n  /**\n   * Name for currency ticker (e.g: `Binance Coin`)\n   */\n  tickerName?: string;\n}\n\nexport interface BaseLoginOptions {\n  /**\n   * If you need to send custom parameters to the Authorization Server,\n   * make sure to use the original parameter name.\n   */\n  [key: string]: unknown;\n  /**\n   * - `'page'`: displays the UI with a full page view\n   * - `'popup'`: displays the UI with a popup window\n   * - `'touch'`: displays the UI in a way that leverages a touch interface\n   * - `'wap'`: displays the UI with a \"feature phone\" type interface\n   */\n  display?: \"page\" | \"popup\" | \"touch\" | \"wap\";\n  /**\n   * - `'none'`: do not prompt user for login or consent on reauthentication\n   * - `'login'`: prompt user for reauthentication\n   * - `'consent'`: prompt user for consent before processing request\n   * - `'select_account'`: prompt user to select an account\n   */\n  prompt?: \"none\" | \"login\" | \"consent\" | \"select_account\";\n  /**\n   * Maximum allowable elasped time (in seconds) since authentication.\n   * If the last time the user authenticated is greater than this value,\n   * the user must be reauthenticated.\n   */\n  max_age?: string | number;\n  /**\n   * The space-separated list of language tags, ordered by preference.\n   * For example: `'fr-CA fr en'`.\n   */\n  ui_locales?: string;\n  /**\n   * Previously issued ID Token.\n   */\n  id_token_hint?: string;\n  /**\n   * The user's email address or other identifier. When your app knows\n   * which user is trying to authenticate, you can provide this parameter\n   * to pre-fill the email box or select the right session for sign-in.\n   *\n   * This currently only affects the classic Lock experience.\n   */\n  login_hint?: string;\n  acr_values?: string;\n  /**\n   * The default scope to be used on authentication requests.\n   * The defaultScope defined in the Auth0Client is included\n   * along with this scope\n   */\n  scope?: string;\n  /**\n   * The default audience to be used for requesting API access.\n   */\n  audience?: string;\n  /**\n   * The name of the connection configured for your application.\n   * If null, it will redirect to the Auth0 Login Page and show\n   * the Login Widget.\n   */\n  connection?: string;\n}\n\nexport interface JwtParameters extends BaseLoginOptions {\n  /**\n   * Your Auth0 account domain such as `'example.auth0.com'`,\n   * `'example.eu.auth0.com'` or , `'example.mycompany.com'`\n   * (when using [custom domains](https://auth0.com/docs/custom-domains))\n   */\n  domain: string;\n  /**\n   * The Client ID found on your Application settings page\n   */\n  client_id?: string;\n  /**\n   * The default URL where Auth0 will redirect your browser to with\n   * the authentication result. It must be whitelisted in\n   * the \"Allowed Callback URLs\" field in your Auth0 Application's\n   * settings. If not provided here, it should be provided in the other\n   * methods that provide authentication.\n   */\n  redirect_uri?: string;\n  /**\n   * The value in seconds used to account for clock skew in JWT expirations.\n   * Typically, this value is no more than a minute or two at maximum.\n   * Defaults to 60s.\n   */\n  leeway?: number;\n\n  /**\n   * The field in jwt token which maps to verifier id\n   */\n  verifierIdField?: string;\n\n  /**\n   * Whether the verifier id field is case sensitive\n   * @defaultValue true\n   */\n  isVerifierIdCaseSensitive?: boolean;\n}\n\nexport interface LoginConfigItem {\n  /**\n   * Display Name. If not provided, we use the default for torus app\n   */\n  name: string;\n  /**\n   * The type of login. Refer to enum `LOGIN_TYPE`\n   */\n  typeOfLogin: LOGIN_TYPE;\n  /**\n   * Description for button. If provided, it renders as a full length button. else, icon button\n   */\n  description?: string;\n  /**\n   * Custom client_id. If not provided, we use the default for torus app\n   */\n  clientId?: string;\n  /**\n   * Logo to be shown on mouse hover. If not provided, we use the default for torus app\n   */\n  logoHover?: string;\n  /**\n   * Logo to be shown on dark background (dark theme). If not provided, we use the default for torus app\n   */\n  logoLight?: string;\n  /**\n   * Logo to be shown on light background (light theme). If not provided, we use the default for torus app\n   */\n  logoDark?: string;\n  /**\n   * Whether to show the login button on modal or not\n   */\n  showOnModal?: boolean;\n  /**\n   * Whether to show the login button on mobile\n   */\n  showOnMobile?: boolean;\n  /**\n   * Custom jwt parameters to configure the login. Useful for Auth0 configuration\n   */\n  jwtParameters?: JwtParameters;\n  /**\n   * Show login button on the main list\n   */\n  mainOption?: boolean;\n  /**\n   * Whether to show the login button on desktop\n   */\n  showOnDesktop?: boolean;\n  /**\n   * Modify the order of buttons. Should be greater than zero, where 1 is top priority.\n   */\n  priority?: number;\n}\n\nexport interface LoginConfig {\n  /**\n   * Use the verifier provided by torus as a key or a default verifier used by torus\n   * {@link https://docs.tor.us/torus-wallet/developing-with-torus-wallet/oauth | Documentation}\n   */\n  [verifier: string]: LoginConfigItem;\n}\n\nexport interface TorusNodePub {\n  /**\n   * X component of a Public Key\n   */\n  X: string;\n  /**\n   * Y component of a Public Key\n   */\n  Y: string;\n}\n\nexport interface TorusPublicKey extends TorusNodePub {\n  /**\n   * Ethereum Public Address\n   */\n  address: string;\n}\n\nexport interface PaymentParams {\n  /**\n   * Address to send the funds to\n   */\n  selectedAddress?: string;\n  /**\n   * Default fiat currency for the user to make the payment in\n   */\n  selectedCurrency?: string;\n  /**\n   * Amount to buy in the selectedCurrency\n   */\n  fiatValue?: number;\n  /**\n   * Cryptocurrency to buy\n   */\n  selectedCryptoCurrency?: string;\n  /**\n   * Chain Network to use\n   */\n  chainNetwork?: SUPPORTED_PAYMENT_NETWORK_TYPE;\n}\n\nexport interface VerifierArgs {\n  /**\n   * Verifier Enum\n   */\n  verifier: \"google\" | \"reddit\" | \"discord\";\n  /**\n   * email for google\n   *\n   * username for reddit\n   *\n   * id for discord\n   */\n  verifierId: string;\n  /**\n   * If true, returns {@link TorusPublicKey}, else returns string\n   */\n  isExtended?: boolean;\n}\n\nexport interface LoginParams {\n  verifier?: string;\n  login_hint?: string;\n}\n\nexport interface UserInfo {\n  /**\n   * Email of the logged in user\n   */\n  email: string;\n  /**\n   * Full name of the logged in user\n   */\n  name: string;\n  /**\n   * Profile image of the logged in user\n   */\n  profileImage: string;\n  /**\n   * verifier of the logged in user (google, facebook etc)\n   */\n  verifier: string;\n  /**\n   * Verifier Id of the logged in user\n   *\n   * email for google,\n   * id for facebook,\n   * username for reddit,\n   * id for twitch,\n   * id for discord\n   */\n  verifierId: string;\n  /**\n   * Returns if the logged in user is new\n   */\n  isNewUser: boolean;\n\n  /**\n   * login type of the logged in user (google, facebook etc)\n   */\n  typeOfLogin: LOGIN_TYPE;\n}\n\nexport interface LocaleLinks<T> {\n  /**\n   * Item corresponding to english\n   */\n  en?: T;\n  /**\n   * Item corresponding to japanese\n   */\n  ja?: T;\n  /**\n   * Item corresponding to korean\n   */\n  ko?: T;\n  /**\n   * Item corresponding to german\n   */\n  de?: T;\n  /**\n   * Item corresponding to chinese (simplified)\n   */\n  zh?: T;\n  /**\n   * Item corresponding to spanish\n   */\n  es?: T;\n}\n\nexport interface ThemeParams {\n  /**\n   * If true, enables dark mode\n   * Defaults to false\n   * @defaultValue false\n   */\n  isDark: boolean;\n  /**\n   * Colors object to customize colors in torus theme.\n   *\n   * Contact us for whitelabel. Example provided in `examples/vue-app`\n   */\n  colors: Record<string, string>;\n}\n\nexport interface IntegrityParams {\n  /**\n   * Whether to check for integrity.\n   * Defaults to false\n   * @defaultValue false\n   */\n  check: boolean;\n  /**\n   * if check is true, hash must be provided. The SRI sha-384 integrity hash\n   * {@link https://www.srihash.org/ | SRI Hash}\n   */\n  hash?: string;\n  /**\n   * Version of torus-website to load\n   */\n  version?: string;\n}\n\nexport interface VerifierStatus {\n  /**\n   * Defaults to true\n   * @defaultValue true\n   */\n  google?: boolean;\n  /**\n   * Defaults to true\n   * @defaultValue true\n   */\n  facebook?: boolean;\n  /**\n   * Defaults to true\n   * @defaultValue true\n   */\n  reddit?: boolean;\n  /**\n   * Defaults to true\n   * @defaultValue true\n   */\n  twitch?: boolean;\n  /**\n   * Defaults to true\n   * @defaultValue true\n   */\n  discord?: boolean;\n}\n\nexport interface WhiteLabelParams {\n  /**\n   * Whitelabel theme\n   */\n  theme: ThemeParams;\n  /**\n   * Language of whitelabel.\n   *\n   * order of preference: Whitelabel language \\> user language (in torus-website) \\> browser language\n   */\n  defaultLanguage?: string;\n  /**\n   * Logo Url to be used in light mode (dark logo)\n   */\n  logoDark: string;\n  /**\n   * Logo Url to be used in dark mode (light logo)\n   */\n  logoLight: string;\n  /**\n   * Shows/hides topup option in torus-website/widget.\n   * Defaults to false\n   * @defaultValue false\n   */\n  topupHide?: boolean;\n  /**\n   * Shows/hides billboard in torus-website.\n   * Defaults to false\n   * @defaultValue false\n   */\n  featuredBillboardHide?: boolean;\n  /**\n   * Shows/hides disclaimers on login page. Only works if special logins are hidden\n   * Defaults to false\n   * @defaultValue false\n   */\n  disclaimerHide?: boolean;\n  /**\n   * Language specific link for terms and conditions on torus-website. See (examples/vue-app) to configure\n   */\n  tncLink?: LocaleLinks<string>;\n  /**\n   * Language specific link for privacy policy on torus-website. See (examples/vue-app) to configure\n   */\n  privacyPolicy?: LocaleLinks<string>;\n  /**\n   * Language specific link for privacy policy on torus-website. See (examples/vue-app) to configure\n   */\n  contactLink?: LocaleLinks<string>;\n  /**\n   * Custom translations. See (examples/vue-app) to configure\n   */\n  customTranslations?: LocaleLinks<unknown>;\n}\n\nexport interface TorusParams {\n  /**\n   * Torus Network Object\n   */\n  network?: NetworkInterface;\n  /**\n   * Build Environment of Torus.\n   *\n   * production uses https://app.tor.us,\n   *\n   * development uses http://localhost:4050 (expects torus-website to be run locally),\n   *\n   * binance uses https://binance.tor.us,\n   *\n   * bnb uses https://bnb.tor.us,\n   *\n   * polygon uses https://polygon.tor.us,\n   *\n   * lrc uses https://lrc.tor.us,\n   *\n   * beta uses https://beta.tor.us, (currently supports tkey)\n   *\n   * testing uses https://testing.tor.us (latest internal build)\n   * @defaultValue production\n   */\n  buildEnv?: TORUS_BUILD_ENV_TYPE;\n  /**\n   * Enables or disables logging.\n   *\n   * Defaults to false in prod and true in other environments\n   */\n  enableLogging?: boolean;\n  /**\n   * whether to show/hide torus widget.\n   *\n   * Defaults to true\n   * @defaultValue true\n   */\n  showTorusButton?: boolean;\n  /**\n   * setting false, hides those verifiers from login modal\n   * @deprecated\n   * Please use loginConfig instead\n   */\n  enabledVerifiers?: VerifierStatus;\n  /**\n   * Array of login config items. Used to modify the default logins/ add new logins\n   */\n  loginConfig?: LoginConfig;\n  /**\n   * Params to enable integrity checks and load specific versions of torus-website\n   */\n  integrity?: IntegrityParams;\n  /**\n   * Params to enable whitelabelling of torus website and widget\n   */\n  whiteLabel?: WhiteLabelParams;\n  /**\n   * Skips TKey onboarding for new users\n   *\n   * Defaults to false\n   * @defaultValue false\n   */\n  skipTKey?: boolean;\n\n  /**\n   * Setting `useWalletConnect` to true allows to display wallet connect qr scanner from torus-embed.\n   *\n   * Defaults to false\n   * @defaultValue false\n   */\n  useWalletConnect?: boolean;\n\n  /**\n   * Setting mfa level to `default` will present mfa screen to user on every third login\n   * Setting mfa level to `optional` will present mfa screen to user on every login but user can skip it\n   * Setting mfa level to `mandatory` will make it mandatory for user to setup mfa after login\n   * Setting mfa level to`none` will make the user skip the mfa setup screen\n   *\n   * Defaults to default\n   * @defaultValue default\n   */\n  mfaLevel?: \"none\" | \"default\" | \"optional\" | \"mandatory\";\n}\n\nexport interface UnvalidatedJsonRpcRequest {\n  id?: JRPCId;\n  jsonrpc?: JRPCVersion;\n  method: string;\n  params?: unknown;\n  preopenInstanceId?: string;\n}\n\nexport interface ProviderOptions {\n  /**\n   * The name of the stream used to connect to the wallet.\n   */\n  jsonRpcStreamName?: string;\n\n  /**\n   * The maximum number of event listeners.\n   */\n  maxEventListeners?: number;\n  /**\n   * Whether the provider should send page metadata.\n   */\n  shouldSendMetadata?: boolean;\n}\n\nexport interface RequestArguments {\n  /** The RPC method to request. */\n  method: string;\n\n  /** The params of the RPC method, if any. */\n  params?: unknown[] | Record<string, unknown>;\n}\n\nexport interface BaseProviderState {\n  accounts: null | string[];\n  isConnected: boolean;\n  isUnlocked: boolean;\n  initialized: boolean;\n  isPermanentlyDisconnected: boolean;\n  hasEmittedConnection: boolean;\n}\n\nexport interface JsonRpcConnection {\n  events: SafeEventEmitter;\n  middleware: JRPCMiddleware<unknown, unknown>;\n  stream: Duplex;\n}\n\nexport interface SentWarningsState {\n  // methods\n  enable: boolean;\n  experimentalMethods: boolean;\n  send: boolean;\n  publicConfigStore: boolean;\n  // events\n  events: {\n    close: boolean;\n    data: boolean;\n    networkChanged: boolean;\n    notification: boolean;\n  };\n}\n\nexport interface SendSyncJsonRpcRequest extends JRPCRequest<unknown> {\n  method: \"eth_accounts\" | \"eth_coinbase\" | \"eth_uninstallFilter\" | \"net_version\";\n}\n\nexport interface PublicConfigState {\n  isUnlocked?: boolean;\n  selectedAddress?: string;\n  chainId?: string;\n  networkVersion?: string;\n  storageKey: string;\n}\n\nexport type Maybe<T> = Partial<T> | null | undefined;\n\nexport type BufferEncoding = \"ascii\" | \"utf8\" | \"utf-8\" | \"utf16le\" | \"ucs2\" | \"ucs-2\" | \"base64\" | \"base64url\" | \"latin1\" | \"binary\" | \"hex\";\n\nexport type IObjectMultiplex = Duplex;\n\nexport type WalletProviderState = {\n  accounts: string[];\n  chainId: string;\n  isUnlocked: boolean;\n  networkVersion: string;\n};\n", "import { PAYMENT_PROVIDER } from \"./interfaces\";\n/**\n * From https://min-api.cryptocompare.com/data/v2/pair/mapping/fsym?fsym=BTC&extraParams=YourSite\n * GET https://min-api.cryptocompare.com/data/v2/pair/mapping/fsym?fsym=BTC\n * Then map over returned entries, picking tsym\n *\n * Last updated: Date of commit\n */\nexport const CRYPTO_COMPARE_CURRENCIES = [\n  \"ETH\",\n  \"USDT\",\n  \"USDC\",\n  \"TUSD\",\n  \"EOSDT\",\n  \"USD\",\n  \"DAI\",\n  \"GUSD\",\n  \"DKKT\",\n  \"PAX\",\n  \"ILS\",\n  \"RUB\",\n  \"BYN\",\n  \"EUR\",\n  \"GBP\",\n  \"JPY\",\n  \"KRW\",\n  \"PLN\",\n  \"MXN\",\n  \"AUD\",\n  \"BRL\",\n  \"CAD\",\n  \"CHF\",\n  \"KPW\",\n  \"LAK\",\n  \"LBP\",\n  \"LKR\",\n  \"XOF\",\n  \"CNHT\",\n  \"DOGE\",\n  \"UAH\",\n  \"TRY\",\n  \"HKD\",\n  \"XJP\",\n  \"SGD\",\n  \"USC\",\n  \"NZD\",\n  \"NGN\",\n  \"RUR\",\n  \"COP\",\n  \"GHS\",\n  \"EGP\",\n  \"IDR\",\n  \"BHD\",\n  \"CRC\",\n  \"PEN\",\n  \"AED\",\n  \"DOP\",\n  \"PKR\",\n  \"HUF\",\n  \"VND\",\n  \"XAR\",\n  \"LTC\",\n  \"RON\",\n  \"OMR\",\n  \"MYR\",\n  \"DKK\",\n  \"UGX\",\n  \"ZMW\",\n  \"SAR\",\n  \"SEK\",\n  \"GEL\",\n  \"RWF\",\n  \"IRR\",\n  \"TZS\",\n  \"CNY\",\n  \"VEF\",\n  \"BDT\",\n  \"HRK\",\n  \"CLP\",\n  \"THB\",\n  \"XAF\",\n  \"ARS\",\n  \"UYU\",\n  \"SZL\",\n  \"KZT\",\n  \"NOK\",\n  \"KES\",\n  \"PAB\",\n  \"INR\",\n  \"CZK\",\n  \"MAD\",\n  \"TWD\",\n  \"PHP\",\n  \"ZAR\",\n  \"BOB\",\n  \"CDF\",\n  \"DASH\",\n  \"VES\",\n  \"ISK\",\n  \"MWK\",\n  \"BAM\",\n  \"TTD\",\n  \"XRP\",\n  \"JOD\",\n  \"RSD\",\n  \"HNL\",\n  \"BGN\",\n  \"GTQ\",\n  \"BWP\",\n  \"XMR\",\n  \"MMK\",\n  \"QAR\",\n  \"AOA\",\n  \"KWD\",\n  \"MUR\",\n  \"WUSD\",\n  \"WEUR\",\n  \"WAVES\",\n  \"WTRY\",\n  \"LRD\",\n  \"LSL\",\n  \"LYD\",\n  \"AWG\",\n  \"MDL\",\n  \"BTO\",\n  \"EURS\",\n  \"CHFT\",\n  \"MKD\",\n  \"MNT\",\n  \"MOP\",\n  \"MRO\",\n  \"MVR\",\n  \"VOLLAR\",\n  \"CKUSD\",\n  \"KHR\",\n  \"VUV\",\n  \"BITCNY\",\n  \"QC\",\n  \"BBD\",\n  \"NAD\",\n  \"NPR\",\n  \"PGK\",\n  \"PYG\",\n  \"BIF\",\n  \"BMD\",\n  \"BND\",\n  \"XLM\",\n  \"BNB\",\n  \"SCR\",\n  \"BAT\",\n  \"CRO\",\n  \"HT\",\n  \"KCS\",\n  \"LEO\",\n  \"LINK\",\n  \"MKR\",\n  \"NPXS\",\n  \"OMG\",\n  \"REP\",\n  \"ZB\",\n  \"ZIL\",\n  \"ZRX\",\n  \"BCH\",\n  \"BZD\",\n  \"CUP\",\n  \"CVE\",\n  \"DJF\",\n  \"DZD\",\n  \"ERN\",\n  \"ETB\",\n  \"FJD\",\n  \"FKP\",\n  \"BUSD\",\n  \"ANCT\",\n  \"ALL\",\n  \"AMD\",\n  \"ANG\",\n  \"CNYX\",\n  \"IQD\",\n  \"UZS\",\n  \"TND\",\n  \"GGP\",\n  \"XAU\",\n  \"KGS\",\n  \"GIP\",\n  \"JMD\",\n  \"ZEC\",\n  \"USDP\",\n  \"BSV\",\n  \"EMC2\",\n  \"SNT\",\n  \"GTO\",\n  \"POWR\",\n  \"EUSD\",\n  \"EURT\",\n  \"BCY\",\n  \"BTS\",\n  \"ATM\",\n  \"BLOCKPAY\",\n  \"ARDR\",\n  \"AMP\",\n  \"B2X\",\n  \"BITGOLD\",\n  \"BITEUR\",\n  \"ATB\",\n  \"BITUSD\",\n  \"AGRS\",\n  \"DFXT\",\n  \"HIKEN\",\n  \"BIX\",\n  \"KNC\",\n  \"EOS\",\n  \"COB\",\n  \"COSS\",\n  \"BMH\",\n  \"NANO\",\n  \"BDG\",\n  \"BNT\",\n  \"XVG\",\n  \"LKK1Y\",\n  \"LKK\",\n  \"USDK\",\n  \"EURN\",\n  \"NZDT\",\n  \"JSE\",\n  \"GMD\",\n  \"GNF\",\n  \"GYD\",\n  \"YER\",\n  \"XPF\",\n  \"HTG\",\n  \"SLL\",\n  \"SOS\",\n  \"WST\",\n  \"SVC\",\n  \"SYP\",\n  \"NEO\",\n  \"KMF\",\n  \"JUMP\",\n  \"AYA\",\n  \"BLAST\",\n  \"WGR\",\n  \"BCN\",\n  \"BTG\",\n  \"URALS\",\n  \"INN\",\n  \"USDQ\",\n  \"CNH\",\n  \"HUSD\",\n  \"BKRW\",\n  \"NZDX\",\n  \"EURX\",\n  \"CADX\",\n  \"USDEX\",\n  \"JPYX\",\n  \"AUDX\",\n  \"VNDC\",\n  \"EON\",\n  \"GBPX\",\n  \"CHFX\",\n  \"USDJ\",\n  \"IDRT\",\n  \"USDS\",\n  \"USDN\",\n  \"BIDR\",\n  \"IDK\",\n  \"BSD\",\n  \"BTN\",\n  \"KYD\",\n  \"NIO\",\n  \"SBD\",\n  \"SDG\",\n  \"SHP\",\n  \"TOP\",\n  \"XCD\",\n  \"XCHF\",\n  \"CNYT\",\n  \"GYEN\",\n  \"ZUSD\",\n  \"GOLD\",\n  \"TRX\",\n  \"TRYB\",\n  \"PLATC\",\n  \"STRAX\",\n  \"UST\",\n  \"GLM\",\n  \"VAI\",\n  \"BRZ\",\n  \"DDRST\",\n  \"XAUT\",\n  \"MIM\",\n];\n\n/**\n * currencies supported by the payment provider\n * Last updated: Date of commit\n */\nconst PROVIDER_SUPPORTED_FIAT_CURRENCIES = {\n  // https://integrations.simplex.com/supported_currencies\n  // https://support.moonpay.com/hc/en-gb/articles/360011931457-Which-fiat-currencies-are-supported-\n  [PAYMENT_PROVIDER.MOONPAY]: [\n    \"AUD\",\n    \"BGN\",\n    \"BRL\",\n    \"CAD\",\n    \"CHF\",\n    \"CNY\",\n    \"COP\",\n    \"CZK\",\n    \"DKK\",\n    \"DOP\",\n    \"EGP\",\n    \"EUR\",\n    \"GBP\",\n    \"HKD\",\n    \"HRK\",\n    \"IDR\",\n    \"ILS\",\n    \"JPY\",\n    \"JOD\",\n    \"KES\",\n    \"KRW\",\n    \"KWD\",\n    \"LKR\",\n    \"MAD\",\n    \"MXN\",\n    \"MYR\",\n    \"NGN\",\n    \"NOK\",\n    \"NZD\",\n    \"OMR\",\n    \"PEN\",\n    \"PKR\",\n    \"PLN\",\n    \"RON\",\n    \"RUB\",\n    \"SEK\",\n    \"SGD\",\n    \"THB\",\n    \"TRY\",\n    \"TWD\",\n    \"USD\",\n    \"VND\",\n    \"ZAR\",\n  ],\n  /**\n   * https://docs.sendwyre.com/docs/supported-currencies#fiat\n   * The ones where credit card is supported\n   */\n  [PAYMENT_PROVIDER.WYRE]: [\n    \"USD\",\n    \"EUR\",\n    \"GBP\",\n    \"AUD\",\n    \"CAD\",\n    \"NZD\",\n    \"ARS\",\n    \"BRL\",\n    \"CHF\",\n    \"CLP\",\n    \"COP\",\n    \"CZK\",\n    \"DKK\",\n    \"HKD\",\n    \"ILS\",\n    \"INR\",\n    \"ISK\",\n    \"JPY\",\n    \"KRW\",\n    \"MXN\",\n    \"MYR\",\n    \"NOK\",\n    \"PHP\",\n    \"PLN\",\n    \"SEK\",\n    \"THB\",\n    \"VND\",\n    \"ZAR\",\n  ],\n  // https://support.ramp.network/en/articles/471-why-am-i-paying-in-usd-eur-gbp\n  [PAYMENT_PROVIDER.RAMPNETWORK]: [\"USD\", \"EUR\", \"GBP\"],\n  // From https://xanpool.com/ fiat select dropdown\n  [PAYMENT_PROVIDER.XANPOOL]: [\"SGD\", \"HKD\", \"THB\", \"PHP\", \"INR\", \"IDR\", \"MYR\", \"AUD\", \"NZD\", \"KRW\"],\n  // https://support.aax.com/en/articles/5295762-mercuryo\n  // RUB / UAH currently not supported\n  [PAYMENT_PROVIDER.MERCURYO]: [\"EUR\", \"USD\", \"GBP\", \"TRY\", \"JPY\", \"BRL\", \"NGN\", \"VND\", \"MXN\", \"KRW\"],\n  /**\n   * https://support.transak.com/hc/en-us/articles/360020615578-Credit-and-Debit-Card-Payments-through-Transak\n   * or\n   * https://transak.stoplight.io/docs/transak-docs/b3A6OTk1ODQ0-2-get-fiat-currencies\n   */\n  [PAYMENT_PROVIDER.TRANSAK]: [\n    \"ARS\",\n    \"AUD\",\n    \"BBD\",\n    \"BGN\",\n    \"BMD\",\n    \"BRL\",\n    \"CAD\",\n    \"CHF\",\n    \"CLP\",\n    \"CRC\",\n    \"CZK\",\n    \"DKK\",\n    \"DOP\",\n    \"EUR\",\n    \"FJD\",\n    \"FKP\",\n    \"GBP\",\n    \"GIP\",\n    \"HRK\",\n    \"HUF\",\n    \"IDR\",\n    \"ILS\",\n    \"ISK\",\n    \"JMD\",\n    \"JPY\",\n    \"KES\",\n    \"KRW\",\n    \"MDL\",\n    \"MXN\",\n    \"MYR\",\n    \"NOK\",\n    \"NZD\",\n    \"PEN\",\n    \"PHP\",\n    \"PLN\",\n    \"PYG\",\n    \"RON\",\n    \"SEK\",\n    \"SGD\",\n    \"THB\",\n    \"TRY\",\n    \"TZS\",\n    \"USD\",\n    \"ZAR\",\n  ],\n  [PAYMENT_PROVIDER.BANXA]: [\"EUR\", \"GBP\", \"USD\"],\n};\n\nconst cryptoCompareCurrenciesSet = new Set(CRYPTO_COMPARE_CURRENCIES);\n/**\n * Fiat currencies that we support\n */\nexport function supportedFiatCurrencies(provider) {\n  const providerSupportedFiatCurrencies = PROVIDER_SUPPORTED_FIAT_CURRENCIES[provider];\n  return providerSupportedFiatCurrencies.filter((currency) => cryptoCompareCurrenciesSet.has(currency));\n}\n", "import { EMBED_TRANSLATION_ITEM, IPaymentProvider, LocaleLinks, PAYMENT_PROVIDER, SUPPORTED_PAYMENT_NETWORK, WALLET_VERIFIERS } from \"./interfaces\";\nimport { supportedFiatCurrencies } from \"./supportedCurrencies\";\n\nconst paymentProviders = {\n  [PAYMENT_PROVIDER.MOONPAY]: {\n    line1: \"Credit/ Debit Card/ Apple Pay\",\n    line2: \"4.5% or 5 USD\",\n    line3: \"2,000/day, 10,000/mo\",\n    supportPage: \"https://help.moonpay.io/en/\",\n    minOrderValue: 24.99,\n    maxOrderValue: 50_000,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.MOONPAY),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [\n        { value: \"aave\", display: \"AAVE\" },\n        { value: \"bat\", display: \"BAT\" },\n        { value: \"dai\", display: \"DAI\" },\n        { value: \"eth\", display: \"ETH\" },\n        { value: \"mkr\", display: \"MKR\" },\n        { value: \"matic\", display: \"MATIC\" },\n        { value: \"usdt\", display: \"USDT\" },\n        { value: \"usdc\", display: \"USDC\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [\n        { value: \"eth_polygon\", display: \"ETH\" },\n        { value: \"matic_polygon\", display: \"MATIC\" },\n        { value: \"usdc_polygon\", display: \"USDC\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]: [\n        { value: \"bnb_bsc\", display: \"BNB\" },\n        { value: \"busd_bsc\", display: \"BUSD\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]: [{ value: \"avax_cchain\", display: \"AVAX\" }],\n    },\n    includeFees: true,\n    api: true,\n    enforceMax: false,\n  } as IPaymentProvider,\n  [PAYMENT_PROVIDER.WYRE]: {\n    line1: \"Apple Pay/ Debit/ Credit Card\",\n    line2: \"4.9% + 30 or 5 USD\",\n    line3: \"$250/day\",\n    supportPage: \"https://support.sendwyre.com/en/\",\n    minOrderValue: 5,\n    maxOrderValue: 500,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.WYRE),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [\n        { value: \"AAVE\", display: \"AAVE\" },\n        { value: \"BAT\", display: \"BAT\" },\n        { value: \"BUSD\", display: \"BUSD\" },\n        { value: \"DAI\", display: \"DAI\" },\n        { value: \"ETH\", display: \"ETH\" },\n        { value: \"MKR\", display: \"MKR\" },\n        { value: \"UNI\", display: \"UNI\" },\n        { value: \"USDC\", display: \"USDC\" },\n        { value: \"USDT\", display: \"USDT\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [{ value: \"MUSDC\", display: \"USDC\" }],\n      // AVAXC? or AVAX?\n      [SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]: [{ value: \"AVAXC\", display: \"AVAXC\" }],\n    },\n    includeFees: false,\n    api: true,\n    enforceMax: false,\n  } as IPaymentProvider,\n  [PAYMENT_PROVIDER.RAMPNETWORK]: {\n    line1: \"Debit Card/ <br>Apple Pay/ Bank transfer\",\n    line2: \"0.49% - 2.9%\",\n    line3: \"5,000/purchase, 20,000/mo\",\n    supportPage: \"https://instant.ramp.network/\",\n    minOrderValue: 50,\n    maxOrderValue: 20_000,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.RAMPNETWORK),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [\n        { value: \"ETH\", display: \"ETH\" },\n        { value: \"DAI\", display: \"DAI\" },\n        { value: \"USDC\", display: \"USDC\" },\n        { value: \"USDT\", display: \"USDT\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [\n        { value: \"MATIC_DAI\", display: \"DAI\" },\n        { value: \"MATIC_MATIC\", display: \"MATIC\" },\n        { value: \"MATIC_USDC\", display: \"USDC\" },\n      ],\n      // what about AVAXC?\n      [SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]: [{ value: \"AVAX\", display: \"AVAX\" }],\n      // Temporary unavailable\n      // [SUPPORTED_PAYMENT_NETWORK.XDAI]: [{ value: 'XDAI_XDAI', display: 'XDAI' }],\n    },\n    includeFees: true,\n    api: true,\n    receiveHint: \"walletTopUp.receiveHintRamp\",\n    enforceMax: false,\n  } as IPaymentProvider,\n  [PAYMENT_PROVIDER.XANPOOL]: {\n    line1: \"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ <br>ViettelPay/ DuitNow\",\n    line2: \"2.5% buying, 3% selling\",\n    line3: \"$2,500 / day\",\n    supportPage: \"mailto:support@xanpool.com\",\n    minOrderValue: 100,\n    maxOrderValue: 2500,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.XANPOOL),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [\n        { value: \"ETH\", display: \"ETH\" },\n        { value: \"USDT\", display: \"USDT\" },\n      ],\n    },\n    includeFees: true,\n    api: true,\n    sell: true,\n    enforceMax: false,\n  } as IPaymentProvider,\n  [PAYMENT_PROVIDER.MERCURYO]: {\n    line1: \"Credit/ Debit Card/ Apple Pay\",\n    line2: \"3.95% or 4 USD\",\n    line3: \"10,000/day, 25,000/mo\",\n    supportPage: \"mailto:support@mercuryo.io\",\n    minOrderValue: 30,\n    maxOrderValue: 5000,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.MERCURYO),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [\n        { value: \"ETH\", display: \"ETH\" },\n        { value: \"BAT\", display: \"BAT\" },\n        { value: \"USDT\", display: \"USDT\" },\n        { value: \"DAI\", display: \"DAI\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]: [\n        { value: \"BNB\", display: \"BNB\" },\n        { value: \"BUSD\", display: \"BUSD\" },\n        { value: \"1INCH\", display: \"1INCH\" },\n      ],\n    },\n    includeFees: true,\n    api: true,\n    enforceMax: false,\n  } as IPaymentProvider,\n  [PAYMENT_PROVIDER.TRANSAK]: {\n    line1: \"Apple & Google Pay / Credit/Debit Card<br/>Bangkok Bank Mobile & iPay<br/>Bank Transfer (sepa/gbp) / SCB Mobile & Easy\",\n    line2: \"0.99% - 5.5% or 5 USD\",\n    line3: \"$5,000/day, $28,000/mo\",\n    supportPage: \"https://support.transak.com/hc/en-US\",\n    minOrderValue: 30,\n    maxOrderValue: 500,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.TRANSAK),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [\n        { value: \"AAVE\", display: \"AAVE\" },\n        { value: \"DAI\", display: \"DAI\" },\n        { value: \"ETH\", display: \"ETH\" },\n        { value: \"USDC\", display: \"USDC\" },\n        { value: \"USDT\", display: \"USDT\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [\n        { value: \"AAVE\", display: \"AAVE\" },\n        { value: \"DAI\", display: \"DAI\" },\n        { value: \"MATIC\", display: \"MATIC\" },\n        { value: \"USDC\", display: \"USDC\" },\n        { value: \"USDT\", display: \"USDT\" },\n        { value: \"WETH\", display: \"WETH\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]: [\n        { value: \"BNB\", display: \"BNB\" },\n        { value: \"BUSD\", display: \"BUSD\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]: [{ value: \"AVAX\", display: \"AVAX\" }],\n    },\n    includeFees: true,\n    enforceMax: true,\n  } as IPaymentProvider,\n  [PAYMENT_PROVIDER.BANXA]: {\n    line1: \"Debit Card/ <br>Apple Pay/ Bank transfer\",\n    line2: \"0.49% - 2.9%\",\n    line3: \"5,000/purchase, 20,000/mo\",\n    supportPage: \"https://support.banxa.com\",\n    minOrderValue: 20,\n    maxOrderValue: 15_000,\n    validCurrencies: supportedFiatCurrencies(PAYMENT_PROVIDER.BANXA),\n    validCryptoCurrenciesByChain: {\n      [SUPPORTED_PAYMENT_NETWORK.MAINNET]: [\n        { value: \"ETH\", display: \"ETH\" },\n        { value: \"USDT\", display: \"USDT\" },\n        { value: \"BUSD\", display: \"BUSD\" },\n        { value: \"LINK\", display: \"LINK\" },\n        { value: \"USDC\", display: \"USDC\" },\n        { value: \"CHZ\", display: \"CHZ\" },\n        { value: \"BAT\", display: \"BAT\" },\n        { value: \"MANA\", display: \"MANA\" },\n        { value: \"AAVE\", display: \"AAVE\" },\n        { value: \"COMP\", display: \"COMP\" },\n        { value: \"ENJ\", display: \"ENJ\" },\n      ],\n      [SUPPORTED_PAYMENT_NETWORK.MATIC]: [{ value: \"MATIC\", display: \"MATIC\" }],\n      // [SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]: [{ value: \"BNB\", display: \"BNB\" }],\n    },\n    includeFees: true,\n    enforceMax: true,\n  },\n};\n\nconst translations = {\n  en: {\n    embed: {\n      continue: \"Continue\",\n      actionRequired: \"Authorization required\",\n      pendingAction: \"Click continue to proceed with your request in a popup\",\n      cookiesRequired: \"Cookies Required\",\n      enableCookies: \"Please enable cookies in your browser preferences to access Torus\",\n      clickHere: \"More Info\",\n    },\n  },\n  de: {\n    embed: {\n      continue: \"Fortsetzen\",\n      actionRequired: \"Autorisierung erforderlich\",\n      pendingAction: \"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",\n      cookiesRequired: \"Cookies bentigt\",\n      enableCookies: \"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",\n      clickHere: \"Mehr Info\",\n    },\n  },\n  ja: {\n    embed: {\n      continue: \"\",\n      actionRequired: \"\",\n      pendingAction: \"\",\n      cookiesRequired: \"\",\n      enableCookies: \"TorusCookie\",\n      clickHere: \"\",\n    },\n  },\n  ko: {\n    embed: {\n      continue: \"\",\n      actionRequired: \" \",\n      pendingAction: \"    .\",\n      cookiesRequired: \" \",\n      enableCookies: \"     Torus .\",\n      clickHere: \"  \",\n    },\n  },\n  zh: {\n    embed: {\n      continue: \"\",\n      actionRequired: \"\",\n      pendingAction: \"\",\n      cookiesRequired: \"Cookie\",\n      enableCookies: \"cookieTorus\",\n      clickHere: \"\",\n    },\n  },\n} as LocaleLinks<{ embed: EMBED_TRANSLATION_ITEM }>;\n\nexport default {\n  supportedVerifierList: Object.values(WALLET_VERIFIERS),\n  paymentProviders,\n  api: \"https://api.tor.us\",\n  translations,\n  prodTorusUrl: \"\",\n  localStorageKeyPrefix: `torus-`,\n};\n", "import { Stream } from \"pump\";\n\nexport const runOnLoad = (fn: () => void): Promise<unknown> =>\n  new Promise((resolve, reject) => {\n    if (window.document.body != null) {\n      Promise.resolve(fn()).then(resolve).catch(reject);\n    } else {\n      window.document.addEventListener(\"DOMContentLoaded\", () => {\n        Promise.resolve(fn()).then(resolve).catch(reject);\n      });\n    }\n  });\n\nexport const runOnComplete = (fn: () => void): void => {\n  const retry = window.setInterval(() => {\n    if (window.document.readyState === \"complete\") {\n      window.clearInterval(retry);\n      fn();\n    }\n  }, 300);\n};\n\nexport const htmlToElement = <T extends Element>(html: string): T => {\n  const template = window.document.createElement(\"template\");\n  const trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild as T;\n};\n\nexport const handleEvent = (handle: EventTarget, eventName: string, handler: (...args: unknown[]) => void, ...handlerArgs: unknown[]): void => {\n  const handlerWrapper = () => {\n    handler(...handlerArgs);\n    handle.removeEventListener(eventName, handlerWrapper);\n  };\n  handle.addEventListener(eventName, handlerWrapper);\n};\n\nexport const handleStream = (handle: Stream, eventName: string, handler: (chunk: unknown) => void): void => {\n  const handlerWrapper = (chunk: unknown) => {\n    handler(chunk);\n    handle.removeListener(eventName, handlerWrapper);\n  };\n  handle.on(eventName, handlerWrapper);\n};\n\nexport async function documentReady(): Promise<void> {\n  return new Promise<void>((resolve) => {\n    if (document.readyState !== \"loading\") {\n      resolve();\n    } else {\n      handleEvent(document, \"DOMContentLoaded\", resolve);\n    }\n  });\n}\n", "import loglevel from \"loglevel\";\n\nexport default loglevel.getLogger(\"torus-embed\");\n", "export default {\n  errors: {\n    disconnected: (): string => \"Torus: Lost connection to Torus.\",\n    permanentlyDisconnected: (): string => \"Torus: Disconnected from iframe. Page reload required.\",\n    sendSiteMetadata: (): string => \"Torus: Failed to send site metadata. This is an internal error, please report this bug.\",\n    unsupportedSync: (method: string): string =>\n      `Torus: The Torus Ethereum provider does not support synchronous methods like ${method} without a callback parameter.`,\n    invalidDuplexStream: (): string => \"Must provide a Node.js-style duplex stream.\",\n    invalidOptions: (maxEventListeners: number, shouldSendMetadata: boolean): string =>\n      `Invalid options. Received: { maxEventListeners: ${maxEventListeners}, shouldSendMetadata: ${shouldSendMetadata} }`,\n    invalidRequestArgs: (): string => `Expected a single, non-array, object argument.`,\n    invalidRequestMethod: (): string => `'args.method' must be a non-empty string.`,\n    invalidRequestParams: (): string => `'args.params' must be an object or array if provided.`,\n    invalidLoggerObject: (): string => `'args.logger' must be an object if provided.`,\n    invalidLoggerMethod: (method: string): string => `'args.logger' must include required method '${method}'.`,\n  },\n  info: {\n    connected: (chainId: string): string => `Torus: Connected to chain with ID \"${chainId}\".`,\n  },\n  warnings: {\n    // deprecated methods\n    enableDeprecation:\n      'Torus: \"\"ethereum.enable()\" is deprecated and may be removed in the future. ' +\n      'Please use \"ethereum.send(\"eth_requestAccounts\")\" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',\n    sendDeprecation:\n      'Torus: \"ethereum.send(...)\" is deprecated and may be removed in the future.' +\n      ' Please use \"ethereum.sendAsync(...)\" or \"ethereum.request(...)\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',\n    events: {\n      close:\n        'Torus: The event \"close\" is deprecated and may be removed in the future. Please use \"disconnect\" instead.' +\n        \"\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193\",\n      data:\n        'Torus: The event \"data\" is deprecated and will be removed in the future.' +\n        'Use \"message\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',\n      networkChanged:\n        'Torus: The event \"networkChanged\" is deprecated and may be removed in the future.' +\n        ' Please use \"chainChanged\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',\n      notification:\n        'Torus: The event \"notification\" is deprecated and may be removed in the future. ' +\n        'Please use \"message\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',\n    },\n    publicConfigStore: 'Torus: The property \"publicConfigStore\" is deprecated and WILL be removed in the future.',\n  },\n};\n", "import { get } from \"@toruslabs/http-helpers\";\nimport { JRPCMiddleware, PendingJRPCResponse, SafeEventEmitter } from \"@toruslabs/openlogin-jrpc\";\nimport { ethErrors } from \"eth-rpc-errors\";\nimport { LogLevelDesc } from \"loglevel\";\n\nimport config from \"./config\";\nimport { IntegrityParams, PAYMENT_PROVIDER, PAYMENT_PROVIDER_TYPE, PaymentParams, TORUS_BUILD_ENV_TYPE } from \"./interfaces\";\nimport log from \"./loglevel\";\n\nconst { paymentProviders } = config;\n\ntype PaymentErrorParams = {\n  fiatValue?: string;\n  selectedCurrency?: string;\n  selectedCryptoCurrency?: string;\n};\n\ntype PaymentErrors = { provider?: string } & PaymentErrorParams;\n\nexport const validatePaymentProvider = (provider: string, params: PaymentParams): { errors: PaymentErrors; isValid: boolean } => {\n  const errors: PaymentErrors = {};\n\n  if (!provider) {\n    return { errors, isValid: true };\n  }\n\n  if (provider && !paymentProviders[provider]) {\n    errors.provider = \"Invalid Provider\";\n    return { errors, isValid: Object.keys(errors).length === 0 };\n  }\n\n  const selectedProvider = paymentProviders[provider as PAYMENT_PROVIDER_TYPE];\n  const selectedParams = params || {};\n\n  // set default values\n  // if (!selectedParams.selectedCurrency) [selectedParams.selectedCurrency] = selectedProvider.validCurrencies\n  // if (!selectedParams.fiatValue) selectedParams.fiatValue = selectedProvider.minOrderValue\n  // if (!selectedParams.selectedCryptoCurrency) [selectedParams.selectedCryptoCurrency] = selectedProvider.validCryptoCurrencies\n\n  // validations\n  if (selectedParams.fiatValue) {\n    const requestedOrderAmount = +parseFloat(selectedParams.fiatValue.toString()) || 0;\n    if (requestedOrderAmount < selectedProvider.minOrderValue) errors.fiatValue = \"Requested amount is lower than supported\";\n    if (requestedOrderAmount > selectedProvider.maxOrderValue && selectedProvider.enforceMax)\n      errors.fiatValue = \"Requested amount is higher than supported\";\n  }\n  if (selectedParams.selectedCurrency && !selectedProvider.validCurrencies.includes(selectedParams.selectedCurrency)) {\n    errors.selectedCurrency = \"Unsupported currency\";\n  }\n  if (selectedParams.selectedCryptoCurrency) {\n    const validCryptoCurrenciesByChain = Object.values(selectedProvider.validCryptoCurrenciesByChain)\n      .flat()\n      .map((currency) => currency.value);\n\n    const finalCryptoCurrency =\n      provider === PAYMENT_PROVIDER.MOONPAY ? selectedParams.selectedCryptoCurrency.toLowerCase() : selectedParams.selectedCryptoCurrency;\n\n    if (validCryptoCurrenciesByChain && !validCryptoCurrenciesByChain.includes(finalCryptoCurrency))\n      errors.selectedCryptoCurrency = \"Unsupported cryptoCurrency\";\n  }\n  return { errors, isValid: Object.keys(errors).length === 0 };\n};\n\n// utility functions\n\n/**\n * json-rpc-engine middleware that logs RPC errors and and validates req.method.\n *\n * @param log - The logging API to use.\n * @returns  json-rpc-engine middleware function\n */\nexport function createErrorMiddleware(): JRPCMiddleware<unknown, unknown> {\n  return (req, res, next) => {\n    // json-rpc-engine will terminate the request when it notices this error\n    if (typeof req.method !== \"string\" || !req.method) {\n      res.error = ethErrors.rpc.invalidRequest({\n        message: `The request 'method' must be a non-empty string.`,\n        data: req,\n      });\n    }\n\n    next((done) => {\n      const { error } = res;\n      if (!error) {\n        return done();\n      }\n      log.error(`MetaMask - RPC Error: ${error.message}`, error);\n      return done();\n    });\n  };\n}\n\n// resolve response.result or response, reject errors\nexport const getRpcPromiseCallback =\n  (resolve: (value?: any) => void, reject: (error?: Error) => void, unwrapResult = true) =>\n  (error: Error, response: PendingJRPCResponse<unknown>): void => {\n    if (error || response.error) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      reject(error || response.error);\n    } else {\n      resolve(!unwrapResult || Array.isArray(response) ? response : response.result);\n    }\n  };\n\n/**\n * Logs a stream disconnection error. Emits an 'error' if given an\n * EventEmitter that has listeners for the 'error' event.\n *\n * @param log - The logging API to use.\n * @param remoteLabel - The label of the disconnected stream.\n * @param error - The associated error to log.\n * @param emitter - The logging API to use.\n */\nexport function logStreamDisconnectWarning(remoteLabel: string, error: Error, emitter: SafeEventEmitter): void {\n  let warningMsg = `MetaMask: Lost connection to \"${remoteLabel}\".`;\n  if (error?.stack) {\n    warningMsg += `\\n${error.stack}`;\n  }\n  log.warn(warningMsg);\n  if (emitter && emitter.listenerCount(\"error\") > 0) {\n    emitter.emit(\"error\", warningMsg);\n  }\n}\n\nexport const getPreopenInstanceId = () => Math.random().toString(36).slice(2);\n\nexport const getTorusUrl = async (\n  buildEnv: TORUS_BUILD_ENV_TYPE,\n  integrity: IntegrityParams\n): Promise<{ torusUrl: string; logLevel: LogLevelDesc }> => {\n  let torusUrl: string;\n  let logLevel: LogLevelDesc;\n  // Do not change this line\n  const version = process.env.TORUS_EMBED_VERSION;\n  let versionUsed = integrity.version || version;\n  try {\n    if ((buildEnv === \"binance\" || buildEnv === \"production\") && !integrity.version) {\n      let response: { data: string };\n      if (!config.prodTorusUrl)\n        response = await get(`${config.api}/latestversion?name=@toruslabs/torus-embed&version=${version}`, {}, { useAPIKey: true });\n      else response = { data: config.prodTorusUrl };\n      versionUsed = response.data;\n      // eslint-disable-next-line require-atomic-updates\n      config.prodTorusUrl = response.data;\n    }\n  } catch (error) {\n    log.error(error, \"unable to fetch latest version\");\n  }\n  log.info(\"version used: \", versionUsed);\n  switch (buildEnv) {\n    case \"binance\":\n      torusUrl = `https://binance.tor.us/v${versionUsed}`;\n      logLevel = \"info\";\n      break;\n    case \"testing\":\n      torusUrl = \"https://testing.tor.us\";\n      logLevel = \"debug\";\n      break;\n    case \"bnb\":\n      torusUrl = \"https://bnb.tor.us\";\n      logLevel = \"error\";\n      break;\n    case \"polygon\":\n      torusUrl = \"https://polygon.tor.us\";\n      logLevel = \"error\";\n      break;\n    case \"lrc\":\n      torusUrl = \"https://lrc.tor.us\";\n      logLevel = \"debug\";\n      break;\n    case \"beta\":\n      torusUrl = \"https://beta.tor.us\";\n      logLevel = \"debug\";\n      break;\n    case \"development\":\n      torusUrl = \"http://localhost:4050\";\n      logLevel = \"debug\";\n      break;\n    default:\n      torusUrl = `https://app.tor.us/v${versionUsed}`;\n      logLevel = \"error\";\n      break;\n  }\n  return { torusUrl, logLevel };\n};\n\nexport const getUserLanguage = (): string => {\n  let userLanguage = window.navigator.language || \"en-US\";\n  const userLanguages = userLanguage.split(\"-\");\n  userLanguage = Object.prototype.hasOwnProperty.call(config.translations, userLanguages[0]) ? userLanguages[0] : \"en\";\n  return userLanguage;\n};\n\nexport const EMITTED_NOTIFICATIONS = [\n  \"eth_subscription\", // per eth-json-rpc-filters/subscriptionManager\n];\n\nexport const NOOP = (): void => {\n  // empty function\n};\n\nexport const FEATURES_PROVIDER_CHANGE_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375\";\nexport const FEATURES_DEFAULT_WALLET_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315\";\nexport const FEATURES_DEFAULT_POPUP_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=1200\";\nexport const FEATURES_CONFIRM_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450\";\n\nexport function getPopupFeatures(): string {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n\n  const w = 1200;\n  const h = 700;\n\n  const width = window.innerWidth\n    ? window.innerWidth\n    : document.documentElement.clientWidth\n    ? document.documentElement.clientWidth\n    : window.screen.width;\n\n  const height = window.innerHeight\n    ? window.innerHeight\n    : document.documentElement.clientHeight\n    ? document.documentElement.clientHeight\n    : window.screen.height;\n\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = `titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${h / systemZoom},width=${w / systemZoom},top=${top},left=${left}`;\n  return features;\n}\n", "import { ObservableStore, storeAsStream } from \"@metamask/obs-store\";\nimport {\n  createIdRemapMiddleware,\n  createStreamMiddleware,\n  JRPCEngine,\n  JRPCRequest,\n  JRPCResponse,\n  JRPCSuccess,\n  ObjectMultiplex,\n  SafeEventEmitter,\n} from \"@toruslabs/openlogin-jrpc\";\nimport { EthereumRpcError, ethErrors } from \"eth-rpc-errors\";\nimport dequal from \"fast-deep-equal\";\nimport { duplex as isDuplexStream } from \"is-stream\";\nimport pump from \"pump\";\nimport type { Duplex } from \"readable-stream\";\n\nimport {\n  BaseProviderState,\n  JsonRpcConnection,\n  Maybe,\n  ProviderOptions,\n  PublicConfigState,\n  RequestArguments,\n  SendSyncJsonRpcRequest,\n  SentWarningsState,\n  UnvalidatedJsonRpcRequest,\n  WalletProviderState,\n} from \"./interfaces\";\nimport log from \"./loglevel\";\nimport messages from \"./messages\";\nimport { createErrorMiddleware, EMITTED_NOTIFICATIONS, logStreamDisconnectWarning, NOOP } from \"./utils\";\n\nSafeEventEmitter.defaultMaxListeners = 100;\n\n// resolve response.result, reject errors\nconst getRpcPromiseCallback =\n  (resolve, reject, unwrapResult = true) =>\n  (error, response) => {\n    if (error || response.error) {\n      return reject(error || response.error);\n    }\n    return !unwrapResult || Array.isArray(response) ? resolve(response) : resolve(response.result);\n  };\n\nclass TorusInpageProvider extends SafeEventEmitter {\n  protected static _defaultState: BaseProviderState = {\n    accounts: null,\n    isConnected: false,\n    isUnlocked: false,\n    initialized: false,\n    isPermanentlyDisconnected: false,\n    hasEmittedConnection: false,\n  };\n\n  /**\n   * The chain ID of the currently connected Ethereum chain.\n   * See [chainId.network]{@link https://chainid.network} for more information.\n   */\n  public chainId: string | null;\n\n  /**\n   * The user's currently selected Ethereum address.\n   * If null, MetaMask is either locked or the user has not permitted any\n   * addresses to be viewed.\n   */\n  public selectedAddress: string | null;\n\n  _rpcEngine: JRPCEngine;\n\n  public networkVersion: string | null;\n\n  shouldSendMetadata: boolean;\n\n  /**\n   * Indicating that this provider is a MetaMask provider.\n   */\n  public readonly isTorus: true;\n\n  _publicConfigStore: ObservableStore<PublicConfigState>;\n\n  tryPreopenHandle: (payload: UnvalidatedJsonRpcRequest | UnvalidatedJsonRpcRequest[], cb: (...args: unknown[]) => void) => void;\n\n  enable: () => Promise<string[]>;\n\n  protected _state: BaseProviderState;\n\n  protected _jsonRpcConnection: JsonRpcConnection;\n\n  protected _sentWarnings: SentWarningsState = {\n    // methods\n    enable: false,\n    experimentalMethods: false,\n    send: false,\n    publicConfigStore: false,\n    // events\n    events: {\n      close: false,\n      data: false,\n      networkChanged: false,\n      notification: false,\n    },\n  };\n\n  constructor(\n    connectionStream: Duplex,\n    { maxEventListeners = 100, shouldSendMetadata = true, jsonRpcStreamName = \"provider\" }: ProviderOptions = {}\n  ) {\n    super();\n    if (!isDuplexStream(connectionStream)) {\n      throw new Error(messages.errors.invalidDuplexStream());\n    }\n    this.isTorus = true;\n    this.setMaxListeners(maxEventListeners);\n\n    // private state\n    this._state = {\n      ...TorusInpageProvider._defaultState,\n    };\n\n    // public state\n    this.selectedAddress = null;\n    this.networkVersion = null;\n    this.chainId = null;\n    this.shouldSendMetadata = shouldSendMetadata;\n\n    // bind functions (to prevent e.g. web3@1.x from making unbound calls)\n    this._handleAccountsChanged = this._handleAccountsChanged.bind(this);\n    this._handleChainChanged = this._handleChainChanged.bind(this);\n    this._handleUnlockStateChanged = this._handleUnlockStateChanged.bind(this);\n    this._handleConnect = this._handleConnect.bind(this);\n    this._handleDisconnect = this._handleDisconnect.bind(this);\n    this._handleStreamDisconnect = this._handleStreamDisconnect.bind(this);\n    this._sendSync = this._sendSync.bind(this);\n    this._rpcRequest = this._rpcRequest.bind(this);\n    this._warnOfDeprecation = this._warnOfDeprecation.bind(this);\n    this._initializeState = this._initializeState.bind(this);\n\n    this.request = this.request.bind(this);\n    this.send = this.send.bind(this);\n    this.sendAsync = this.sendAsync.bind(this);\n    // this.enable = this.enable.bind(this);\n\n    // setup connectionStream multiplexing\n    const mux = new ObjectMultiplex();\n    pump(connectionStream, mux, connectionStream, this._handleStreamDisconnect.bind(this, \"MetaMask\"));\n\n    // subscribe to metamask public config (one-way)\n    this._publicConfigStore = new ObservableStore({ storageKey: \"Metamask-Config\" });\n\n    // handle isUnlocked changes, and chainChanged and networkChanged events\n    // this._publicConfigStore.subscribe((stringifiedState) => {\n    //   // This is because we are using store as string\n    //   const state = JSON.parse(stringifiedState as unknown as string);\n    //   if (\"isUnlocked\" in state && state.isUnlocked !== this._state.isUnlocked) {\n    //     this._state.isUnlocked = state.isUnlocked;\n    //     if (!this._state.isUnlocked) {\n    //       // accounts are never exposed when the extension is locked\n    //       this._handleAccountsChanged([]);\n    //     } else {\n    //       // this will get the exposed accounts, if any\n    //       try {\n    //         this._rpcRequest(\n    //           { method: \"eth_accounts\", params: [] },\n    //           NOOP,\n    //           true // indicating that eth_accounts _should_ update accounts\n    //         );\n    //       } catch (_) {\n    //         // Swallow error\n    //       }\n    //     }\n    //   }\n\n    //   if (\"selectedAddress\" in state && this.selectedAddress !== state.selectedAddress) {\n    //     try {\n    //       this._rpcRequest(\n    //         { method: \"eth_accounts\", params: [] },\n    //         NOOP,\n    //         true // indicating that eth_accounts _should_ update accounts\n    //       );\n    //     } catch (_) {\n    //       // Swallow error\n    //     }\n    //   }\n\n    //   // Emit chainChanged event on chain change\n    //   if (\"chainId\" in state && state.chainId !== this.chainId) {\n    //     this.chainId = state.chainId || null;\n    //     this.emit(\"chainChanged\", this.chainId);\n\n    //     // indicate that we've connected, for EIP-1193 compliance\n    //     // we do this here so that iframe can initialize\n    //     if (!this._state.hasEmittedConnection) {\n    //       this._handleConnect(this.chainId);\n    //       this._state.hasEmittedConnection = true;\n    //     }\n    //   }\n\n    //   // Emit networkChanged event on network change\n    //   if (\"networkVersion\" in state && state.networkVersion !== this.networkVersion) {\n    //     this.networkVersion = state.networkVersion || null;\n    //     this.emit(\"networkChanged\", this.networkVersion);\n    //   }\n    // });\n\n    pump(\n      mux.createStream(\"publicConfig\") as unknown as Duplex,\n      storeAsStream(this._publicConfigStore),\n      // RPC requests should still work if only this stream fails\n      logStreamDisconnectWarning.bind(this, \"MetaMask PublicConfigStore\")\n    );\n    // ignore phishing warning message (handled elsewhere)\n    mux.ignoreStream(\"phishing\");\n\n    // setup own event listeners\n\n    // EIP-1193 connect\n    this.on(\"connect\", () => {\n      this._state.isConnected = true;\n    });\n\n    // connect to async provider\n\n    const jsonRpcConnection = createStreamMiddleware();\n    pump(\n      jsonRpcConnection.stream,\n      mux.createStream(jsonRpcStreamName) as unknown as Duplex,\n      jsonRpcConnection.stream,\n      this._handleStreamDisconnect.bind(this, \"MetaMask RpcProvider\")\n    );\n\n    // handle RPC requests via dapp-side rpc engine\n    const rpcEngine = new JRPCEngine();\n    rpcEngine.push(createIdRemapMiddleware());\n    rpcEngine.push(createErrorMiddleware());\n    rpcEngine.push(jsonRpcConnection.middleware);\n    this._rpcEngine = rpcEngine;\n\n    // json rpc notification listener\n    jsonRpcConnection.events.on(\"notification\", (payload) => {\n      const { method, params } = payload;\n      if (method === \"wallet_accountsChanged\") {\n        this._handleAccountsChanged(params);\n      } else if (method === \"wallet_unlockStateChanged\") {\n        this._handleUnlockStateChanged(params);\n      } else if (method === \"wallet_chainChanged\") {\n        this._handleChainChanged(params);\n      } else if (EMITTED_NOTIFICATIONS.includes(payload.method)) {\n        // EIP 1193 subscriptions, per eth-json-rpc-filters/subscriptionManager\n        this.emit(\"data\", payload); // deprecated\n        this.emit(\"notification\", params.result);\n        this.emit(\"message\", {\n          type: method,\n          data: params,\n        });\n      }\n\n      // Backward compatibility for older non EIP 1193 subscriptions\n      // this.emit('data', null, payload)\n    });\n  }\n\n  get publicConfigStore(): ObservableStore<PublicConfigState> {\n    if (!this._sentWarnings.publicConfigStore) {\n      log.warn(messages.warnings.publicConfigStore);\n      this._sentWarnings.publicConfigStore = true;\n    }\n    return this._publicConfigStore;\n  }\n\n  /**\n   * Returns whether the inpage provider is connected to Torus.\n   */\n  isConnected(): boolean {\n    return this._state.isConnected;\n  }\n\n  /**\n   * Submits an RPC request for the given method, with the given params.\n   * Resolves with the result of the method call, or rejects on error.\n   *\n   * @param args - The RPC request arguments.\n   * @returns A Promise that resolves with the result of the RPC method,\n   * or rejects if an error is encountered.\n   */\n  async request<T>(args: RequestArguments): Promise<Maybe<T>> {\n    if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestArgs(),\n        data: args,\n      });\n    }\n\n    const { method, params } = args;\n\n    if (typeof method !== \"string\" || method.length === 0) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestMethod(),\n        data: args,\n      });\n    }\n\n    if (params !== undefined && !Array.isArray(params) && (typeof params !== \"object\" || params === null)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestParams(),\n        data: args,\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      this._rpcRequest({ method, params }, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n\n  /**\n   * Submits an RPC request per the given JSON-RPC request object.\n   *\n   * @param payload - The RPC request object.\n   * @param cb - The callback function.\n   */\n  sendAsync(payload: JRPCRequest<unknown>, callback: (error: Error | null, result?: JRPCResponse<unknown>) => void): void {\n    this._rpcRequest(payload, callback);\n  }\n\n  /**\n   * We override the following event methods so that we can warn consumers\n   * about deprecated events:\n   *   addListener, on, once, prependListener, prependOnceListener\n   */\n\n  addListener(eventName: string, listener: (...args: unknown[]) => void): this {\n    this._warnOfDeprecation(eventName);\n    return super.addListener(eventName, listener);\n  }\n\n  on(eventName: string, listener: (...args: unknown[]) => void): this {\n    this._warnOfDeprecation(eventName);\n    return super.on(eventName, listener);\n  }\n\n  once(eventName: string, listener: (...args: unknown[]) => void): this {\n    this._warnOfDeprecation(eventName);\n    return super.once(eventName, listener);\n  }\n\n  prependListener(eventName: string, listener: (...args: unknown[]) => void): this {\n    this._warnOfDeprecation(eventName);\n    return super.prependListener(eventName, listener);\n  }\n\n  prependOnceListener(eventName: string, listener: (...args: unknown[]) => void): this {\n    this._warnOfDeprecation(eventName);\n    return super.prependOnceListener(eventName, listener);\n  }\n\n  // Private Methods\n  //= ===================\n  /**\n   * Constructor helper.\n   * Populates initial state by calling 'wallet_getProviderState' and emits\n   * necessary events.\n   */\n  async _initializeState(): Promise<void> {\n    try {\n      const { accounts, chainId, isUnlocked, networkVersion } = (await this.request({\n        method: \"wallet_getProviderState\",\n      })) as WalletProviderState;\n\n      // indicate that we've connected, for EIP-1193 compliance\n      this.emit(\"connect\", { chainId });\n\n      this._handleChainChanged({ chainId, networkVersion });\n      this._handleUnlockStateChanged({ accounts, isUnlocked });\n      this._handleAccountsChanged(accounts);\n    } catch (error) {\n      log.error(\"MetaMask: Failed to get initial state. Please report this bug.\", error);\n    } finally {\n      log.info(\"initialized state\");\n      this._state.initialized = true;\n      this.emit(\"_initialized\");\n    }\n  }\n\n  /**\n   * Internal RPC method. Forwards requests to background via the RPC engine.\n   * Also remap ids inbound and outbound.\n   *\n   * @param payload - The RPC request object.\n   * @param callback - The consumer's callback.\n   * @param isInternal - false - Whether the request is internal.\n   */\n  _rpcRequest(payload: UnvalidatedJsonRpcRequest | UnvalidatedJsonRpcRequest[], callback: (...args: any[]) => void, isInternal = false): void {\n    let cb = callback;\n    const _payload = payload;\n    if (!Array.isArray(_payload)) {\n      if (!_payload.jsonrpc) {\n        _payload.jsonrpc = \"2.0\";\n      }\n\n      if (_payload.method === \"eth_accounts\" || _payload.method === \"eth_requestAccounts\") {\n        // handle accounts changing\n        cb = (err: Error, res: JRPCSuccess<string[]>) => {\n          this._handleAccountsChanged(res.result || [], _payload.method === \"eth_accounts\", isInternal);\n          callback(err, res);\n        };\n      } else if (_payload.method === \"wallet_getProviderState\") {\n        this._rpcEngine.handle(payload as JRPCRequest<unknown>, cb);\n        return;\n      }\n    }\n    this.tryPreopenHandle(_payload, cb);\n  }\n\n  /**\n   * Submits an RPC request for the given method, with the given params.\n   *\n   * @deprecated Use \"request\" instead.\n   * @param method - The method to request.\n   * @param params - Any params for the method.\n   * @returns A Promise that resolves with the JSON-RPC response object for the\n   * request.\n   */\n  send<T>(method: string, params?: T[]): Promise<JRPCResponse<T>>;\n\n  /**\n   * Submits an RPC request per the given JSON-RPC request object.\n   *\n   * @deprecated Use \"request\" instead.\n   * @param payload - A JSON-RPC request object.\n   * @param callback - An error-first callback that will receive the JSON-RPC\n   * response object.\n   */\n  send<T>(payload: JRPCRequest<unknown>, callback: (error: Error | null, result?: JRPCResponse<T>) => void): void;\n\n  /**\n   * Accepts a JSON-RPC request object, and synchronously returns the cached result\n   * for the given method. Only supports 4 specific RPC methods.\n   *\n   * @deprecated Use \"request\" instead.\n   * @param payload - A JSON-RPC request object.\n   * @returns A JSON-RPC response object.\n   */\n  send<T>(payload: SendSyncJsonRpcRequest): JRPCResponse<T>;\n\n  send(methodOrPayload: unknown, callbackOrArgs?: unknown): unknown {\n    if (!this._sentWarnings.send) {\n      log.warn(messages.warnings.sendDeprecation);\n      this._sentWarnings.send = true;\n    }\n    if (typeof methodOrPayload === \"string\" && (!callbackOrArgs || Array.isArray(callbackOrArgs))) {\n      return new Promise((resolve, reject) => {\n        try {\n          this._rpcRequest({ method: methodOrPayload, params: callbackOrArgs }, getRpcPromiseCallback(resolve, reject, false));\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n    if (methodOrPayload && typeof methodOrPayload === \"object\" && typeof callbackOrArgs === \"function\") {\n      return this._rpcRequest(methodOrPayload as JRPCRequest<unknown>, callbackOrArgs as (...args: unknown[]) => void);\n    }\n    return this._sendSync(methodOrPayload as SendSyncJsonRpcRequest);\n  }\n\n  /**\n   * DEPRECATED.\n   * Internal backwards compatibility method, used in send.\n   */\n  _sendSync(payload: SendSyncJsonRpcRequest): JRPCSuccess<unknown> {\n    let result;\n    switch (payload.method) {\n      case \"eth_accounts\":\n        result = this.selectedAddress ? [this.selectedAddress] : [];\n        break;\n\n      case \"eth_coinbase\":\n        result = this.selectedAddress || null;\n        break;\n\n      case \"eth_uninstallFilter\":\n        this._rpcRequest(payload, NOOP);\n        result = true;\n        break;\n\n      case \"net_version\":\n        result = this.networkVersion || null;\n        break;\n\n      default:\n        throw new Error(messages.errors.unsupportedSync(payload.method));\n    }\n\n    return {\n      id: payload.id,\n      jsonrpc: payload.jsonrpc,\n      result,\n    };\n  }\n\n  /**\n   * When the provider becomes connected, updates internal state and emits\n   * required events. Idempotent.\n   *\n   * @param chainId - The ID of the newly connected chain.\n   * emits MetaMaskInpageProvider#connect\n   */\n  protected _handleConnect(chainId: string): void {\n    if (!this._state.isConnected) {\n      this._state.isConnected = true;\n      this.emit(\"connect\", { chainId });\n      log.debug(messages.info.connected(chainId));\n    }\n  }\n\n  /**\n   * When the provider becomes disconnected, updates internal state and emits\n   * required events. Idempotent with respect to the isRecoverable parameter.\n   *\n   * Error codes per the CloseEvent status codes as required by EIP-1193:\n   * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n   *\n   * @param isRecoverable - Whether the disconnection is recoverable.\n   * @param errorMessage - A custom error message.\n   * emits MetaMaskInpageProvider#disconnect\n   */\n  protected _handleDisconnect(isRecoverable: boolean, errorMessage?: string): void {\n    if (this._state.isConnected || (!this._state.isPermanentlyDisconnected && !isRecoverable)) {\n      this._state.isConnected = false;\n\n      let error;\n      if (isRecoverable) {\n        error = new EthereumRpcError(\n          1013, // Try again later\n          errorMessage || messages.errors.disconnected()\n        );\n        log.debug(error);\n      } else {\n        error = new EthereumRpcError(\n          1011, // Internal error\n          errorMessage || messages.errors.permanentlyDisconnected()\n        );\n        log.error(error);\n        this.chainId = null;\n        this._state.accounts = null;\n        this.selectedAddress = null;\n        this._state.isUnlocked = false;\n        this._state.isPermanentlyDisconnected = true;\n      }\n\n      this.emit(\"disconnect\", error);\n    }\n  }\n\n  /**\n   * Called when connection is lost to critical streams.\n   *\n   * emits MetamaskInpageProvider#disconnect\n   */\n  protected _handleStreamDisconnect(streamName: string, error: Error): void {\n    logStreamDisconnectWarning(streamName, error, this);\n    this._handleDisconnect(false, error ? error.message : undefined);\n  }\n\n  /**\n   * Called when accounts may have changed.\n   */\n  protected _handleAccountsChanged(accounts: unknown[], isEthAccounts = false, isInternal = false): void {\n    // defensive programming\n    let finalAccounts = accounts;\n    if (!Array.isArray(finalAccounts)) {\n      log.error(\"MetaMask: Received non-array accounts parameter. Please report this bug.\", finalAccounts);\n      finalAccounts = [];\n    }\n\n    for (const account of accounts) {\n      if (typeof account !== \"string\") {\n        log.error(\"MetaMask: Received non-string account. Please report this bug.\", accounts);\n        finalAccounts = [];\n        break;\n      }\n    }\n\n    // emit accountsChanged if anything about the accounts array has changed\n    if (!dequal(this._state.accounts, finalAccounts)) {\n      // we should always have the correct accounts even before eth_accounts\n      // returns, except in cases where isInternal is true\n      if (isEthAccounts && Array.isArray(this._state.accounts) && this._state.accounts.length > 0 && !isInternal) {\n        log.error('MetaMask: \"eth_accounts\" unexpectedly updated accounts. Please report this bug.', finalAccounts);\n      }\n\n      this._state.accounts = finalAccounts as string[];\n      this.emit(\"accountsChanged\", finalAccounts);\n    }\n\n    // handle selectedAddress\n    if (this.selectedAddress !== finalAccounts[0]) {\n      this.selectedAddress = (finalAccounts[0] as string) || null;\n    }\n  }\n\n  /**\n   * Upon receipt of a new chainId and networkVersion, emits corresponding\n   * events and sets relevant public state.\n   * Does nothing if neither the chainId nor the networkVersion are different\n   * from existing values.\n   *\n   * emits MetamaskInpageProvider#chainChanged\n   * @param networkInfo - An object with network info.\n   */\n  protected _handleChainChanged({ chainId, networkVersion }: { chainId?: string; networkVersion?: string } = {}): void {\n    if (!chainId || !networkVersion) {\n      log.error(\"MetaMask: Received invalid network parameters. Please report this bug.\", { chainId, networkVersion });\n      return;\n    }\n\n    if (networkVersion === \"loading\") {\n      this._handleDisconnect(true);\n    } else {\n      this._handleConnect(chainId);\n\n      if (chainId !== this.chainId) {\n        this.chainId = chainId;\n        if (this._state.initialized) {\n          this.emit(\"chainChanged\", this.chainId);\n        }\n      }\n    }\n  }\n\n  /**\n   * Upon receipt of a new isUnlocked state, sets relevant public state.\n   * Calls the accounts changed handler with the received accounts, or an empty\n   * array.\n   *\n   * Does nothing if the received value is equal to the existing value.\n   * There are no lock/unlock events.\n   *\n   * @param opts - Options bag.\n   */\n  protected _handleUnlockStateChanged({ accounts, isUnlocked }: { accounts?: string[]; isUnlocked?: boolean } = {}): void {\n    if (typeof isUnlocked !== \"boolean\") {\n      log.error(\"MetaMask: Received invalid isUnlocked parameter. Please report this bug.\", { isUnlocked });\n      return;\n    }\n\n    if (isUnlocked !== this._state.isUnlocked) {\n      this._state.isUnlocked = isUnlocked;\n      this._handleAccountsChanged(accounts || []);\n    }\n  }\n\n  /**\n   * Warns of deprecation for the given event, if applicable.\n   */\n  protected _warnOfDeprecation(eventName: string): void {\n    if (this._sentWarnings.events[eventName] === false) {\n      log.warn(messages.warnings.events[eventName]);\n      this._sentWarnings.events[eventName] = true;\n    }\n  }\n}\n\nexport default TorusInpageProvider;\n", "import createHash from \"create-hash\";\n\nimport { IHashAlgorithmOptions, SRI } from \"./interfaces\";\n\nconst defaults = (options: IHashAlgorithmOptions) => ({\n  algorithms: options.algorithms || [\"sha256\"],\n  delimiter: options.delimiter || \" \",\n  full: options.full || false,\n});\n\n// Generate list of hashes\nconst hashes = (options: IHashAlgorithmOptions, data: string): Record<createHash.algorithm, string> => {\n  const internalHashes: Record<string, string> = {};\n  options.algorithms.forEach((algorithm) => {\n    internalHashes[algorithm] = createHash(algorithm).update(data, \"utf8\").digest(\"base64\");\n  });\n  return internalHashes;\n};\n// Build an integrity string\nconst integrity = (options: IHashAlgorithmOptions, sri: SRI): string => {\n  let output = \"\";\n\n  // Hash list\n  output += Object.keys(sri.hashes)\n    .map((algorithm: createHash.algorithm) => `${algorithm}-${sri.hashes[algorithm]}`)\n    .join(options.delimiter);\n\n  return output;\n};\n\nconst main = (options: IHashAlgorithmOptions, data: string): SRI | string => {\n  // Defaults\n  const finalOptions = defaults(options);\n\n  const sri = {\n    hashes: hashes(finalOptions, data),\n    integrity: undefined,\n  };\n  sri.integrity = integrity(finalOptions, sri);\n\n  return finalOptions.full ? sri : sri.integrity;\n};\n\nexport default main;\n", "import { EventEmitter } from \"events\";\n\nimport { getPopupFeatures } from \"./utils\";\n\nclass PopupHandler extends EventEmitter {\n  url: URL;\n\n  target: string;\n\n  features: string;\n\n  window: Window;\n\n  windowTimer: number;\n\n  iClosedWindow: boolean;\n\n  constructor({ url, target, features }: { url: URL; target?: string; features?: string }) {\n    super();\n    this.url = url;\n    this.target = target || \"_blank\";\n    this.features = features || getPopupFeatures();\n    this.window = undefined;\n    this.windowTimer = undefined;\n    this.iClosedWindow = false;\n    this._setupTimer();\n  }\n\n  _setupTimer(): void {\n    this.windowTimer = Number(\n      setInterval(() => {\n        if (this.window && this.window.closed) {\n          clearInterval(this.windowTimer);\n          if (!this.iClosedWindow) {\n            this.emit(\"close\");\n          }\n          this.iClosedWindow = false;\n          this.window = undefined;\n        }\n        if (this.window === undefined) clearInterval(this.windowTimer);\n      }, 500)\n    );\n  }\n\n  open(): void {\n    this.window = window.open(this.url.href, this.target, this.features);\n    if (this.window?.focus) this.window.focus();\n  }\n\n  close(): void {\n    this.iClosedWindow = true;\n    if (this.window) this.window.close();\n  }\n\n  redirect(locationReplaceOnRedirect: boolean): void {\n    if (locationReplaceOnRedirect) {\n      window.location.replace(this.url.href);\n    } else {\n      window.location.href = this.url.href;\n    }\n  }\n}\n\nexport default PopupHandler;\n", "import { JRPCEngine } from \"@toruslabs/openlogin-jrpc\";\n\nimport log from \"./loglevel\";\nimport messages from \"./messages\";\nimport { getPreopenInstanceId, NOOP } from \"./utils\";\n\n/**\n * Returns whether the given image URL exists\n * @param url - the url of the image\n * @returns - whether the image exists\n */\nfunction imgExists(url: string): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    try {\n      const img = document.createElement(\"img\");\n      img.onload = () => resolve(true);\n      img.onerror = () => resolve(false);\n      img.src = url;\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\n/**\n * Extracts a name for the site from the DOM\n */\nconst getSiteName = (window: Window) => {\n  const { document } = window;\n\n  const siteName = document.querySelector<HTMLMetaElement>('head > meta[property=\"og:site_name\"]');\n  if (siteName) {\n    return siteName.content;\n  }\n\n  const metaTitle = document.querySelector<HTMLMetaElement>('head > meta[name=\"title\"]');\n  if (metaTitle) {\n    return metaTitle.content;\n  }\n\n  if (document.title && document.title.length > 0) {\n    return document.title;\n  }\n\n  return window.location.hostname;\n};\n\n/**\n * Extracts an icon for the site from the DOM\n */\nasync function getSiteIcon(window: Window): Promise<string | null> {\n  const { document } = window;\n\n  // Use the site's favicon if it exists\n  let icon = document.querySelector<HTMLLinkElement>('head > link[rel=\"shortcut icon\"]');\n  if (icon && (await imgExists(icon.href))) {\n    return icon.href;\n  }\n\n  // Search through available icons in no particular order\n  icon = Array.from(document.querySelectorAll<HTMLLinkElement>('head > link[rel=\"icon\"]')).find((_icon) => Boolean(_icon.href));\n  if (icon && (await imgExists(icon.href))) {\n    return icon.href;\n  }\n\n  return null;\n}\n\n/**\n * Gets site metadata and returns it\n *\n */\nconst getSiteMetadata = async () => ({\n  name: getSiteName(window),\n  icon: await getSiteIcon(window),\n});\n\n/**\n * Sends site metadata over an RPC request.\n */\nexport default async function sendSiteMetadata(engine: JRPCEngine): Promise<void> {\n  try {\n    const domainMetadata = await getSiteMetadata();\n    // call engine.handle directly to avoid normal RPC request handling\n    engine.handle(\n      {\n        jsonrpc: \"2.0\",\n        id: getPreopenInstanceId(),\n        method: \"wallet_sendDomainMetadata\",\n        params: domainMetadata,\n      },\n      NOOP\n    );\n  } catch (error) {\n    log.error({\n      message: messages.errors.sendSiteMetadata(),\n      originalError: error,\n    });\n  }\n}\n", "import { get, setAPIKey } from \"@toruslabs/http-helpers\";\nimport { BasePostMessageStream, JRPCRequest, ObjectMultiplex, setupMultiplex, Substream } from \"@toruslabs/openlogin-jrpc\";\nimport deepmerge from \"lodash.merge\";\n\nimport configuration from \"./config\";\nimport { documentReady, handleStream, htmlToElement, runOnLoad } from \"./embedUtils\";\nimport TorusInpageProvider from \"./inpage-provider\";\nimport generateIntegrity from \"./integrity\";\nimport {\n  BUTTON_POSITION,\n  BUTTON_POSITION_TYPE,\n  EMBED_TRANSLATION_ITEM,\n  LOGIN_PROVIDER,\n  NetworkInterface,\n  PAYMENT_PROVIDER_TYPE,\n  PaymentParams,\n  TORUS_BUILD_ENV,\n  TorusCtorArgs,\n  TorusLoginParams,\n  TorusParams,\n  TorusPublicKey,\n  UnvalidatedJsonRpcRequest,\n  UserInfo,\n  VerifierArgs,\n  WALLET_OPENLOGIN_VERIFIER_MAP,\n  WALLET_PATH,\n  WhiteLabelParams,\n} from \"./interfaces\";\nimport log from \"./loglevel\";\nimport PopupHandler from \"./PopupHandler\";\nimport sendSiteMetadata from \"./siteMetadata\";\nimport {\n  FEATURES_CONFIRM_WINDOW,\n  FEATURES_DEFAULT_WALLET_WINDOW,\n  FEATURES_PROVIDER_CHANGE_WINDOW,\n  getPreopenInstanceId,\n  getTorusUrl,\n  getUserLanguage,\n  validatePaymentProvider,\n} from \"./utils\";\n\nconst defaultVerifiers = {\n  [LOGIN_PROVIDER.GOOGLE]: true,\n  [LOGIN_PROVIDER.FACEBOOK]: true,\n  [LOGIN_PROVIDER.REDDIT]: true,\n  [LOGIN_PROVIDER.TWITCH]: true,\n  [LOGIN_PROVIDER.DISCORD]: true,\n};\n\nconst iframeIntegrity = \"sha384-QwEWmiPwBSE0zoVFrfYw+zFNBRwBhOo6NucsqlJnGOqpUEVaRo1UOMrAKDykq2WP\";\n\nconst expectedCacheControlHeader = \"max-age=3600\";\n\nconst UNSAFE_METHODS = [\n  \"eth_sendTransaction\",\n  \"eth_signTypedData\",\n  \"eth_signTypedData_v3\",\n  \"eth_signTypedData_v4\",\n  \"personal_sign\",\n  \"eth_getEncryptionPublicKey\",\n  \"eth_decrypt\",\n  \"wallet_addEthereumChain\",\n  \"wallet_switchEthereumChain\",\n];\n\n// preload for iframe doesn't work https://bugs.chromium.org/p/chromium/issues/detail?id=593267\n(async function preLoadIframe() {\n  try {\n    if (typeof document === \"undefined\") return;\n    const torusIframeHtml = document.createElement(\"link\");\n    const { torusUrl } = await getTorusUrl(\"production\", { check: false, hash: iframeIntegrity, version: \"\" });\n    torusIframeHtml.href = `${torusUrl}/popup`;\n    torusIframeHtml.crossOrigin = \"anonymous\";\n    torusIframeHtml.type = \"text/html\";\n    torusIframeHtml.rel = \"prefetch\";\n    if (torusIframeHtml.relList && torusIframeHtml.relList.supports) {\n      if (torusIframeHtml.relList.supports(\"prefetch\")) {\n        document.head.appendChild(torusIframeHtml);\n      }\n    }\n  } catch (error) {\n    log.warn(error);\n  }\n})();\n\nclass Torus {\n  buttonPosition: BUTTON_POSITION_TYPE = BUTTON_POSITION.BOTTOM_LEFT;\n\n  buttonSize: number;\n\n  torusUrl: string;\n\n  torusIframe: HTMLIFrameElement;\n\n  styleLink: HTMLLinkElement;\n\n  isLoggedIn: boolean;\n\n  isInitialized: boolean;\n\n  torusWidgetVisibility: boolean;\n\n  torusAlert: HTMLDivElement;\n\n  apiKey: string;\n\n  modalZIndex: number;\n\n  alertZIndex: number;\n\n  torusAlertContainer: HTMLDivElement;\n\n  isIframeFullScreen: boolean;\n\n  whiteLabel: WhiteLabelParams;\n\n  requestedVerifier: string;\n\n  currentVerifier: string;\n\n  embedTranslations: EMBED_TRANSLATION_ITEM;\n\n  ethereum: TorusInpageProvider;\n\n  provider: TorusInpageProvider;\n\n  communicationMux: ObjectMultiplex;\n\n  isLoginCallback: () => void;\n\n  paymentProviders = configuration.paymentProviders;\n\n  private loginHint = \"\";\n\n  private useWalletConnect: boolean;\n\n  private isCustomLogin = false;\n\n  constructor({ buttonPosition = BUTTON_POSITION.BOTTOM_LEFT, buttonSize = 56, modalZIndex = 99999, apiKey = \"torus-default\" }: TorusCtorArgs = {}) {\n    this.buttonPosition = buttonPosition;\n    this.buttonSize = buttonSize;\n    this.torusUrl = \"\";\n    this.isLoggedIn = false; // ethereum.enable working\n    this.isInitialized = false; // init done\n    this.torusWidgetVisibility = true;\n    this.requestedVerifier = \"\";\n    this.currentVerifier = \"\";\n    // this.nodeDetailManager = new NodeDetailManager();\n    // this.torusJs = new TorusJs({\n    //   metadataHost: \"https://metadata.tor.us\",\n    //   allowHost: \"https://signer.tor.us/api/allow\",\n    //   network: \"mainnet\",\n    // });\n    this.apiKey = apiKey;\n    setAPIKey(apiKey);\n    this.modalZIndex = modalZIndex;\n    this.alertZIndex = modalZIndex + 1000;\n    this.isIframeFullScreen = false;\n  }\n\n  async init({\n    buildEnv = TORUS_BUILD_ENV.PRODUCTION,\n    enableLogging = false,\n    // deprecated: use loginConfig instead\n    enabledVerifiers = defaultVerifiers,\n    network = {\n      host: \"mainnet\",\n      chainId: null,\n      networkName: \"\",\n      blockExplorer: \"\",\n      ticker: \"\",\n      tickerName: \"\",\n    },\n    loginConfig = {},\n    showTorusButton = true,\n    integrity = {\n      check: false,\n      hash: iframeIntegrity,\n      version: \"\",\n    },\n    whiteLabel,\n    skipTKey = false,\n    useWalletConnect = false,\n    mfaLevel = \"default\",\n  }: TorusParams = {}): Promise<void> {\n    if (this.isInitialized) throw new Error(\"Already initialized\");\n    const { torusUrl, logLevel } = await getTorusUrl(buildEnv, integrity);\n    log.info(torusUrl, \"url loaded\");\n    this.torusUrl = torusUrl;\n    this.whiteLabel = whiteLabel;\n    this.useWalletConnect = useWalletConnect;\n    this.isCustomLogin = !!(loginConfig && Object.keys(loginConfig).length > 0) || !!(whiteLabel && Object.keys(whiteLabel).length > 0);\n\n    log.setDefaultLevel(logLevel);\n    if (enableLogging) log.enableAll();\n    else log.disableAll();\n    this.torusWidgetVisibility = showTorusButton;\n    const torusIframeUrl = new URL(torusUrl);\n    if (torusIframeUrl.pathname.endsWith(\"/\")) torusIframeUrl.pathname += \"popup\";\n    else torusIframeUrl.pathname += \"/popup\";\n\n    torusIframeUrl.hash = `#isCustomLogin=${this.isCustomLogin}`;\n\n    // Iframe code\n    this.torusIframe = htmlToElement<HTMLIFrameElement>(\n      `<iframe\n        id=\"torusIframe\"\n        allow=${useWalletConnect ? \"camera\" : \"\"}\n        class=\"torusIframe\"\n        src=\"${torusIframeUrl.href}\"\n        style=\"display: none; position: fixed; top: 0; right: 0; width: 100%; color-scheme: none;\n        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex}\"\n      ></iframe>`\n    );\n\n    this.torusAlertContainer = htmlToElement<HTMLDivElement>('<div id=\"torusAlertContainer\"></div>');\n    this.torusAlertContainer.style.display = \"none\";\n    this.torusAlertContainer.style.setProperty(\"z-index\", this.alertZIndex.toString());\n\n    const link = window.document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    link.setAttribute(\"type\", \"text/css\");\n    link.setAttribute(\"href\", `${torusUrl}/css/widget.css`);\n    this.styleLink = link;\n\n    const { defaultLanguage = getUserLanguage(), customTranslations = {} } = this.whiteLabel || {};\n    const mergedTranslations = deepmerge(configuration.translations, customTranslations);\n    const languageTranslations = mergedTranslations[defaultLanguage] || configuration.translations[getUserLanguage()];\n    this.embedTranslations = languageTranslations.embed;\n\n    const handleSetup = async () => {\n      await documentReady();\n      return new Promise((resolve, reject) => {\n        this.torusIframe.onload = async () => {\n          // only do this if iframe is not full screen\n          this._setupWeb3();\n          const initStream = this.communicationMux.getStream(\"init_stream\") as Substream;\n          initStream.on(\"data\", (chunk) => {\n            const { name, data, error } = chunk;\n            if (name === \"init_complete\" && data.success) {\n              // resolve promise\n              this.isInitialized = true;\n              this._displayIframe(this.isIframeFullScreen);\n              resolve(undefined);\n            } else if (error) {\n              reject(new Error(error));\n            }\n          });\n          initStream.write({\n            name: \"init_stream\",\n            data: {\n              enabledVerifiers,\n              loginConfig,\n              whiteLabel: this.whiteLabel,\n              buttonPosition: this.buttonPosition,\n              buttonSize: this.buttonSize,\n              torusWidgetVisibility: this.torusWidgetVisibility,\n              apiKey: this.apiKey,\n              skipTKey,\n              network,\n              mfaLevel,\n            },\n          });\n        };\n        window.document.head.appendChild(this.styleLink);\n        window.document.body.appendChild(this.torusIframe);\n        window.document.body.appendChild(this.torusAlertContainer);\n      });\n    };\n\n    if (buildEnv === \"production\" && integrity.check) {\n      // hacky solution to check for iframe integrity\n      const fetchUrl = `${torusUrl}/popup`;\n      const resp = await fetch(fetchUrl, { cache: \"reload\" });\n      if (resp.headers.get(\"Cache-Control\") !== expectedCacheControlHeader) {\n        throw new Error(`Unexpected Cache-Control headers, got ${resp.headers.get(\"Cache-Control\")}`);\n      }\n      const response = await resp.text();\n      const calculatedIntegrity = generateIntegrity(\n        {\n          algorithms: [\"sha384\"],\n        },\n        response\n      );\n      log.info(calculatedIntegrity, \"integrity\");\n      if (calculatedIntegrity === integrity.hash) {\n        await handleSetup();\n      } else {\n        this.clearInit();\n        throw new Error(\"Integrity check failed\");\n      }\n    } else {\n      await handleSetup();\n    }\n    return undefined;\n  }\n\n  login({ verifier = \"\", login_hint: loginHint = \"\" }: TorusLoginParams = {}): Promise<string[]> {\n    if (!this.isInitialized) throw new Error(\"Call init() first\");\n    this.requestedVerifier = verifier;\n    this.loginHint = loginHint;\n    return this.ethereum.enable();\n  }\n\n  logout(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (!this.isLoggedIn) {\n        reject(new Error(\"User has not logged in yet\"));\n        return;\n      }\n\n      const logOutStream = this.communicationMux.getStream(\"logout\") as Substream;\n      logOutStream.write({ name: \"logOut\" });\n      const statusStream = this.communicationMux.getStream(\"status\") as Substream;\n      const statusStreamHandler = (status) => {\n        if (!status.loggedIn) {\n          this.isLoggedIn = false;\n          this.currentVerifier = \"\";\n          this.requestedVerifier = \"\";\n          resolve();\n        } else reject(new Error(\"Some Error Occured\"));\n      };\n      handleStream(statusStream, \"data\", statusStreamHandler);\n    });\n  }\n\n  async cleanUp(): Promise<void> {\n    if (this.isLoggedIn) {\n      await this.logout();\n    }\n    this.clearInit();\n  }\n\n  clearInit(): void {\n    function isElement(element: unknown) {\n      return element instanceof Element || element instanceof HTMLDocument;\n    }\n    if (isElement(this.styleLink) && window.document.body.contains(this.styleLink)) {\n      this.styleLink.remove();\n      this.styleLink = undefined;\n    }\n    if (isElement(this.torusIframe) && window.document.body.contains(this.torusIframe)) {\n      this.torusIframe.remove();\n      this.torusIframe = undefined;\n    }\n    if (isElement(this.torusAlertContainer) && window.document.body.contains(this.torusAlertContainer)) {\n      this.torusAlert = undefined;\n      this.torusAlertContainer.remove();\n      this.torusAlertContainer = undefined;\n    }\n    this.isInitialized = false;\n  }\n\n  hideTorusButton(): void {\n    this.torusWidgetVisibility = false;\n    this._sendWidgetVisibilityStatus(false);\n    this._displayIframe();\n  }\n\n  showTorusButton(): void {\n    this.torusWidgetVisibility = true;\n    this._sendWidgetVisibilityStatus(true);\n    this._displayIframe();\n  }\n\n  setProvider({ host = \"mainnet\", chainId = null, networkName = \"\", ...rest }: NetworkInterface): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const providerChangeStream = this.communicationMux.getStream(\"provider_change\") as Substream;\n      const handler = (chunk) => {\n        const { err, success } = chunk.data;\n        log.info(chunk);\n        if (err) {\n          reject(err);\n        } else if (success) {\n          resolve();\n        } else reject(new Error(\"some error occured\"));\n      };\n      handleStream(providerChangeStream, \"data\", handler);\n      const preopenInstanceId = getPreopenInstanceId();\n      this._handleWindow(preopenInstanceId, {\n        target: \"_blank\",\n        features: FEATURES_PROVIDER_CHANGE_WINDOW,\n      });\n      providerChangeStream.write({\n        name: \"show_provider_change\",\n        data: {\n          network: {\n            host,\n            chainId,\n            networkName,\n            ...rest,\n          },\n          preopenInstanceId,\n          override: false,\n        },\n      });\n    });\n  }\n\n  showWallet(path: WALLET_PATH, params: Record<string, string> = {}): void {\n    const showWalletStream = this.communicationMux.getStream(\"show_wallet\") as Substream;\n    const finalPath = path ? `/${path}` : \"\";\n    showWalletStream.write({ name: \"show_wallet\", data: { path: finalPath } });\n\n    const showWalletHandler = (chunk) => {\n      if (chunk.name === \"show_wallet_instance\") {\n        // Let the error propogate up (hence, no try catch)\n        const { instanceId } = chunk.data;\n        const finalUrl = new URL(`${this.torusUrl}/wallet${finalPath}`);\n        // Using URL constructor to prevent js injection and allow parameter validation.!\n        finalUrl.searchParams.append(\"integrity\", \"true\");\n        finalUrl.searchParams.append(\"instanceId\", instanceId);\n        Object.keys(params).forEach((x) => {\n          finalUrl.searchParams.append(x, params[x]);\n        });\n        finalUrl.hash = `#isCustomLogin=${this.isCustomLogin}`;\n\n        const walletWindow = new PopupHandler({ url: finalUrl, features: FEATURES_DEFAULT_WALLET_WINDOW });\n        walletWindow.open();\n      }\n    };\n\n    handleStream(showWalletStream, \"data\", showWalletHandler);\n  }\n\n  async getPublicAddress({ verifier, verifierId, isExtended = false }: VerifierArgs): Promise<string | TorusPublicKey> {\n    if (!configuration.supportedVerifierList.includes(verifier) || !WALLET_OPENLOGIN_VERIFIER_MAP[verifier]) throw new Error(\"Unsupported verifier\");\n    const walletVerifier = verifier;\n    const openloginVerifier = WALLET_OPENLOGIN_VERIFIER_MAP[verifier];\n    const url = new URL(`https://api.tor.us/lookup/torus`);\n    url.searchParams.append(\"verifier\", openloginVerifier);\n    url.searchParams.append(\"verifierId\", verifierId);\n    url.searchParams.append(\"walletVerifier\", walletVerifier);\n    url.searchParams.append(\"network\", \"mainnet\");\n    url.searchParams.append(\"isExtended\", isExtended.toString());\n    return get(\n      url.href,\n      {\n        headers: {\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n      },\n      { useAPIKey: true }\n    );\n  }\n\n  getUserInfo(message: string): Promise<UserInfo> {\n    return new Promise((resolve, reject) => {\n      if (this.isLoggedIn) {\n        const userInfoAccessStream = this.communicationMux.getStream(\"user_info_access\") as Substream;\n        userInfoAccessStream.write({ name: \"user_info_access_request\" });\n        const userInfoAccessHandler = (chunk) => {\n          const {\n            name,\n            data: { approved, payload, rejected, newRequest },\n          } = chunk;\n          if (name === \"user_info_access_response\") {\n            if (approved) {\n              resolve(payload);\n            } else if (rejected) {\n              reject(new Error(\"User rejected the request\"));\n            } else if (newRequest) {\n              const userInfoStream = this.communicationMux.getStream(\"user_info\") as Substream;\n              const userInfoHandler = (handlerChunk) => {\n                if (handlerChunk.name === \"user_info_response\") {\n                  if (handlerChunk.data.approved) {\n                    resolve(handlerChunk.data.payload);\n                  } else {\n                    reject(new Error(\"User rejected the request\"));\n                  }\n                }\n              };\n              handleStream(userInfoStream, \"data\", userInfoHandler);\n              const preopenInstanceId = getPreopenInstanceId();\n              this._handleWindow(preopenInstanceId, {\n                target: \"_blank\",\n                features: FEATURES_PROVIDER_CHANGE_WINDOW,\n              });\n              userInfoStream.write({ name: \"user_info_request\", data: { message, preopenInstanceId } });\n            }\n          }\n        };\n        handleStream(userInfoAccessStream, \"data\", userInfoAccessHandler);\n      } else reject(new Error(\"User has not logged in yet\"));\n    });\n  }\n\n  initiateTopup(provider: PAYMENT_PROVIDER_TYPE, params: PaymentParams): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      if (this.isInitialized) {\n        const { errors, isValid } = validatePaymentProvider(provider, params);\n        if (!isValid) {\n          reject(new Error(JSON.stringify(errors)));\n          return;\n        }\n        const topupStream = this.communicationMux.getStream(\"topup\") as Substream;\n        const topupHandler = (chunk) => {\n          if (chunk.name === \"topup_response\") {\n            if (chunk.data.success) {\n              resolve(chunk.data.success);\n            } else {\n              reject(new Error(chunk.data.error));\n            }\n          }\n        };\n        handleStream(topupStream, \"data\", topupHandler);\n        const preopenInstanceId = getPreopenInstanceId();\n        this._handleWindow(preopenInstanceId);\n        topupStream.write({ name: \"topup_request\", data: { provider, params, preopenInstanceId } });\n      } else reject(new Error(\"Torus is not initialized yet\"));\n    });\n  }\n\n  async loginWithPrivateKey(loginParams: { privateKey: string; userInfo: Omit<UserInfo, \"isNewUser\"> }): Promise<void> {\n    const { privateKey, userInfo } = loginParams;\n    return new Promise((resolve, reject) => {\n      if (this.isInitialized) {\n        if (Buffer.from(privateKey, \"hex\").length !== 32) {\n          reject(new Error(\"Invalid private key, Please provide a 32 byte valid secp25k1 private key\"));\n          return;\n        }\n        const loginPrivKeyStream = this.communicationMux.getStream(\"login_with_private_key\") as Substream;\n        const loginHandler = (chunk) => {\n          if (chunk.name === \"login_with_private_key_response\") {\n            if (chunk.data.success) {\n              resolve(chunk.data.success);\n            } else {\n              reject(new Error(chunk.data.error));\n            }\n          }\n        };\n        handleStream(loginPrivKeyStream, \"data\", loginHandler);\n        loginPrivKeyStream.write({ name: \"login_with_private_key_request\", data: { privateKey, userInfo } });\n      } else reject(new Error(\"Torus is not initialized yet\"));\n    });\n  }\n\n  async showWalletConnectScanner(): Promise<void> {\n    if (!this.useWalletConnect) throw new Error(\"Set `useWalletConnect` as true in init function options to use wallet connect scanner\");\n    return new Promise((resolve, reject) => {\n      if (this.isLoggedIn) {\n        const walletConnectStream = this.communicationMux.getStream(\"wallet_connect_stream\") as Substream;\n        const walletConnectHandler = (chunk) => {\n          if (chunk.name === \"wallet_connect_stream_res\") {\n            if (chunk.data.success) {\n              resolve(chunk.data.success);\n            } else {\n              reject(new Error(chunk.data.error));\n            }\n            this._displayIframe();\n          }\n        };\n        handleStream(walletConnectStream, \"data\", walletConnectHandler);\n        walletConnectStream.write({ name: \"wallet_connect_stream_req\" });\n        this._displayIframe(true);\n      } else reject(new Error(\"User has not logged in yet\"));\n    });\n  }\n\n  protected _handleWindow(preopenInstanceId: string, { url, target, features }: { url?: string; target?: string; features?: string } = {}): void {\n    if (preopenInstanceId) {\n      const windowStream = this.communicationMux.getStream(\"window\") as Substream;\n      const finalUrl = new URL(url || `${this.torusUrl}/redirect?preopenInstanceId=${preopenInstanceId}`);\n      if (finalUrl.hash) finalUrl.hash += `&isCustomLogin=${this.isCustomLogin}`;\n      else finalUrl.hash = `#isCustomLogin=${this.isCustomLogin}`;\n\n      const handledWindow = new PopupHandler({ url: finalUrl, target, features });\n      handledWindow.open();\n      if (!handledWindow.window) {\n        this._createPopupBlockAlert(preopenInstanceId, finalUrl.href);\n        return;\n      }\n      windowStream.write({\n        name: \"opened_window\",\n        data: {\n          preopenInstanceId,\n        },\n      });\n      const closeHandler = ({ preopenInstanceId: receivedId, close }) => {\n        if (receivedId === preopenInstanceId && close) {\n          handledWindow.close();\n          windowStream.removeListener(\"data\", closeHandler);\n        }\n      };\n      windowStream.on(\"data\", closeHandler);\n      handledWindow.once(\"close\", () => {\n        windowStream.write({\n          data: {\n            preopenInstanceId,\n            closed: true,\n          },\n        });\n        windowStream.removeListener(\"data\", closeHandler);\n      });\n    }\n  }\n\n  protected _setEmbedWhiteLabel(element: HTMLElement): void {\n    // Set whitelabel\n    const { theme } = this.whiteLabel || {};\n    if (theme) {\n      const { isDark = false, colors = {} } = theme;\n      if (isDark) element.classList.add(\"torus-dark\");\n\n      if (colors.torusBrand1) element.style.setProperty(\"--torus-brand-1\", colors.torusBrand1);\n      if (colors.torusGray2) element.style.setProperty(\"--torus-gray-2\", colors.torusGray2);\n    }\n  }\n\n  protected _getLogoUrl(): string {\n    let logoUrl = `${this.torusUrl}/images/torus_icon-blue.svg`;\n    if (this.whiteLabel?.theme?.isDark) {\n      logoUrl = this.whiteLabel?.logoLight || logoUrl;\n    } else {\n      logoUrl = this.whiteLabel?.logoDark || logoUrl;\n    }\n\n    return logoUrl;\n  }\n\n  protected _sendWidgetVisibilityStatus(status: boolean): void {\n    const torusWidgetVisibilityStream = this.communicationMux.getStream(\"torus-widget-visibility\") as Substream;\n    torusWidgetVisibilityStream.write({\n      data: status,\n    });\n  }\n\n  protected _displayIframe(isFull = false): void {\n    const style: Partial<CSSStyleDeclaration> = {};\n    const size = this.buttonSize + 14; // 15px padding\n    // set phase\n    if (!isFull) {\n      style.display = this.torusWidgetVisibility ? \"block\" : \"none\";\n      style.height = `${size}px`;\n      style.width = `${size}px`;\n      switch (this.buttonPosition) {\n        case BUTTON_POSITION.TOP_LEFT:\n          style.top = \"0px\";\n          style.left = \"0px\";\n          style.right = \"auto\";\n          style.bottom = \"auto\";\n          break;\n        case BUTTON_POSITION.TOP_RIGHT:\n          style.top = \"0px\";\n          style.right = \"0px\";\n          style.left = \"auto\";\n          style.bottom = \"auto\";\n          break;\n        case BUTTON_POSITION.BOTTOM_RIGHT:\n          style.bottom = \"0px\";\n          style.right = \"0px\";\n          style.top = \"auto\";\n          style.left = \"auto\";\n          break;\n        case BUTTON_POSITION.BOTTOM_LEFT:\n        default:\n          style.bottom = \"0px\";\n          style.left = \"0px\";\n          style.top = \"auto\";\n          style.right = \"auto\";\n          break;\n      }\n    } else {\n      style.display = \"block\";\n      style.width = \"100%\";\n      style.height = \"100%\";\n      style.top = \"0px\";\n      style.right = \"0px\";\n      style.left = \"0px\";\n      style.bottom = \"0px\";\n    }\n    Object.assign(this.torusIframe.style, style);\n    this.isIframeFullScreen = isFull;\n  }\n\n  protected _setupWeb3(): void {\n    log.info(\"setupWeb3 running\");\n    // setup background connection\n    const metamaskStream = new BasePostMessageStream({\n      name: \"embed_metamask\",\n      target: \"iframe_metamask\",\n      targetWindow: this.torusIframe.contentWindow,\n      targetOrigin: new URL(this.torusUrl).origin,\n    });\n\n    // Due to compatibility reasons, we should not set up multiplexing on window.metamaskstream\n    // because the MetamaskInpageProvider also attempts to do so.\n    // We create another LocalMessageDuplexStream for communication between dapp <> iframe\n    const communicationStream = new BasePostMessageStream({\n      name: \"embed_comm\",\n      target: \"iframe_comm\",\n      targetWindow: this.torusIframe.contentWindow,\n      targetOrigin: new URL(this.torusUrl).origin,\n    });\n\n    // Backward compatibility with Gotchi :)\n    // window.metamaskStream = this.communicationStream\n\n    // compose the inpage provider\n    const inpageProvider = new TorusInpageProvider(metamaskStream);\n\n    // detect eth_requestAccounts and pipe to enable for now\n    const detectAccountRequestPrototypeModifier = (m) => {\n      const originalMethod = inpageProvider[m];\n      inpageProvider[m] = function providerFunc(method, ...args) {\n        if (method && method === \"eth_requestAccounts\") {\n          return inpageProvider.enable();\n        }\n        return originalMethod.apply(this, [method, ...args]);\n      };\n    };\n\n    detectAccountRequestPrototypeModifier(\"send\");\n    detectAccountRequestPrototypeModifier(\"sendAsync\");\n\n    inpageProvider.enable = () => {\n      return new Promise((resolve, reject) => {\n        // If user is already logged in, we assume they have given access to the website\n        inpageProvider.sendAsync({ jsonrpc: \"2.0\", id: getPreopenInstanceId(), method: \"eth_requestAccounts\", params: [] }, (err, response) => {\n          const { result: res } = (response as { result: unknown }) || {};\n          if (err) {\n            setTimeout(() => {\n              reject(err);\n            }, 50);\n          } else if (Array.isArray(res) && res.length > 0) {\n            // If user is already rehydrated, resolve this\n            // else wait for something to be written to status stream\n            const handleLoginCb = () => {\n              if (this.requestedVerifier !== \"\" && this.currentVerifier !== this.requestedVerifier) {\n                const { requestedVerifier } = this;\n                // eslint-disable-next-line promise/no-promise-in-callback\n                this.logout()\n                  // eslint-disable-next-line promise/always-return\n                  .then((_) => {\n                    this.requestedVerifier = requestedVerifier;\n                    this._showLoginPopup(true, resolve, reject);\n                  })\n                  .catch((error) => reject(error));\n              } else {\n                resolve(res);\n              }\n            };\n            if (this.isLoggedIn) {\n              handleLoginCb();\n            } else {\n              this.isLoginCallback = handleLoginCb;\n            }\n          } else {\n            // set up listener for login\n            this._showLoginPopup(true, resolve, reject);\n          }\n        });\n      });\n    };\n\n    inpageProvider.tryPreopenHandle = (payload: UnvalidatedJsonRpcRequest | UnvalidatedJsonRpcRequest[], cb: (...args: unknown[]) => void) => {\n      const _payload = payload;\n      if (!Array.isArray(_payload) && UNSAFE_METHODS.includes(_payload.method)) {\n        const preopenInstanceId = getPreopenInstanceId();\n        this._handleWindow(preopenInstanceId, {\n          target: \"_blank\",\n          features: FEATURES_CONFIRM_WINDOW,\n        });\n        _payload.preopenInstanceId = preopenInstanceId;\n      }\n      inpageProvider._rpcEngine.handle(_payload as JRPCRequest<unknown>[], cb);\n    };\n\n    // Work around for web3@1.0 deleting the bound `sendAsync` but not the unbound\n    // `sendAsync` method on the prototype, causing `this` reference issues with drizzle\n    const proxiedInpageProvider = new Proxy(inpageProvider, {\n      // straight up lie that we deleted the property so that it doesnt\n      // throw an error in strict mode\n      deleteProperty: () => true,\n    });\n\n    this.ethereum = proxiedInpageProvider;\n    const communicationMux = setupMultiplex(communicationStream);\n\n    this.communicationMux = communicationMux;\n\n    const windowStream = communicationMux.getStream(\"window\") as Substream;\n    windowStream.on(\"data\", (chunk) => {\n      if (chunk.name === \"create_window\") {\n        // url is the url we need to open\n        // we can pass the final url upfront so that it removes the step of redirecting to /redirect and waiting for finalUrl\n        this._createPopupBlockAlert(chunk.data.preopenInstanceId, chunk.data.url);\n      }\n    });\n\n    // show torus widget if button clicked\n    const widgetStream = communicationMux.getStream(\"widget\") as Substream;\n    widgetStream.on(\"data\", (chunk) => {\n      const { data } = chunk;\n      this._displayIframe(data);\n    });\n\n    // Show torus button if wallet has been hydrated/detected\n    const statusStream = communicationMux.getStream(\"status\") as Substream;\n    statusStream.on(\"data\", (status) => {\n      // login\n      if (status.loggedIn) {\n        this.isLoggedIn = status.loggedIn;\n        this.currentVerifier = status.verifier;\n      } // logout\n      else this._displayIframe();\n      if (this.isLoginCallback) {\n        this.isLoginCallback();\n        delete this.isLoginCallback;\n      }\n    });\n\n    this.provider = proxiedInpageProvider;\n\n    if (this.provider.shouldSendMetadata) sendSiteMetadata(this.provider._rpcEngine);\n    inpageProvider._initializeState();\n    log.debug(\"Torus - injected provider\");\n  }\n\n  protected _showLoginPopup(calledFromEmbed: boolean, resolve: (a: string[]) => void, reject: (err: Error) => void): void {\n    const loginHandler = (data) => {\n      const { err, selectedAddress } = data;\n      if (err) {\n        log.error(err);\n        if (reject) reject(err);\n      }\n      // returns an array (cause accounts expects it)\n      else if (resolve) resolve([selectedAddress]);\n      if (this.isIframeFullScreen) this._displayIframe();\n    };\n    const oauthStream = this.communicationMux.getStream(\"oauth\") as Substream;\n    if (!this.requestedVerifier) {\n      this._displayIframe(true);\n      handleStream(oauthStream, \"data\", loginHandler);\n      oauthStream.write({ name: \"oauth_modal\", data: { calledFromEmbed } });\n    } else {\n      handleStream(oauthStream, \"data\", loginHandler);\n      const preopenInstanceId = getPreopenInstanceId();\n      this._handleWindow(preopenInstanceId);\n      oauthStream.write({\n        name: \"oauth\",\n        data: { calledFromEmbed, verifier: this.requestedVerifier, preopenInstanceId, login_hint: this.loginHint },\n      });\n    }\n  }\n\n  protected _createPopupBlockAlert(preopenInstanceId: string, url: string): void {\n    const logoUrl = this._getLogoUrl();\n    const torusAlert = htmlToElement<HTMLDivElement>(\n      '<div id=\"torusAlert\" class=\"torus-alert--v2\">' +\n        `<div id=\"torusAlert__logo\"><img src=\"${logoUrl}\" /></div>` +\n        \"<div>\" +\n        `<h1 id=\"torusAlert__title\">${this.embedTranslations.actionRequired}</h1>` +\n        `<p id=\"torusAlert__desc\">${this.embedTranslations.pendingAction}</p>` +\n        \"</div>\" +\n        \"</div>\"\n    );\n\n    const successAlert = htmlToElement(`<div><a id=\"torusAlert__btn\">${this.embedTranslations.continue}</a></div>`);\n    const btnContainer = htmlToElement('<div id=\"torusAlert__btn-container\"></div>');\n    btnContainer.appendChild(successAlert);\n    torusAlert.appendChild(btnContainer);\n    const bindOnLoad = () => {\n      successAlert.addEventListener(\"click\", () => {\n        this._handleWindow(preopenInstanceId, {\n          url,\n          target: \"_blank\",\n          features: FEATURES_CONFIRM_WINDOW,\n        });\n        torusAlert.remove();\n\n        if (this.torusAlertContainer.children.length === 0) this.torusAlertContainer.style.display = \"none\";\n      });\n    };\n\n    this._setEmbedWhiteLabel(torusAlert);\n\n    const attachOnLoad = () => {\n      this.torusAlertContainer.style.display = \"block\";\n      this.torusAlertContainer.appendChild(torusAlert);\n    };\n\n    runOnLoad(attachOnLoad);\n    runOnLoad(bindOnLoad);\n  }\n}\n\nexport default Torus;\n", "import Torus, { LoginParams, NetworkInterface, TorusCtorArgs, TorusParams } from \"@toruslabs/torus-embed\";\nimport {\n  ADAPTER_CATEGORY,\n  ADAPTER_CATEGORY_TYPE,\n  ADAPTER_EVENTS,\n  ADAPTER_NAMESPACES,\n  ADAPTER_STATUS,\n  ADAPTER_STATUS_TYPE,\n  AdapterInitOptions,\n  AdapterNamespaceType,\n  CHAIN_NAMESPACES,\n  ChainNamespaceType,\n  CONNECTED_EVENT_DATA,\n  CustomChainConfig,\n  getChainConfig,\n  log,\n  SafeEventEmitterProvider,\n  UserInfo,\n  WALLET_ADAPTERS,\n  WalletInitializationError,\n  WalletLoginError,\n  Web3AuthError,\n} from \"@web3auth/base\";\nimport { BaseEvmAdapter } from \"@web3auth/base-evm-adapter\";\n\nexport interface TorusWalletOptions {\n  adapterSettings?: TorusCtorArgs;\n  loginSettings?: LoginParams;\n  initParams?: Omit<TorusParams, \"network\">;\n  chainConfig?: CustomChainConfig;\n  sessionTime?: number;\n}\n\nexport class TorusWalletAdapter extends BaseEvmAdapter<never> {\n  readonly name: string = WALLET_ADAPTERS.TORUS_EVM;\n\n  readonly adapterNamespace: AdapterNamespaceType = ADAPTER_NAMESPACES.EIP155;\n\n  readonly currentChainNamespace: ChainNamespaceType = CHAIN_NAMESPACES.EIP155;\n\n  readonly type: ADAPTER_CATEGORY_TYPE = ADAPTER_CATEGORY.EXTERNAL;\n\n  public status: ADAPTER_STATUS_TYPE = ADAPTER_STATUS.NOT_READY;\n\n  public torusInstance: Torus | null = null;\n\n  private torusWalletOptions?: TorusCtorArgs;\n\n  private initParams?: TorusParams;\n\n  private loginSettings?: LoginParams = {};\n\n  private rehydrated = false;\n\n  constructor(params: TorusWalletOptions = {}) {\n    super();\n    this.torusWalletOptions = params.adapterSettings || {};\n    this.initParams = params.initParams || {};\n    this.loginSettings = params.loginSettings || {};\n    this.chainConfig = params.chainConfig || null;\n    this.sessionTime = params.sessionTime || 86400;\n  }\n\n  get provider(): SafeEventEmitterProvider | null {\n    if (this.status === ADAPTER_STATUS.CONNECTED && this.torusInstance) {\n      return this.torusInstance.provider as unknown as SafeEventEmitterProvider;\n    }\n    return null;\n  }\n\n  set provider(_: SafeEventEmitterProvider | null) {\n    throw new Error(\"Not implemented\");\n  }\n\n  async init(options: AdapterInitOptions): Promise<void> {\n    super.checkInitializationRequirements();\n    // set chainConfig for mainnet by default if not set\n    let network: NetworkInterface;\n    if (!this.chainConfig) {\n      this.chainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, 1);\n      const { blockExplorer, displayName, chainId, ticker, tickerName } = this.chainConfig as CustomChainConfig;\n      network = { chainId: Number.parseInt(chainId, 16), host: \"mainnet\", blockExplorer, networkName: displayName, ticker, tickerName };\n    } else {\n      const { chainId, blockExplorer, displayName, rpcTarget, ticker, tickerName } = this.chainConfig as CustomChainConfig;\n      network = { chainId: Number.parseInt(chainId, 16), host: rpcTarget, blockExplorer, networkName: displayName, ticker, tickerName };\n    }\n    this.torusInstance = new Torus(this.torusWalletOptions);\n    log.debug(\"initializing torus evm adapter init\");\n    await this.torusInstance.init({\n      showTorusButton: false,\n      ...this.initParams,\n      network,\n    });\n    this.status = ADAPTER_STATUS.READY;\n    this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.TORUS_EVM);\n\n    try {\n      log.debug(\"initializing torus evm adapter\");\n      if (options.autoConnect) {\n        this.rehydrated = true;\n        await this.connect();\n      }\n    } catch (error) {\n      log.error(\"Failed to connect with torus evm provider\", error);\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n    }\n  }\n\n  async connect(): Promise<SafeEventEmitterProvider | null> {\n    super.checkConnectionRequirements();\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    this.status = ADAPTER_STATUS.CONNECTING;\n    this.emit(ADAPTER_EVENTS.CONNECTING, { adapter: WALLET_ADAPTERS.TORUS_EVM });\n    try {\n      await this.torusInstance.login(this.loginSettings);\n      const { chainId } = this.torusInstance.provider;\n      if (chainId && parseInt(chainId) !== parseInt((this.chainConfig as CustomChainConfig).chainId, 16)) {\n        const { chainId: _chainId, blockExplorer, displayName, rpcTarget, ticker, tickerName } = this.chainConfig as CustomChainConfig;\n        const network: NetworkInterface = {\n          chainId: Number.parseInt(_chainId, 16),\n          host: rpcTarget,\n          blockExplorer,\n          networkName: displayName,\n          tickerName,\n          ticker,\n        };\n        // in some cases when user manually switches chain and relogin then adapter will not connect to initially passed\n        // chainConfig but will connect to the one that user switched to.\n        // So here trying to switch network to the one that was initially passed in chainConfig.\n        await this.torusInstance.setProvider({\n          ...network,\n        });\n        const updatedChainID = await this.torusInstance.ethereum.request<string>({ method: \"eth_chainId\" });\n        if (updatedChainID && parseInt(updatedChainID) !== parseInt((this.chainConfig as CustomChainConfig).chainId, 16)) {\n          throw WalletInitializationError.fromCode(\n            5000,\n            `Not connected to correct chainId. Expected: ${(this.chainConfig as CustomChainConfig).chainId}, Current: ${updatedChainID}`\n          );\n        }\n      }\n      this.status = ADAPTER_STATUS.CONNECTED;\n      this.torusInstance.showTorusButton();\n      this.emit(ADAPTER_STATUS.CONNECTED, { adapter: WALLET_ADAPTERS.TORUS_EVM, reconnected: this.rehydrated } as CONNECTED_EVENT_DATA);\n      return this.provider;\n    } catch (error) {\n      // ready again to be connected\n      this.status = ADAPTER_STATUS.READY;\n      this.rehydrated = false;\n      this.emit(ADAPTER_STATUS.ERRORED, error);\n      throw error instanceof Web3AuthError ? error : WalletLoginError.connectionError(\"Failed to login with torus wallet\");\n    }\n  }\n\n  async disconnect(options: { cleanup: boolean } = { cleanup: false }): Promise<void> {\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    await super.disconnect();\n    await this.torusInstance.logout();\n    this.torusInstance.hideTorusButton();\n    if (options.cleanup) {\n      this.status = ADAPTER_STATUS.NOT_READY;\n      this.torusInstance = null;\n    } else {\n      // ready to be connected again\n      this.status = ADAPTER_STATUS.READY;\n    }\n\n    this.rehydrated = false;\n    this.emit(ADAPTER_EVENTS.DISCONNECTED);\n  }\n\n  async getUserInfo(): Promise<Partial<UserInfo>> {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    const userInfo = await this.torusInstance.getUserInfo(\"\");\n    return userInfo;\n  }\n\n  setAdapterSettings(options: { sessionTime?: number }): void {\n    if (this.status === ADAPTER_STATUS.READY) return;\n    if (options?.sessionTime) {\n      this.sessionTime = options.sessionTime;\n    }\n  }\n}\n"],
  "mappings": "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,GAAG;MAC3B,CAAClC,iBAAiBmC,MAAM,GAAG;MAC3B,CAACnC,iBAAiBoC,OAAO,GAAG;MAC5B,CAACpC,iBAAiBqC,kBAAkB,GAAG;;AAGlC,IAAMnC,mBAAmB;MAC9BoC,SAAS;MACTC,MAAM;MACNC,aAAa;MACbC,SAAS;MACTC,UAAU;MACVC,SAAS;MACTC,OAAO;;AAGF,IAAMzC,4BAA4B;MACvC0C,SAAS;MACTC,OAAO;MACPC,aAAa;MACbC,mBAAmB;MACnBC,MAAM;;AAGD,IAAM7C,kBAAkB;MAC7B8C,YAAY;MACZC,aAAa;MACbC,SAAS;MACTC,SAAS;MACTC,KAAK;MACLC,MAAM;MACNC,KAAK;MACLC,SAAS;;AAkCJ,IAAMpD,kBAAkB;MAC7BqD,aAAa;MACbC,UAAU;MACVC,cAAc;MACdC,WAAW;;ACtFN,IAAMvD,4BAA4B,CACvC,OACA,QACA,QACA,QACA,SACA,OACA,OACA,QACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,SACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,OACA,OACA,OACA,OACA,OACA,UACA,SACA,OACA,OACA,UACA,MACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,OACA,OACA,QACA,OACA,QACA,OACA,OACA,MACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,OACA,OACA,OACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,OACA,QACA,OACA,OACA,QACA,QACA,QACA,OACA,OACA,OACA,YACA,QACA,OACA,OACA,WACA,UACA,OACA,UACA,QACA,QACA,SACA,OACA,OACA,OACA,OACA,QACA,OACA,QACA,OACA,OACA,OACA,SACA,OACA,QACA,QACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,OACA,SACA,OACA,OACA,OACA,SACA,OACA,QACA,OACA,QACA,QACA,QACA,QACA,QACA,SACA,QACA,QACA,QACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,OACA,QACA,SACA,SACA,OACA,OACA,OACA,OACA,SACA,QACA,KAAK;AAOP,IAAMhG,qCAAqC;;;MAGzC,CAAC4F,iBAAiBoC,OAAO,GAAG,CAC1B,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,KAAK;;;;;MAMP,CAACpC,iBAAiBqC,IAAI,GAAG,CACvB,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,KAAK;;MAGP,CAACrC,iBAAiBsC,WAAW,GAAG,CAAC,OAAO,OAAO,KAAK;;MAEpD,CAACtC,iBAAiBuC,OAAO,GAAG,CAAC,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,KAAK;;;MAGjG,CAACvC,iBAAiBwC,QAAQ,GAAG,CAAC,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,KAAK;;;;;;MAMlG,CAACxC,iBAAiByC,OAAO,GAAG,CAC1B,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,KAAK;MAEP,CAACzC,iBAAiB0C,KAAK,GAAG,CAAC,OAAO,OAAO,KAAK;;AAGhD,IAAMnI,6BAA6B,IAAIqJ,IAAIxD,yBAAyB;ACrbpE,IAAMC,qBAAmB;MACvB,CAACL,iBAAiBoC,OAAO,GAAG;QAC1ByB,OAAO;QACPC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,eAAe;QACfC,eAAe;QACfC,iBAAiBlK,wBAAwB+F,iBAAiBoC,OAAO;QACjEgC,8BAA8B;UAC5B,CAACnE,0BAA0B0C,OAAO,GAAG,CACnC;YAAE0B,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAASC,SAAS;UAAS,GACpC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,CAAA;UAEpC,CAACrE,0BAA0B2C,KAAK,GAAG,CACjC;YAAEyB,OAAO;YAAeC,SAAS;UAAO,GACxC;YAAED,OAAO;YAAiBC,SAAS;UAAS,GAC5C;YAAED,OAAO;YAAgBC,SAAS;UAAQ,CAAA;UAE5C,CAACrE,0BAA0B4C,WAAW,GAAG,CACvC;YAAEwB,OAAO;YAAWC,SAAS;UAAO,GACpC;YAAED,OAAO;YAAYC,SAAS;UAAQ,CAAA;UAExC,CAACrE,0BAA0B6C,iBAAiB,GAAG,CAAC;YAAEuB,OAAO;YAAeC,SAAS;WAAQ;;QAE3FC,aAAa;QACbC,KAAK;QACLC,YAAY;;MAEd,CAACzE,iBAAiBqC,IAAI,GAAG;QACvBwB,OAAO;QACPC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,eAAe;QACfC,eAAe;QACfC,iBAAiBlK,wBAAwB+F,iBAAiBqC,IAAI;QAC9D+B,8BAA8B;UAC5B,CAACnE,0BAA0B0C,OAAO,GAAG,CACnC;YAAE0B,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,CAAA;UAEpC,CAACrE,0BAA0B2C,KAAK,GAAG,CAAC;YAAEyB,OAAO;YAASC,SAAS;WAAQ;;UAEvE,CAACrE,0BAA0B6C,iBAAiB,GAAG,CAAC;YAAEuB,OAAO;YAASC,SAAS;WAAS;;QAEtFC,aAAa;QACbC,KAAK;QACLC,YAAY;;MAEd,CAACzE,iBAAiBsC,WAAW,GAAG;QAC9BuB,OAAO;QACPC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,eAAe;QACfC,eAAe;QACfC,iBAAiBlK,wBAAwB+F,iBAAiBsC,WAAW;QACrE8B,8BAA8B;UAC5B,CAACnE,0BAA0B0C,OAAO,GAAG,CACnC;YAAE0B,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,CAAA;UAEpC,CAACrE,0BAA0B2C,KAAK,GAAG,CACjC;YAAEyB,OAAO;YAAaC,SAAS;UAAO,GACtC;YAAED,OAAO;YAAeC,SAAS;UAAS,GAC1C;YAAED,OAAO;YAAcC,SAAS;UAAQ,CAAA;;UAG1C,CAACrE,0BAA0B6C,iBAAiB,GAAG,CAAC;YAAEuB,OAAO;YAAQC,SAAS;WAAQ;;;;QAIpFC,aAAa;QACbC,KAAK;QACLE,aAAa;QACbD,YAAY;;MAEd,CAACzE,iBAAiBuC,OAAO,GAAG;QAC1BsB,OAAO;QACPC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,eAAe;QACfC,eAAe;QACfC,iBAAiBlK,wBAAwB+F,iBAAiBuC,OAAO;QACjE6B,8BAA8B;UAC5B,CAACnE,0BAA0B0C,OAAO,GAAG,CACnC;YAAE0B,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;WAAQ;;QAGtCC,aAAa;QACbC,KAAK;QACLG,MAAM;QACNF,YAAY;;MAEd,CAACzE,iBAAiBwC,QAAQ,GAAG;QAC3BqB,OAAO;QACPC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,eAAe;QACfC,eAAe;QACfC,iBAAiBlK,wBAAwB+F,iBAAiBwC,QAAQ;QAClE4B,8BAA8B;UAC5B,CAACnE,0BAA0B0C,OAAO,GAAG,CACnC;YAAE0B,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAOC,SAAS;UAAO,CAAA;UAElC,CAACrE,0BAA0B4C,WAAW,GAAG,CACvC;YAAEwB,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAASC,SAAS;WAAS;;QAGxCC,aAAa;QACbC,KAAK;QACLC,YAAY;;MAEd,CAACzE,iBAAiByC,OAAO,GAAG;QAC1BoB,OAAO;QACPC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,eAAe;QACfC,eAAe;QACfC,iBAAiBlK,wBAAwB+F,iBAAiByC,OAAO;QACjE2B,8BAA8B;UAC5B,CAACnE,0BAA0B0C,OAAO,GAAG,CACnC;YAAE0B,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,CAAA;UAEpC,CAACrE,0BAA0B2C,KAAK,GAAG,CACjC;YAAEyB,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAASC,SAAS;UAAS,GACpC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,CAAA;UAEpC,CAACrE,0BAA0B4C,WAAW,GAAG,CACvC;YAAEwB,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;UAAQ,CAAA;UAEpC,CAACrE,0BAA0B6C,iBAAiB,GAAG,CAAC;YAAEuB,OAAO;YAAQC,SAAS;WAAQ;;QAEpFC,aAAa;QACbE,YAAY;;MAEd,CAACzE,iBAAiB0C,KAAK,GAAG;QACxBmB,OAAO;QACPC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,eAAe;QACfC,eAAe;QACfC,iBAAiBlK,wBAAwB+F,iBAAiB0C,KAAK;QAC/D0B,8BAA8B;UAC5B,CAACnE,0BAA0B0C,OAAO,GAAG,CACnC;YAAE0B,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAOC,SAAS;UAAO,GAChC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAQC,SAAS;UAAQ,GAClC;YAAED,OAAO;YAAOC,SAAS;UAAO,CAAA;UAElC,CAACrE,0BAA0B2C,KAAK,GAAG,CAAC;YAAEyB,OAAO;YAASC,SAAS;WAAS;;;QAG1EC,aAAa;QACbE,YAAY;MACb;;AAGH,IAAMnE,eAAe;MACnBsE,IAAI;QACFC,OAAO;UACLC,UAAU;UACVC,gBAAgB;UAChBC,eAAe;UACfC,iBAAiB;UACjBC,eAAe;UACfC,WAAW;QACZ;;MAEHC,IAAI;QACFP,OAAO;UACLC,UAAU;UACVC,gBAAgB;UAChBC,eAAe;UACfC,iBAAiB;UACjBC,eAAe;UACfC,WAAW;QACZ;;MAEHE,IAAI;QACFR,OAAO;UACLC,UAAU;UACVC,gBAAgB;UAChBC,eAAe;UACfC,iBAAiB;UACjBC,eAAe;UACfC,WAAW;QACZ;;MAEHG,IAAI;QACFT,OAAO;UACLC,UAAU;UACVC,gBAAgB;UAChBC,eAAe;UACfC,iBAAiB;UACjBC,eAAe;UACfC,WAAW;QACZ;;MAEHI,IAAI;QACFV,OAAO;UACLC,UAAU;UACVC,gBAAgB;UAChBC,eAAe;UACfC,iBAAiB;UACjBC,eAAe;UACfC,WAAW;QACZ;MACF;;AAGH,IAAA,gBAAe;MACbK,uBAAuBC,OAAOC,OAAO5F,gBAAgB;wBACrDO;MACAmE,KAAK;MACLlE;MACAqF,cAAc;MACdC,uBAA+B;;ACpQ1B,IAAMrF,YAAasF,QACxB,IAAInL,QAAQ,CAACC,SAASoD,WAAU;AAC9B,UAAIzB,OAAO1B,SAASkL,QAAQ,MAAM;AAChCpL,gBAAQC,QAAQkL,GAAE,CAAE,EAAEE,KAAKpL,OAAO,EAAEqL,MAAMjI,MAAM;MACjD,OAAM;AACLzB,eAAO1B,SAASqL,iBAAiB,oBAAoB,MAAK;AACxDvL,kBAAQC,QAAQkL,GAAE,CAAE,EAAEE,KAAKpL,OAAO,EAAEqL,MAAMjI,MAAM;QAClD,CAAC;MACF;IACH,CAAC;AAWI,IAAMyC,gBAAoC0F,UAAmB;AAClE,YAAMC,WAAW7J,OAAO1B,SAASqD,cAAc,UAAU;AACzD,YAAMmI,cAAcF,KAAKG,KAAI;AAC7BF,eAASG,YAAYF;AACrB,aAAOD,SAASI,QAAQC;IAC1B;AAEO,IAAM1L,cAAc,SAACsE,QAAqBqH,WAAmBC,SAA0E;AAAA,eAAAC,OAAAC,UAAAC,QAAhCC,cAAsB,IAAApI,MAAAiI,OAAAA,IAAAA,OAAA,IAAA,CAAA,GAAAI,OAAA,GAAAA,OAAAJ,MAAAI,QAAA;AAAtBD,oBAAsBC,OAAAH,CAAAA,IAAAA,UAAAG,IAAA;MAAA;AAClI,YAAMC,iBAAiBA,MAAK;AAC1BN,gBAAQ,GAAGI,WAAW;AACtB1H,eAAO6H,oBAAoBR,WAAWO,cAAc;;AAEtD5H,aAAO6G,iBAAiBQ,WAAWO,cAAc;IACnD;AAEO,IAAMvG,eAAeA,CAACrB,QAAgBqH,WAAmBC,YAA2C;AACzG,YAAMM,iBAAkBE,WAAkB;AACxCR,gBAAQQ,KAAK;AACb9H,eAAO+H,eAAeV,WAAWO,cAAc;;AAEjD5H,aAAOgI,GAAGX,WAAWO,cAAc;IACrC;ACzCA,IAAArL,OAAe0L,gBAAAA,QAASC,UAAU,aAAa;ACF/C,IAAA,WAAe;MACb3H,QAAQ;QACN4H,cAAcA,MAAc;QAC5BC,yBAAyBA,MAAc;QACvCxI,kBAAkBA,MAAc;QAChCyI,iBAAkBtM,YAChB,gFAAgFA,MAAsC;QACxHuM,qBAAqBA,MAAc;QACnCC,gBAAgBA,CAACC,mBAA2BC,uBACS,mDAAAD,iBAA0C,yBAAAC,kBAAsB;QACrHC,oBAAoBA,MAA8D;QAClFC,sBAAsBA,MAAyD;QAC/EC,sBAAsBA,MAAqE;QAC3FC,qBAAqBA,MAA4D;QACjFC,qBAAsB/M,YAA2B,+CAA+CA,MAAU;;MAE5GgN,MAAM;QACJC,WAAYC,aAA4B,sCAAsCA,OAAW;;MAE3FC,UAAU;;QAERC,mBACE;QAEFC,iBACE;QAEFC,QAAQ;UACNC,OACE;UAEFjN,MACE;UAEFkN,gBACE;UAEFC,cACE;;QAGJC,mBAAmB;MACpB;;ACjCH,KAAM;MAAExI;QAAqByI;AAUtB,IAAMpI,0BAA0BA,CAACxG,UAAkBsF,WAAsE;AAC9H,YAAMG,SAAwB,CAAA;AAE9B,UAAI,CAACzF,UAAU;AACb,eAAO;UAAEyF;UAAQoJ,SAAS;;MAC3B;AAED,UAAI7O,YAAY,CAACmG,iBAAiBnG,QAAQ,GAAG;AAC3CyF,eAAOzF,WAAW;AAClB,eAAO;UAAEyF;UAAQoJ,SAAStD,OAAOuD,KAAKrJ,MAAM,EAAEkH,WAAW;;MAC1D;AAED,YAAMoC,mBAAmB5I,iBAAiBnG,QAAiC;AAC3E,YAAMgP,iBAAiB1J,UAAU,CAAA;AAQjC,UAAI0J,eAAeC,WAAW;AAC5B,cAAMC,uBAAuB,CAACC,WAAWH,eAAeC,UAAUG,SAAQ,CAAE,KAAK;AACjF,YAAIF,uBAAuBH,iBAAiBhF;AAAetE,iBAAOwJ,YAAY;AAC9E,YAAIC,uBAAuBH,iBAAiB/E,iBAAiB+E,iBAAiBxE;AAC5E9E,iBAAOwJ,YAAY;MACtB;AACD,UAAID,eAAeK,oBAAoB,CAACN,iBAAiB9E,gBAAgBqF,SAASN,eAAeK,gBAAgB,GAAG;AAClH5J,eAAO4J,mBAAmB;MAC3B;AACD,UAAIL,eAAeO,wBAAwB;AACzC,cAAMrF,+BAA+BqB,OAAOC,OAAOuD,iBAAiB7E,4BAA4B,EAC7FsF,KAAI,EACJC,IAAKrP,cAAaA,SAAS+J,KAAK;AAEnC,cAAMuF,sBACJ1P,aAAa8F,iBAAiBoC,UAAU8G,eAAeO,uBAAuBI,YAAW,IAAKX,eAAeO;AAE/G,YAAIrF,gCAAgC,CAACA,6BAA6BoF,SAASI,mBAAmB;AAC5FjK,iBAAO8J,yBAAyB;MACnC;AACD,aAAO;QAAE9J;QAAQoJ,SAAStD,OAAOuD,KAAKrJ,MAAM,EAAEkH,WAAW;;IAC3D;AAgEO,IAAMtH,uBAAuBA,MAAM9B,KAAKqM,OAAM,EAAGR,SAAS,EAAE,EAAES,MAAM,CAAC;AAErE,IAAMpJ,cAAc,OACzBqJ,UACA3I,eACyD;AACzD,UAAI4I;AACJ,UAAIC;AAEJ,YAAMC,UAAU;AAChB,UAAIC,cAAc/I,WAAU8I,WAAWA;AACvC,UAAI;AACF,aAAKH,aAAa,aAAaA,aAAa,iBAAiB,CAAC3I,WAAU8I,SAAS;AAC/E,cAAIE;AACJ,cAAI,CAACvB,cAAOnD;AACV0E,uBAAW,MAAMC,IAAG,GAAIxB,cAAOtE,GAAyD,sDAAA2F,OAAAA,IAAW,CAAA,GAAI;cAAEI,WAAW;YAAI,CAAE;;AACvHF,uBAAW;cAAE5O,MAAMqN,cAAOnD;;AAC/ByE,wBAAcC,SAAS5O;AAEvBqN,wBAAOnD,eAAe0E,SAAS5O;QAChC;eACML,OAAO;AACdO,QAAAA,KAAIP,MAAMA,OAAO,gCAAgC;MAClD;AACDO,MAAAA,KAAIwM,KAAK,kBAAkBiC,WAAW;AACtC,cAAQJ,UAAQ;QACd,KAAK;AACHC,qBAAW,2BAA2BG,WAAW;AACjDF,qBAAW;AACX;QACF,KAAK;AACHD,qBAAW;AACXC,qBAAW;AACX;QACF,KAAK;AACHD,qBAAW;AACXC,qBAAW;AACX;QACF,KAAK;AACHD,qBAAW;AACXC,qBAAW;AACX;QACF,KAAK;AACHD,qBAAW;AACXC,qBAAW;AACX;QACF,KAAK;AACHD,qBAAW;AACXC,qBAAW;AACX;QACF,KAAK;AACHD,qBAAW;AACXC,qBAAW;AACX;QACF;AACED,qBAAW,uBAAuBG,WAAW;AAC7CF,qBAAW;AACX;MAAM;AAEV,aAAO;QAAED;QAAUC;;IACrB;AAEO,IAAMtJ,kBAAkBA,MAAa;AAC1C,UAAI4J,eAAelO,OAAOmO,UAAUC,YAAY;AAChD,YAAMC,gBAAgBH,aAAaI,MAAM,GAAG;AAC5CJ,qBAAe/E,OAAOoF,UAAUC,eAAeC,KAAKjC,cAAOxI,cAAcqK,cAAc,CAAC,CAAC,IAAIA,cAAc,CAAC,IAAI;AAChH,aAAOH;IACT;AAEO,IAAM3J,wBAAwB;MACnC;;IAAoB;AAGf,IAAMpB,OAAOA,MAAW;IAC7B;AAGK,IAAMqB,kCAAkC;AACxC,IAAMC,iCAAiC;AAEvC,IAAMC,0BAA0B;AC5KvCgK,qBAAiBC,sBAAsB;AAGvC,IAAMhK,wBACJ,SAACtG,SAASoD,QAAM;AAAA,UAAEmN,eAAYtE,UAAAC,SAAA,KAAAD,UAAA,CAAA,MAAApK,SAAAoK,UAAA,CAAA,IAAG;AAAI,aACrC,CAACxL,OAAOiP,aAAY;AAClB,YAAIjP,SAASiP,SAASjP,OAAO;AAC3B,iBAAO2C,OAAO3C,SAASiP,SAASjP,KAAK;QACtC;AACD,eAAO,CAAC8P,gBAAgBxM,MAAMyM,QAAQd,QAAQ,IAAI1P,QAAQ0P,QAAQ,IAAI1P,QAAQ0P,SAASe,MAAM;;IAC9F;AAEH,IAAMlK,sBAAN,MAAMA,6BAA4B8J,iBAAgB;;;;;;;;;;;;;MA2DhDK,YACEC,kBAC4G;AAAA,YAA5G;UAAE1D,oBAAoB;UAAKC,qBAAqB;UAAM0D,oBAAoB;wEAAgC,CAAA,IAAA,CAAA;AAE1G,cAAK;AAAGC,wBAAA,MAAA,WAAA,MAAA;AAAAA,wBAAA,MAAA,mBAAA,MAAA;AAAAA,wBAAA,MAAA,cAAA,MAAA;AAAAA,wBAAA,MAAA,kBAAA,MAAA;AAAAA,wBAAA,MAAA,sBAAA,MAAA;AAAAA,wBAAA,MAAA,WAAA,MAAA;AAAAA,wBAAA,MAAA,sBAAA,MAAA;AAAAA,wBAAA,MAAA,oBAAA,MAAA;AAAAA,wBAAA,MAAA,UAAA,MAAA;AAAAA,wBAAA,MAAA,UAAA,MAAA;AAAAA,wBAAA,MAAA,sBAAA,MAAA;AAAAA,wBAnBmC,MAAA,iBAAA;;UAE3CC,QAAQ;UACRC,qBAAqB;UACrBC,MAAM;UACN9C,mBAAmB;;UAEnBJ,QAAQ;YACNC,OAAO;YACPjN,MAAM;YACNkN,gBAAgB;YAChBC,cAAc;UACf;SACF;AAOC,YAAI,KAACgD,yBAAeN,gBAAgB,GAAG;AACrC,gBAAM,IAAIO,MAAMnM,SAASC,OAAO+H,oBAAmB,CAAE;QACtD;AACD,aAAKoE,UAAU;AACf,aAAKC,gBAAgBnE,iBAAiB;AAGtC,aAAKoE,SAAMC,iBAAA,CAAA,GACN/K,qBAAoBgL,aAAa;AAItC,aAAKC,kBAAkB;AACvB,aAAKC,iBAAiB;AACtB,aAAK/D,UAAU;AACf,aAAKR,qBAAqBA;AAG1B,aAAKwE,yBAAyB,KAAKA,uBAAuBC,KAAK,IAAI;AACnE,aAAKC,sBAAsB,KAAKA,oBAAoBD,KAAK,IAAI;AAC7D,aAAKE,4BAA4B,KAAKA,0BAA0BF,KAAK,IAAI;AACzE,aAAKG,iBAAiB,KAAKA,eAAeH,KAAK,IAAI;AACnD,aAAKI,oBAAoB,KAAKA,kBAAkBJ,KAAK,IAAI;AACzD,aAAKK,0BAA0B,KAAKA,wBAAwBL,KAAK,IAAI;AACrE,aAAKM,YAAY,KAAKA,UAAUN,KAAK,IAAI;AACzC,aAAKO,cAAc,KAAKA,YAAYP,KAAK,IAAI;AAC7C,aAAKQ,qBAAqB,KAAKA,mBAAmBR,KAAK,IAAI;AAC3D,aAAKS,mBAAmB,KAAKA,iBAAiBT,KAAK,IAAI;AAEvD,aAAKU,UAAU,KAAKA,QAAQV,KAAK,IAAI;AACrC,aAAKX,OAAO,KAAKA,KAAKW,KAAK,IAAI;AAC/B,aAAKW,YAAY,KAAKA,UAAUX,KAAK,IAAI;AAIzC,cAAMY,MAAM,IAAIC,gBAAe;AAC/BC,yBAAAA,SAAK9B,kBAAkB4B,KAAK5B,kBAAkB,KAAKqB,wBAAwBL,KAAK,MAAM,UAAU,CAAC;AAGjG,aAAKe,qBAAqB,IAAIC,iCAAgB;UAAEC,YAAY;QAAmB,CAAA;AAyD/EH,yBAAAA;UACEF,IAAIM,aAAa,cAAc;cAC/BC,gCAAc,KAAKJ,kBAAkB;;UAErCzR,2BAA2B0Q,KAAK,MAAM,4BAA4B;QAAC;AAGrEY,YAAIQ,aAAa,UAAU;AAK3B,aAAKtG,GAAG,WAAW,MAAK;AACtB,eAAK4E,OAAO2B,cAAc;QAC5B,CAAC;AAID,cAAMC,oBAAoBC,uBAAsB;AAChDT,yBAAAA,SACEQ,kBAAkBE,QAClBZ,IAAIM,aAAajC,iBAAiB,GAClCqC,kBAAkBE,QAClB,KAAKnB,wBAAwBL,KAAK,MAAM,sBAAsB,CAAC;AAIjE,cAAMyB,YAAY,IAAIC,WAAU;AAChCD,kBAAUE,KAAKC,wBAAuB,CAAE;AACxCH,kBAAUE,KAAKlT,sBAAqB,CAAE;AACtCgT,kBAAUE,KAAKL,kBAAkBO,UAAU;AAC3C,aAAKC,aAAaL;AAGlBH,0BAAkBnF,OAAOrB,GAAG,gBAAiBiH,aAAW;AACtD,gBAAM;YAAElT;YAAQqE;UAAQ,IAAG6O;AAC3B,cAAIlT,WAAW,0BAA0B;AACvC,iBAAKkR,uBAAuB7M,MAAM;UACnC,WAAUrE,WAAW,6BAA6B;AACjD,iBAAKqR,0BAA0BhN,MAAM;UACtC,WAAUrE,WAAW,uBAAuB;AAC3C,iBAAKoR,oBAAoB/M,MAAM;qBACtBqB,sBAAsB2I,SAAS6E,QAAQlT,MAAM,GAAG;AAEzD,iBAAKgB,KAAK,QAAQkS,OAAO;AACzB,iBAAKlS,KAAK,gBAAgBqD,OAAO4L,MAAM;AACvC,iBAAKjP,KAAK,WAAW;cACnBmS,MAAMnT;cACNM,MAAM+D;YACP,CAAA;UACF;QAIH,CAAC;MACH;MAEA,IAAIqJ,oBAAiB;AACnB,YAAI,CAAC,KAAK0F,cAAc1F,mBAAmB;AACzClN,UAAAA,KAAIM,KAAKyD,SAAS4I,SAASO,iBAAiB;AAC5C,eAAK0F,cAAc1F,oBAAoB;QACxC;AACD,eAAO,KAAKwE;MACd;;;;MAKAM,cAAW;AACT,eAAO,KAAK3B,OAAO2B;MACrB;;;;;;;;;MAUA,MAAMX,QAAWwB,MAAsB;AACrC,YAAI,CAACA,QAAQ,OAAOA,SAAS,YAAY9P,MAAMyM,QAAQqD,IAAI,GAAG;AAC5D,gBAAMnT,iCAAUC,IAAIC,eAAe;YACjCC,SAASkE,SAASC,OAAOmI,mBAAkB;YAC3CrM,MAAM+S;UACP,CAAA;QACF;AAED,cAAM;UAAErT;UAAQqE;QAAQ,IAAGgP;AAE3B,YAAI,OAAOrT,WAAW,YAAYA,OAAO0L,WAAW,GAAG;AACrD,gBAAMxL,iCAAUC,IAAIC,eAAe;YACjCC,SAASkE,SAASC,OAAOoI,qBAAoB;YAC7CtM,MAAM+S;UACP,CAAA;QACF;AAED,YAAIhP,WAAWhD,UAAa,CAACkC,MAAMyM,QAAQ3L,MAAM,MAAM,OAAOA,WAAW,YAAYA,WAAW,OAAO;AACrG,gBAAMnE,iCAAUC,IAAIC,eAAe;YACjCC,SAASkE,SAASC,OAAOqI,qBAAoB;YAC7CvM,MAAM+S;UACP,CAAA;QACF;AAED,eAAO,IAAI9T,QAAQ,CAACC,SAASoD,WAAU;AACrC,eAAK8O,YAAY;YAAE1R;YAAQqE;UAAM,GAAIyB,sBAAsBtG,SAASoD,MAAM,CAAC;QAC7E,CAAC;MACH;;;;;;;MAQAkP,UAAUoB,SAA+BI,UAAuE;AAC9G,aAAK5B,YAAYwB,SAASI,QAAQ;MACpC;;;;;;MAQAC,YAAYjI,WAAmBkI,UAAsC;AACnE,aAAK7B,mBAAmBrG,SAAS;AACjC,eAAO,MAAMiI,YAAYjI,WAAWkI,QAAQ;MAC9C;MAEAvH,GAAGX,WAAmBkI,UAAsC;AAC1D,aAAK7B,mBAAmBrG,SAAS;AACjC,eAAO,MAAMW,GAAGX,WAAWkI,QAAQ;MACrC;MAEAC,KAAKnI,WAAmBkI,UAAsC;AAC5D,aAAK7B,mBAAmBrG,SAAS;AACjC,eAAO,MAAMmI,KAAKnI,WAAWkI,QAAQ;MACvC;MAEAE,gBAAgBpI,WAAmBkI,UAAsC;AACvE,aAAK7B,mBAAmBrG,SAAS;AACjC,eAAO,MAAMoI,gBAAgBpI,WAAWkI,QAAQ;MAClD;MAEAG,oBAAoBrI,WAAmBkI,UAAsC;AAC3E,aAAK7B,mBAAmBrG,SAAS;AACjC,eAAO,MAAMqI,oBAAoBrI,WAAWkI,QAAQ;MACtD;;;;;;;;MASA,MAAM5B,mBAAgB;AACpB,YAAI;AACF,gBAAM;YAAEgC;YAAU1G;YAAS2G;YAAY5C;UAAc,IAAM,MAAM,KAAKY,QAAQ;YAC5E7R,QAAQ;UACT,CAAA;AAGD,eAAKgB,KAAK,WAAW;YAAEkM;UAAS,CAAA;AAEhC,eAAKkE,oBAAoB;YAAElE;YAAS+D;UAAgB,CAAA;AACpD,eAAKI,0BAA0B;YAAEuC;YAAUC;UAAY,CAAA;AACvD,eAAK3C,uBAAuB0C,QAAQ;iBAC7B3T,OAAO;AACdO,UAAAA,KAAIP,MAAM,kEAAkEA,KAAK;QAClF,UAAA;AACCO,UAAAA,KAAIwM,KAAK,mBAAmB;AAC5B,eAAK6D,OAAOiD,cAAc;AAC1B,eAAK9S,KAAK,cAAc;QACzB;MACH;;;;;;;;;MAUA0Q,YAAYwB,SAAkEI,UAAsD;AAAA,YAAlBS,aAAUtI,UAAAC,SAAA,KAAAD,UAAA,CAAA,MAAApK,SAAAoK,UAAA,CAAA,IAAG;AAC7H,YAAIuI,KAAKV;AACT,cAAMW,WAAWf;AACjB,YAAI,CAAC3P,MAAMyM,QAAQiE,QAAQ,GAAG;AAC5B,cAAI,CAACA,SAAS/P,SAAS;AACrB+P,qBAAS/P,UAAU;UACpB;AAED,cAAI+P,SAASjU,WAAW,kBAAkBiU,SAASjU,WAAW,uBAAuB;AAEnFgU,iBAAKA,CAACE,KAAYpU,QAA8B;AAC9C,mBAAKoR,uBAAuBpR,IAAImQ,UAAU,CAAA,GAAIgE,SAASjU,WAAW,gBAAgB+T,UAAU;AAC5FT,uBAASY,KAAKpU,GAAG;;UAEpB,WAAUmU,SAASjU,WAAW,2BAA2B;AACxD,iBAAKiT,WAAWhP,OAAOiP,SAAiCc,EAAE;AAC1D;UACD;QACF;AACD,aAAKG,iBAAiBF,UAAUD,EAAE;MACpC;MAiCAxD,KAAK4D,iBAA0BC,gBAAwB;AACrD,YAAI,CAAC,KAAKjB,cAAc5C,MAAM;AAC5BhQ,UAAAA,KAAIM,KAAKyD,SAAS4I,SAASE,eAAe;AAC1C,eAAK+F,cAAc5C,OAAO;QAC3B;AACD,YAAI,OAAO4D,oBAAoB,aAAa,CAACC,kBAAkB9Q,MAAMyM,QAAQqE,cAAc,IAAI;AAC7F,iBAAO,IAAI9U,QAAQ,CAACC,SAASoD,WAAU;AACrC,gBAAI;AACF,mBAAK8O,YAAY;gBAAE1R,QAAQoU;gBAAiB/P,QAAQgQ;iBAAkBvO,sBAAsBtG,SAASoD,QAAQ,KAAK,CAAC;qBAC5G3C,OAAO;AACd2C,qBAAO3C,KAAK;YACb;UACH,CAAC;QACF;AACD,YAAImU,mBAAmB,OAAOA,oBAAoB,YAAY,OAAOC,mBAAmB,YAAY;AAClG,iBAAO,KAAK3C,YAAY0C,iBAAyCC,cAA8C;QAChH;AACD,eAAO,KAAK5C,UAAU2C,eAAyC;MACjE;;;;;MAMA3C,UAAUyB,SAA+B;AACvC,YAAIjD;AACJ,gBAAQiD,QAAQlT,QAAM;UACpB,KAAK;AACHiQ,qBAAS,KAAKe,kBAAkB,CAAC,KAAKA,eAAe,IAAI,CAAA;AACzD;UAEF,KAAK;AACHf,qBAAS,KAAKe,mBAAmB;AACjC;UAEF,KAAK;AACH,iBAAKU,YAAYwB,SAAS5O,IAAI;AAC9B2L,qBAAS;AACT;UAEF,KAAK;AACHA,qBAAS,KAAKgB,kBAAkB;AAChC;UAEF;AACE,kBAAM,IAAIP,MAAMnM,SAASC,OAAO8H,gBAAgB4G,QAAQlT,MAAM,CAAC;QAAE;AAGrE,eAAO;UACLmE,IAAI+O,QAAQ/O;UACZD,SAASgP,QAAQhP;UACjB+L;;MAEJ;;;;;;;;MASUqB,eAAepE,SAAe;AACtC,YAAI,CAAC,KAAK2D,OAAO2B,aAAa;AAC5B,eAAK3B,OAAO2B,cAAc;AAC1B,eAAKxR,KAAK,WAAW;YAAEkM;UAAS,CAAA;AAChC1M,UAAAA,KAAI8T,MAAM/P,SAASyI,KAAKC,UAAUC,OAAO,CAAC;QAC3C;MACH;;;;;;;;;;;;MAaUqE,kBAAkBgD,eAAwBC,cAAqB;AACvE,YAAI,KAAK3D,OAAO2B,eAAgB,CAAC,KAAK3B,OAAO4D,6BAA6B,CAACF,eAAgB;AACzF,eAAK1D,OAAO2B,cAAc;AAE1B,cAAIvS;AACJ,cAAIsU,eAAe;AACjBtU,oBAAQ,IAAIyU;cACV;;cACAF,gBAAgBjQ,SAASC,OAAO4H,aAAY;YAAE;AAEhD5L,YAAAA,KAAI8T,MAAMrU,KAAK;UAChB,OAAM;AACLA,oBAAQ,IAAIyU;cACV;;cACAF,gBAAgBjQ,SAASC,OAAO6H,wBAAuB;YAAE;AAE3D7L,YAAAA,KAAIP,MAAMA,KAAK;AACf,iBAAKiN,UAAU;AACf,iBAAK2D,OAAO+C,WAAW;AACvB,iBAAK5C,kBAAkB;AACvB,iBAAKH,OAAOgD,aAAa;AACzB,iBAAKhD,OAAO4D,4BAA4B;UACzC;AAED,eAAKzT,KAAK,cAAcf,KAAK;QAC9B;MACH;;;;;;MAOUuR,wBAAwBmD,YAAoB1U,OAAY;AAChEQ,mCAA2BkU,YAAY1U,OAAO,IAAI;AAClD,aAAKsR,kBAAkB,OAAOtR,QAAQA,MAAMI,UAAUgB,MAAS;MACjE;;;;MAKU6P,uBAAuB0C,UAA8D;AAAA,YAAzCgB,gBAAanJ,UAAAC,SAAA,KAAAD,UAAA,CAAA,MAAApK,SAAAoK,UAAA,CAAA,IAAG;AAAK,YAAEsI,aAAUtI,UAAAC,SAAA,KAAAD,UAAA,CAAA,MAAApK,SAAAoK,UAAA,CAAA,IAAG;AAExF,YAAIoJ,gBAAgBjB;AACpB,YAAI,CAACrQ,MAAMyM,QAAQ6E,aAAa,GAAG;AACjCrU,UAAAA,KAAIP,MAAM,4EAA4E4U,aAAa;AACnGA,0BAAgB,CAAA;QACjB;AAED,mBAAWC,WAAWlB,UAAU;AAC9B,cAAI,OAAOkB,YAAY,UAAU;AAC/BtU,YAAAA,KAAIP,MAAM,kEAAkE2T,QAAQ;AACpFiB,4BAAgB,CAAA;AAChB;UACD;QACF;AAGD,YAAI,KAACE,uBAAAA,SAAO,KAAKlE,OAAO+C,UAAUiB,aAAa,GAAG;AAGhD,cAAID,iBAAiBrR,MAAMyM,QAAQ,KAAKa,OAAO+C,QAAQ,KAAK,KAAK/C,OAAO+C,SAASlI,SAAS,KAAK,CAACqI,YAAY;AAC1GvT,YAAAA,KAAIP,MAAM,mFAAmF4U,aAAa;UAC3G;AAED,eAAKhE,OAAO+C,WAAWiB;AACvB,eAAK7T,KAAK,mBAAmB6T,aAAa;QAC3C;AAGD,YAAI,KAAK7D,oBAAoB6D,cAAc,CAAC,GAAG;AAC7C,eAAK7D,kBAAmB6D,cAAc,CAAC,KAAgB;QACxD;MACH;;;;;;;;;;MAWUzD,sBAAmG;AAAA,YAA/E;UAAElE;UAAS+D;wEAAkE,CAAA,IAAA,CAAA;AACzG,YAAI,CAAC/D,WAAW,CAAC+D,gBAAgB;AAC/BzQ,UAAAA,KAAIP,MAAM,0EAA0E;YAAEiN;YAAS+D;UAAgB,CAAA;AAC/G;QACD;AAED,YAAIA,mBAAmB,WAAW;AAChC,eAAKM,kBAAkB,IAAI;QAC5B,OAAM;AACL,eAAKD,eAAepE,OAAO;AAE3B,cAAIA,YAAY,KAAKA,SAAS;AAC5B,iBAAKA,UAAUA;AACf,gBAAI,KAAK2D,OAAOiD,aAAa;AAC3B,mBAAK9S,KAAK,gBAAgB,KAAKkM,OAAO;YACvC;UACF;QACF;MACH;;;;;;;;;;;MAYUmE,4BAAsG;AAAA,YAA5E;UAAEuC;UAAUC;wEAA8D,CAAA,IAAA,CAAA;AAC5G,YAAI,OAAOA,eAAe,WAAW;AACnCrT,UAAAA,KAAIP,MAAM,4EAA4E;YAAE4T;UAAY,CAAA;AACpG;QACD;AAED,YAAIA,eAAe,KAAKhD,OAAOgD,YAAY;AACzC,eAAKhD,OAAOgD,aAAaA;AACzB,eAAK3C,uBAAuB0C,YAAY,CAAA,CAAE;QAC3C;MACH;;;;MAKUjC,mBAAmBrG,WAAiB;AAC5C,YAAI,KAAK8H,cAAc9F,OAAOhC,SAAS,MAAM,OAAO;AAClD9K,UAAAA,KAAIM,KAAKyD,SAAS4I,SAASG,OAAOhC,SAAS,CAAC;AAC5C,eAAK8H,cAAc9F,OAAOhC,SAAS,IAAI;QACxC;MACH;;oBAtmBIvF,qBACgD,iBAAA;MAClD6N,UAAU;MACVpB,aAAa;MACbqB,YAAY;MACZC,aAAa;MACbW,2BAA2B;MAC3BO,sBAAsB;KACvB;ACjDH,IAAMhP,WAAYiP,cAAoC;MACpDC,YAAYD,QAAQC,cAAc,CAAC,QAAQ;MAC3CC,WAAWF,QAAQE,aAAa;MAChCC,MAAMH,QAAQG,QAAQ;IACvB;AAGD,IAAMnP,SAASA,CAACgP,SAAgC3U,SAAsD;AACpG,YAAM+U,iBAAyC,CAAA;AAC/CJ,cAAQC,WAAWI,QAASC,eAAa;AACvCF,uBAAeE,SAAS,QAAIC,mBAAAA,SAAWD,SAAS,EAAEE,OAAOnV,MAAM,MAAM,EAAEoV,OAAO,QAAQ;MACxF,CAAC;AACD,aAAOL;IACT;AAEA,IAAMnP,YAAYA,CAAC+O,SAAgCU,QAAoB;AACrE,UAAIC,SAAS;AAGbA,gBAAUtL,OAAOuD,KAAK8H,IAAI1P,MAAM,EAC7BuI,IAAK+G,eAAuC,GAAAA,SAAa,IAAAI,IAAI1P,OAAOsP,SAAS,CAAA,EAAG,EAChFM,KAAKZ,QAAQE,SAAS;AAEzB,aAAOS;IACT;AAEA,IAAMzP,OAAOA,CAAC8O,SAAgC3U,SAA8B;AAE1E,YAAMwV,eAAe9P,SAASiP,OAAO;AAErC,YAAMU,MAAM;QACV1P,QAAQA,OAAO6P,cAAcxV,IAAI;QACjC4F,WAAW7E;;AAEbsU,UAAIzP,YAAYA,UAAU4P,cAAcH,GAAG;AAE3C,aAAOG,aAAaV,OAAOO,MAAMA,IAAIzP;IACvC;ACrCA,IAAME,eAAN,cAA2B2P,4BAAY;MAarC7F,YAAA8F,MAAuF;AAAA,YAA3E;UAAErT;UAAKsT;UAAQxT;QAA4D,IAAAuT;AACrF,cAAK;AAAG3F,wBAAA,MAAA,OAAA,MAAA;AAAAA,wBAAA,MAAA,UAAA,MAAA;AAAAA,wBAAA,MAAA,YAAA,MAAA;AAAAA,wBAAA,MAAA,UAAA,MAAA;AAAAA,wBAAA,MAAA,eAAA,MAAA;AAAAA,wBAAA,MAAA,iBAAA,MAAA;AACR,aAAK1N,MAAMA;AACX,aAAKsT,SAASA,UAAU;AACxB,aAAKxT,WAAWA,YAAYxB,iBAAgB;AAC5C,aAAKE,SAASE;AACd,aAAK6U,cAAc7U;AACnB,aAAK8U,gBAAgB;AACrB,aAAKC,YAAW;MAClB;MAEAA,cAAW;AACT,aAAKF,cAAcG,OACjBC,YAAY,MAAK;AACf,cAAI,KAAKnV,UAAU,KAAKA,OAAOoV,QAAQ;AACrCC,0BAAc,KAAKN,WAAW;AAC9B,gBAAI,CAAC,KAAKC,eAAe;AACvB,mBAAKnV,KAAK,OAAO;YAClB;AACD,iBAAKmV,gBAAgB;AACrB,iBAAKhV,SAASE;UACf;AACD,cAAI,KAAKF,WAAWE;AAAWmV,0BAAc,KAAKN,WAAW;WAC5D,GAAG,CAAC;MAEX;MAEAO,OAAI;;AACF,aAAKtV,SAASA,OAAOsV,KAAK,KAAK9T,IAAIW,MAAM,KAAK2S,QAAQ,KAAKxT,QAAQ;AACnE,aAAI,UAAKtB,WAAL,mBAAauV;AAAO,eAAKvV,OAAOuV,MAAK;MAC3C;MAEAnJ,QAAK;AACH,aAAK4I,gBAAgB;AACrB,YAAI,KAAKhV;AAAQ,eAAKA,OAAOoM,MAAK;MACpC;MAEAoJ,SAASC,2BAAkC;AACzC,YAAIA,2BAA2B;AAC7BzV,iBAAO0V,SAASC,QAAQ,KAAKnU,IAAIW,IAAI;QACtC,OAAM;AACLnC,iBAAO0V,SAASvT,OAAO,KAAKX,IAAIW;QACjC;MACH;IACD;AClCD,IAAM+C,cAAelF,CAAAA,YAAkB;AACrC,YAAM;QAAE1B,UAAAA;MAAU,IAAG0B;AAErB,YAAM4V,WAAWtX,UAAS4D,cAA+B,sCAAsC;AAC/F,UAAI0T,UAAU;AACZ,eAAOA,SAAS3L;MACjB;AAED,YAAM4L,YAAYvX,UAAS4D,cAA+B,2BAA2B;AACrF,UAAI2T,WAAW;AACb,eAAOA,UAAU5L;MAClB;AAED,UAAI3L,UAASwX,SAASxX,UAASwX,MAAMvL,SAAS,GAAG;AAC/C,eAAOjM,UAASwX;MACjB;AAED,aAAO9V,QAAO0V,SAASK;IACzB;AA2BA,IAAMlT,kBAAkB,aAAa;MACnCmT,MAAM9Q,YAAYlF,MAAM;MACxBiC,MAAM,MAAMD,YAAYhC,MAAM;IAC/B;;AClCD,IAAMmF,mBAAmB;MACvB,CAAC5B,eAAeiC,MAAM,GAAG;MACzB,CAACjC,eAAekC,QAAQ,GAAG;MAC3B,CAAClC,eAAeoC,MAAM,GAAG;MACzB,CAACpC,eAAemC,MAAM,GAAG;MACzB,CAACnC,eAAeqC,OAAO,GAAG;;AAG5B,IAAMR,kBAAkB;AAExB,IAAMC,6BAA6B;AAEnC,IAAMC,iBAAiB,CACrB,uBACA,qBACA,wBACA,wBACA,iBACA,8BACA,eACA,2BACA,4BAA4B;AAI9B,KAAC,eAAe2Q,gBAAa;AAC3B,UAAI;AACF,YAAI,OAAO3X,aAAa;AAAa;AACrC,cAAM4X,kBAAkB5X,SAASqD,cAAc,MAAM;AACrD,cAAM;UAAEgM;QAAU,IAAG,MAAMtJ,YAAY,cAAc;UAAE8R,OAAO;UAAOC,MAAMhR;UAAiByI,SAAS;QAAI,CAAA;AACzGqI,wBAAgB/T,OAAU,GAAAwL,QAAAA;AAC1BuI,wBAAgBG,cAAc;AAC9BH,wBAAgBlE,OAAO;AACvBkE,wBAAgBI,MAAM;AACtB,YAAIJ,gBAAgBK,WAAWL,gBAAgBK,QAAQC,UAAU;AAC/D,cAAIN,gBAAgBK,QAAQC,SAAS,UAAU,GAAG;AAChDlY,qBAASmY,KAAKC,YAAYR,eAAe;UAC1C;QACF;eACMpX,OAAO;AACdO,QAAAA,KAAIM,KAAKb,KAAK;MACf;IACH,GAAC;AAED,IAAMyG,QAAN,MAAW;MAqDTwJ,cAAgJ;AAAA,YAApI;UAAE4H,iBAAiB9S,gBAAgBqD;UAAa0P,aAAa;UAAIC,cAAc;UAAOC,SAAS;wEAAmC,CAAA,IAAA,CAAA;AAAE5H,wBAAA,MAAA,kBApDzGrL,gBAAgBqD,WAAW;AAAAgI,wBAAA,MAAA,cAAA,MAAA;AAAAA,wBAAA,MAAA,YAAA,MAAA;AAAAA,wBAAA,MAAA,eAAA,MAAA;AAAAA,wBAAA,MAAA,aAAA,MAAA;AAAAA,wBAAA,MAAA,cAAA,MAAA;AAAAA,wBAAA,MAAA,iBAAA,MAAA;AAAAA,wBAAA,MAAA,yBAAA,MAAA;AAAAA,wBAAA,MAAA,cAAA,MAAA;AAAAA,wBAAA,MAAA,UAAA,MAAA;AAAAA,wBAAA,MAAA,eAAA,MAAA;AAAAA,wBAAA,MAAA,eAAA,MAAA;AAAAA,wBAAA,MAAA,uBAAA,MAAA;AAAAA,wBAAA,MAAA,sBAAA,MAAA;AAAAA,wBAAA,MAAA,cAAA,MAAA;AAAAA,wBAAA,MAAA,qBAAA,MAAA;AAAAA,wBAAA,MAAA,mBAAA,MAAA;AAAAA,wBAAA,MAAA,qBAAA,MAAA;AAAAA,wBAAA,MAAA,YAAA,MAAA;AAAAA,wBAAA,MAAA,YAAA,MAAA;AAAAA,wBAAA,MAAA,oBAAA,MAAA;AAAAA,wBAAA,MAAA,mBAAA,MAAA;AAAAA,wBAAA,MAAA,oBA4C/C6H,cAAchT,gBAAgB;AAAAmL,wBAAA,MAAA,aAE7B,EAAE;AAAAA,wBAAA,MAAA,oBAAA,MAAA;AAAAA,wBAAA,MAAA,iBAIE,KAAK;AAG3B,aAAKyH,iBAAiBA;AACtB,aAAKC,aAAaA;AAClB,aAAKjJ,WAAW;AAChB,aAAKqJ,aAAa;AAClB,aAAKC,gBAAgB;AACrB,aAAKC,wBAAwB;AAC7B,aAAKC,oBAAoB;AACzB,aAAKC,kBAAkB;AAOvB,aAAKN,SAASA;AACdO,kBAAUP,MAAM;AAChB,aAAKD,cAAcA;AACnB,aAAKS,cAAcT,cAAc;AACjC,aAAKU,qBAAqB;MAC5B;MAEA,MAAMC,OAwBa;AAAA,YAxBR;UACT9J,WAAW9J,gBAAgB8C;UAC3B+Q,gBAAgB;;UAEhBC,mBAAmBvS;UACnBwS,UAAU;YACRC,MAAM;YACN7L,SAAS;YACT8L,aAAa;YACbC,eAAe;YACfC,QAAQ;YACRC,YAAY;;UAEdC,cAAc,CAAA;UACdC,kBAAkB;UAClBnT,WAAAA,aAAY;YACVoR,OAAO;YACPC,MAAMhR;YACNyI,SAAS;;UAEXsK;UACAC,WAAW;UACXC,mBAAmB;UACnBC,WAAW;wEACI,CAAA,IAAA,CAAA;AACf,YAAI,KAAKrB;AAAe,gBAAM,IAAI1H,MAAM,qBAAqB;AAC7D,cAAM;UAAE5B;UAAUC;QAAU,IAAG,MAAMvJ,YAAYqJ,UAAU3I,UAAS;AACpE1F,QAAAA,KAAIwM,KAAK8B,UAAU,YAAY;AAC/B,aAAKA,WAAWA;AAChB,aAAKwK,aAAaA;AAClB,aAAKE,mBAAmBA;AACxB,aAAKE,gBAAgB,CAAC,EAAEN,eAAe9O,OAAOuD,KAAKuL,WAAW,EAAE1N,SAAS,MAAM,CAAC,EAAE4N,cAAchP,OAAOuD,KAAKyL,UAAU,EAAE5N,SAAS;AAEjIlL,QAAAA,KAAImZ,gBAAgB5K,QAAQ;AAC5B,YAAI6J;AAAepY,UAAAA,KAAIoZ,UAAS;;AAC3BpZ,UAAAA,KAAIqZ,WAAU;AACnB,aAAKxB,wBAAwBgB;AAC7B,cAAMS,iBAAiB,IAAIC,IAAIjL,QAAQ;AACvC,YAAIgL,eAAeE,SAASC,SAAS,GAAG;AAAGH,yBAAeE,YAAY;;AACjEF,yBAAeE,YAAY;AAEhCF,uBAAevC,OAAO,kBAAkB,KAAKmC,aAAAA;AAG7C,aAAKQ,cAAc7U,cACjB;;gBAEUmU,mBAAmB,WAAW,EAAE;;eAEjCM,eAAexW,IAAI;;iEAE+B,KAAK0U,WAAW;iBAChE;AAGb,aAAKmC,sBAAsB9U,cAA8B,sCAAsC;AAC/F,aAAK8U,oBAAoBC,MAAMjR,UAAU;AACzC,aAAKgR,oBAAoBC,MAAMC,YAAY,WAAW,KAAK5B,YAAYtK,SAAQ,CAAE;AAEjF,cAAMmM,OAAOnZ,OAAO1B,SAASqD,cAAc,MAAM;AACjDwX,aAAKC,aAAa,OAAO,YAAY;AACrCD,aAAKC,aAAa,QAAQ,UAAU;AACpCD,aAAKC,aAAa,QAAW,GAAAzL,QAAyB,iBAAA;AACtD,aAAK0L,YAAYF;AAEjB,cAAM;UAAEG,kBAAkBhV,gBAAe;UAAIiV,qBAAqB,CAAA;QAAE,IAAK,KAAKpB,cAAc,CAAA;AAC5F,cAAMqB,yBAAqBC,cAAAA,SAAU1C,cAAc/S,cAAcuV,kBAAkB;AACnF,cAAMG,uBAAuBF,mBAAmBF,eAAe,KAAKvC,cAAc/S,aAAaM,gBAAe,CAAE;AAChH,aAAKqV,oBAAoBD,qBAAqBnR;AAE9C,cAAMqR,cAAc,YAAW;AAC7B,gBAAMzb,cAAa;AACnB,iBAAO,IAAIC,QAAQ,CAACC,SAASoD,WAAU;AACrC,iBAAKsX,YAAYnX,SAAS,YAAW;AAEnC,mBAAKiY,WAAU;AACf,oBAAMC,aAAa,KAAKC,iBAAiBC,UAAU,aAAa;AAChEF,yBAAWhP,GAAG,QAASF,WAAS;AAC9B,sBAAM;kBAAEoL;kBAAM7W;kBAAML;gBAAK,IAAK8L;AAC9B,oBAAIoL,SAAS,mBAAmB7W,KAAK8a,SAAS;AAE5C,uBAAKhD,gBAAgB;AACrB,uBAAKiD,eAAe,KAAK3C,kBAAkB;AAC3ClZ,0BAAQ6B,MAAS;2BACRpB,OAAO;AAChB2C,yBAAO,IAAI8N,MAAMzQ,KAAK,CAAC;gBACxB;cACH,CAAC;AACDgb,yBAAWK,MAAM;gBACfnE,MAAM;gBACN7W,MAAM;kBACJuY;kBACAO;kBACAE,YAAY,KAAKA;kBACjBxB,gBAAgB,KAAKA;kBACrBC,YAAY,KAAKA;kBACjBM,uBAAuB,KAAKA;kBAC5BJ,QAAQ,KAAKA;kBACbsB;kBACAT;kBACAW;gBACD;cACF,CAAA;;AAEHtY,mBAAO1B,SAASmY,KAAKC,YAAY,KAAK2C,SAAS;AAC/CrZ,mBAAO1B,SAASkL,KAAKkN,YAAY,KAAKqC,WAAW;AACjD/Y,mBAAO1B,SAASkL,KAAKkN,YAAY,KAAKsC,mBAAmB;UAC3D,CAAC;;AAGH,YAAItL,aAAa,gBAAgB3I,WAAUoR,OAAO;AAEhD,gBAAMiE,WAAc,GAAAzM,QAAAA;AACpB,gBAAM0M,OAAO,MAAMC,MAAMF,UAAU;YAAEG,OAAO;UAAQ,CAAE;AACtD,cAAIF,KAAKG,QAAQxM,IAAI,eAAe,MAAM3I,4BAA4B;AACpE,kBAAM,IAAIkK,MAAM,yCAAyC8K,KAAKG,QAAQxM,IAAI,eAAe,CAAC,EAAE;UAC7F;AACD,gBAAMD,WAAW,MAAMsM,KAAKI,KAAI;AAChC,gBAAMC,sBAAsBC,KAC1B;YACE5G,YAAY,CAAC,QAAQ;aAEvBhG,QAAQ;AAEV1O,UAAAA,KAAIwM,KAAK6O,qBAAqB,WAAW;AACzC,cAAIA,wBAAwB3V,WAAUqR,MAAM;AAC1C,kBAAMwD,YAAW;UAClB,OAAM;AACL,iBAAKgB,UAAS;AACd,kBAAM,IAAIrL,MAAM,wBAAwB;UACzC;QACF,OAAM;AACL,gBAAMqK,YAAW;QAClB;AACD,eAAO1Z;MACT;MAEA2a,QAA0E;AAAA,YAApE;UAAEC,WAAW;UAAIC,YAAYC,YAAY;QAAE,IAAA1Q,UAAAC,SAAAD,KAAAA,UAAApK,CAAAA,MAAAA,SAAAoK,UAAuB,CAAA,IAAA,CAAA;AACtE,YAAI,CAAC,KAAK2M;AAAe,gBAAM,IAAI1H,MAAM,mBAAmB;AAC5D,aAAK4H,oBAAoB2D;AACzB,aAAKE,YAAYA;AACjB,eAAO,KAAKC,SAAS9L,OAAM;MAC7B;MAEA+L,SAAM;AACJ,eAAO,IAAI9c,QAAQ,CAACC,SAASoD,WAAU;AACrC,cAAI,CAAC,KAAKuV,YAAY;AACpBvV,mBAAO,IAAI8N,MAAM,4BAA4B,CAAC;AAC9C;UACD;AAED,gBAAM4L,eAAe,KAAKpB,iBAAiBC,UAAU,QAAQ;AAC7DmB,uBAAahB,MAAM;YAAEnE,MAAM;UAAU,CAAA;AACrC,gBAAMoF,eAAe,KAAKrB,iBAAiBC,UAAU,QAAQ;AAC7D,gBAAMqB,sBAAuBC,YAAU;AACrC,gBAAI,CAACA,OAAOC,UAAU;AACpB,mBAAKvE,aAAa;AAClB,mBAAKI,kBAAkB;AACvB,mBAAKD,oBAAoB;AACzB9Y,sBAAO;;AACFoD,qBAAO,IAAI8N,MAAM,oBAAoB,CAAC;;AAE/CpL,uBAAaiX,cAAc,QAAQC,mBAAmB;QACxD,CAAC;MACH;MAEA,MAAMG,UAAO;AACX,YAAI,KAAKxE,YAAY;AACnB,gBAAM,KAAKkE,OAAM;QAClB;AACD,aAAKN,UAAS;MAChB;MAEAA,YAAS;AACP,iBAASa,UAAUC,SAAgB;AACjC,iBAAOA,mBAAmBC,WAAWD,mBAAmBE;QAC1D;AACA,YAAIH,UAAU,KAAKpC,SAAS,KAAKrZ,OAAO1B,SAASkL,KAAKqS,SAAS,KAAKxC,SAAS,GAAG;AAC9E,eAAKA,UAAUyC,OAAM;AACrB,eAAKzC,YAAYnZ;QAClB;AACD,YAAIub,UAAU,KAAK1C,WAAW,KAAK/Y,OAAO1B,SAASkL,KAAKqS,SAAS,KAAK9C,WAAW,GAAG;AAClF,eAAKA,YAAY+C,OAAM;AACvB,eAAK/C,cAAc7Y;QACpB;AACD,YAAIub,UAAU,KAAKzC,mBAAmB,KAAKhZ,OAAO1B,SAASkL,KAAKqS,SAAS,KAAK7C,mBAAmB,GAAG;AAClG,eAAK+C,aAAa7b;AAClB,eAAK8Y,oBAAoB8C,OAAM;AAC/B,eAAK9C,sBAAsB9Y;QAC5B;AACD,aAAK+W,gBAAgB;MACvB;MAEA+E,kBAAe;AACb,aAAK9E,wBAAwB;AAC7B,aAAK+E,4BAA4B,KAAK;AACtC,aAAK/B,eAAc;MACrB;MAEAhC,kBAAe;AACb,aAAKhB,wBAAwB;AAC7B,aAAK+E,4BAA4B,IAAI;AACrC,aAAK/B,eAAc;MACrB;MAEAgC,YAAWrH,MAAkF;AAAA,YAAjF;UAAE+C,OAAO;UAAW7L,UAAU;UAAM8L,cAAc;QAA+B,IAAAhD,MAAxBsH,OAAIC,yBAAAvH,MAAAwH,SAAA;AACvE,eAAO,IAAIje,QAAQ,CAACC,SAASoD,WAAU;AACrC,gBAAM6a,uBAAuB,KAAKvC,iBAAiBC,UAAU,iBAAiB;AAC9E,gBAAM5P,UAAWQ,WAAS;AACxB,kBAAM;cAAEmI;cAAKkH;gBAAYrP,MAAMzL;AAC/BE,YAAAA,KAAIwM,KAAKjB,KAAK;AACd,gBAAImI,KAAK;AACPtR,qBAAOsR,GAAG;uBACDkH,SAAS;AAClB5b,sBAAO;;AACFoD,qBAAO,IAAI8N,MAAM,oBAAoB,CAAC;;AAE/CpL,uBAAamY,sBAAsB,QAAQlS,OAAO;AAClD,gBAAMmS,oBAAoBtZ,qBAAoB;AAC9C,eAAKuZ,cAAcD,mBAAmB;YACpCzH,QAAQ;YACRxT,UAAUkD;UACX,CAAA;AACD8X,+BAAqBnC,MAAM;YACzBnE,MAAM;YACN7W,MAAM;cACJwY,SAAOhI,eAAA;gBACLiI;gBACA7L;gBACA8L;cAAW,GACRsE,IAAI;cAETI;cACAE,UAAU;YACX;UACF,CAAA;QACH,CAAC;MACH;MAEAC,WAAWC,MAAsD;AAAA,YAAnCzZ,SAAAoH,UAAAC,SAAA,KAAAD,UAAA,CAAA,MAAApK,SAAAoK,UAAA,CAAA,IAAiC,CAAA;AAC7D,cAAMsS,mBAAmB,KAAK7C,iBAAiBC,UAAU,aAAa;AACtE,cAAM6C,YAAYF,OAAW,IAAAA,IAAM,KAAG;AACtCC,yBAAiBzC,MAAM;UAAEnE,MAAM;UAAe7W,MAAM;YAAEwd,MAAME;UAAW;QAAA,CAAE;AAEzE,cAAMC,oBAAqBlS,WAAS;AAClC,cAAIA,MAAMoL,SAAS,wBAAwB;AAEzC,kBAAM;cAAE+G;gBAAenS,MAAMzL;AAC7B,kBAAM6d,WAAW,IAAIpE,IAAI,GAAG,KAAKjL,QAAQ,UAAUkP,SAAS,EAAE;AAE9DG,qBAASC,aAAaC,OAAO,aAAa,MAAM;AAChDF,qBAASC,aAAaC,OAAO,cAAcH,UAAU;AACrD5T,mBAAOuD,KAAKxJ,MAAM,EAAEiR,QAASgJ,OAAK;AAChCH,uBAASC,aAAaC,OAAOC,GAAGja,OAAOia,CAAC,CAAC;YAC3C,CAAC;AACDH,qBAAS5G,OAAO,kBAAkB,KAAKmC,aAAAA;AAEvC,kBAAM6E,eAAe,IAAInY,aAAa;cAAEzD,KAAKwb;cAAU1b,UAAUmD;YAA8B,CAAE;AACjG2Y,yBAAa9H,KAAI;UAClB;;AAGHnR,qBAAayY,kBAAkB,QAAQE,iBAAiB;MAC1D;MAEA,MAAMO,iBAAgBC,OAA2D;AAAA,YAA1D;UAAExC;UAAUyC;UAAYC,aAAa;QAAqB,IAAAF;AAC/E,YAAI,CAACvG,cAAc7N,sBAAsBgE,SAAS4N,QAAQ,KAAK,CAACrX,8BAA8BqX,QAAQ;AAAG,gBAAM,IAAIvL,MAAM,sBAAsB;AAC/I,cAAMkO,iBAAiB3C;AACvB,cAAM4C,oBAAoBja,8BAA8BqX,QAAQ;AAChE,cAAMtZ,MAAM,IAAIoX,IAAI,iCAAiC;AACrDpX,YAAIyb,aAAaC,OAAO,YAAYQ,iBAAiB;AACrDlc,YAAIyb,aAAaC,OAAO,cAAcK,UAAU;AAChD/b,YAAIyb,aAAaC,OAAO,kBAAkBO,cAAc;AACxDjc,YAAIyb,aAAaC,OAAO,WAAW,SAAS;AAC5C1b,YAAIyb,aAAaC,OAAO,cAAcM,WAAWxQ,SAAQ,CAAE;AAC3D,eAAOgB,IACLxM,IAAIW,MACJ;UACEqY,SAAS;YACP,gBAAgB;UACjB;QACF,GACD;UAAEvM,WAAW;QAAI,CAAE;MAEvB;MAEA0P,YAAYze,SAAe;AACzB,eAAO,IAAId,QAAQ,CAACC,SAASoD,WAAU;AACrC,cAAI,KAAKuV,YAAY;AACnB,kBAAM4G,uBAAuB,KAAK7D,iBAAiBC,UAAU,kBAAkB;AAC/E4D,iCAAqBzD,MAAM;cAAEnE,MAAM;YAA4B,CAAA;AAC/D,kBAAM6H,wBAAyBjT,WAAS;AACtC,oBAAM;gBACJoL;gBACA7W,MAAM;kBAAE2e;kBAAU/L;kBAASgM;kBAAUC;;cACtC,IAAGpT;AACJ,kBAAIoL,SAAS,6BAA6B;AACxC,oBAAI8H,UAAU;AACZzf,0BAAQ0T,OAAO;2BACNgM,UAAU;AACnBtc,yBAAO,IAAI8N,MAAM,2BAA2B,CAAC;2BACpCyO,YAAY;AACrB,wBAAMC,iBAAiB,KAAKlE,iBAAiBC,UAAU,WAAW;AAClE,wBAAMkE,kBAAmBC,kBAAgB;AACvC,wBAAIA,aAAanI,SAAS,sBAAsB;AAC9C,0BAAImI,aAAahf,KAAK2e,UAAU;AAC9Bzf,gCAAQ8f,aAAahf,KAAK4S,OAAO;sBAClC,OAAM;AACLtQ,+BAAO,IAAI8N,MAAM,2BAA2B,CAAC;sBAC9C;oBACF;;AAEHpL,+BAAa8Z,gBAAgB,QAAQC,eAAe;AACpD,wBAAM3B,oBAAoBtZ,qBAAoB;AAC9C,uBAAKuZ,cAAcD,mBAAmB;oBACpCzH,QAAQ;oBACRxT,UAAUkD;kBACX,CAAA;AACDyZ,iCAAe9D,MAAM;oBAAEnE,MAAM;oBAAqB7W,MAAM;sBAAED;sBAASqd;oBAAmB;kBAAA,CAAE;gBACzF;cACF;;AAEHpY,yBAAayZ,sBAAsB,QAAQC,qBAAqB;;AAC3Dpc,mBAAO,IAAI8N,MAAM,4BAA4B,CAAC;QACvD,CAAC;MACH;MAEA6O,cAAcxgB,UAAiCsF,QAAqB;AAClE,eAAO,IAAI9E,QAAQ,CAACC,SAASoD,WAAU;AACrC,cAAI,KAAKwV,eAAe;AACtB,kBAAM;cAAE5T;cAAQoJ;YAAS,IAAGrI,wBAAwBxG,UAAUsF,MAAM;AACpE,gBAAI,CAACuJ,SAAS;AACZhL,qBAAO,IAAI8N,MAAM8O,KAAKC,UAAUjb,MAAM,CAAC,CAAC;AACxC;YACD;AACD,kBAAMkb,cAAc,KAAKxE,iBAAiBC,UAAU,OAAO;AAC3D,kBAAMwE,eAAgB5T,WAAS;AAC7B,kBAAIA,MAAMoL,SAAS,kBAAkB;AACnC,oBAAIpL,MAAMzL,KAAK8a,SAAS;AACtB5b,0BAAQuM,MAAMzL,KAAK8a,OAAO;gBAC3B,OAAM;AACLxY,yBAAO,IAAI8N,MAAM3E,MAAMzL,KAAKL,KAAK,CAAC;gBACnC;cACF;;AAEHqF,yBAAaoa,aAAa,QAAQC,YAAY;AAC9C,kBAAMjC,oBAAoBtZ,qBAAoB;AAC9C,iBAAKuZ,cAAcD,iBAAiB;AACpCgC,wBAAYpE,MAAM;cAAEnE,MAAM;cAAiB7W,MAAM;gBAAEvB;gBAAUsF;gBAAQqZ;cAAmB;YAAA,CAAE;;AACrF9a,mBAAO,IAAI8N,MAAM,8BAA8B,CAAC;QACzD,CAAC;MACH;MAEA,MAAMkP,oBAAoBC,aAA0E;AAClG,cAAM;UAAEC;UAAYC;QAAU,IAAGF;AACjC,eAAO,IAAItgB,QAAQ,CAACC,SAASoD,WAAU;AACrC,cAAI,KAAKwV,eAAe;AACtB,gBAAI4H,OAAOxc,KAAKsc,YAAY,KAAK,EAAEpU,WAAW,IAAI;AAChD9I,qBAAO,IAAI8N,MAAM,0EAA0E,CAAC;AAC5F;YACD;AACD,kBAAMuP,qBAAqB,KAAK/E,iBAAiBC,UAAU,wBAAwB;AACnF,kBAAM+E,eAAgBnU,WAAS;AAC7B,kBAAIA,MAAMoL,SAAS,mCAAmC;AACpD,oBAAIpL,MAAMzL,KAAK8a,SAAS;AACtB5b,0BAAQuM,MAAMzL,KAAK8a,OAAO;gBAC3B,OAAM;AACLxY,yBAAO,IAAI8N,MAAM3E,MAAMzL,KAAKL,KAAK,CAAC;gBACnC;cACF;;AAEHqF,yBAAa2a,oBAAoB,QAAQC,YAAY;AACrDD,+BAAmB3E,MAAM;cAAEnE,MAAM;cAAkC7W,MAAM;gBAAEwf;gBAAYC;cAAU;YAAA,CAAE;;AAC9Fnd,mBAAO,IAAI8N,MAAM,8BAA8B,CAAC;QACzD,CAAC;MACH;MAEA,MAAMyP,2BAAwB;AAC5B,YAAI,CAAC,KAAK3G;AAAkB,gBAAM,IAAI9I,MAAM,uFAAuF;AACnI,eAAO,IAAInR,QAAQ,CAACC,SAASoD,WAAU;AACrC,cAAI,KAAKuV,YAAY;AACnB,kBAAMiI,sBAAsB,KAAKlF,iBAAiBC,UAAU,uBAAuB;AACnF,kBAAMkF,uBAAwBtU,WAAS;AACrC,kBAAIA,MAAMoL,SAAS,6BAA6B;AAC9C,oBAAIpL,MAAMzL,KAAK8a,SAAS;AACtB5b,0BAAQuM,MAAMzL,KAAK8a,OAAO;gBAC3B,OAAM;AACLxY,yBAAO,IAAI8N,MAAM3E,MAAMzL,KAAKL,KAAK,CAAC;gBACnC;AACD,qBAAKob,eAAc;cACpB;;AAEH/V,yBAAa8a,qBAAqB,QAAQC,oBAAoB;AAC9DD,gCAAoB9E,MAAM;cAAEnE,MAAM;YAA6B,CAAA;AAC/D,iBAAKkE,eAAe,IAAI;;AACnBzY,mBAAO,IAAI8N,MAAM,4BAA4B,CAAC;QACvD,CAAC;MACH;MAEUiN,cAAcD,mBAA+G;AAAA,YAApF;UAAE/a;UAAKsT;UAAQxT;QAAQ,IAAAgJ,UAAAC,SAAAD,KAAAA,UAAApK,CAAAA,MAAAA,SAAAoK,UAA2D,CAAA,IAAA,CAAA;AACnI,YAAIiS,mBAAmB;AACrB,gBAAM4C,eAAe,KAAKpF,iBAAiBC,UAAU,QAAQ;AAC7D,gBAAMgD,WAAW,IAAIpE,IAAIpX,OAAU,GAAA,KAAKmM,QAAQ,+BAA+B4O,iBAAiB,EAAE;AAClG,cAAIS,SAAS5G;AAAM4G,qBAAS5G,QAAQ,kBAAkB,KAAKmC,aAAAA;;AACtDyE,qBAAS5G,OAAO,kBAAkB,KAAKmC,aAAAA;AAE5C,gBAAM6G,gBAAgB,IAAIna,aAAa;YAAEzD,KAAKwb;YAAUlI;YAAQxT;UAAQ,CAAE;AAC1E8d,wBAAc9J,KAAI;AAClB,cAAI,CAAC8J,cAAcpf,QAAQ;AACzB,iBAAKqf,uBAAuB9C,mBAAmBS,SAAS7a,IAAI;AAC5D;UACD;AACDgd,uBAAahF,MAAM;YACjBnE,MAAM;YACN7W,MAAM;cACJod;YACD;UACF,CAAA;AACD,gBAAM+C,eAAeC,WAA6C;AAAA,gBAA5C;cAAEhD,mBAAmBiD;cAAYpT;YAAO,IAAAmT;AAC5D,gBAAIC,eAAejD,qBAAqBnQ,OAAO;AAC7CgT,4BAAchT,MAAK;AACnB+S,2BAAatU,eAAe,QAAQyU,YAAY;YACjD;;AAEHH,uBAAarU,GAAG,QAAQwU,YAAY;AACpCF,wBAAc9M,KAAK,SAAS,MAAK;AAC/B6M,yBAAahF,MAAM;cACjBhb,MAAM;gBACJod;gBACAnH,QAAQ;cACT;YACF,CAAA;AACD+J,yBAAatU,eAAe,QAAQyU,YAAY;UAClD,CAAC;QACF;MACH;MAEUG,oBAAoB/D,SAAoB;AAEhD,cAAM;UAAEgE;QAAO,IAAG,KAAKvH,cAAc,CAAA;AACrC,YAAIuH,OAAO;AACT,gBAAM;YAAEC,SAAS;YAAOC,SAAS,CAAA;UAAE,IAAKF;AACxC,cAAIC;AAAQjE,oBAAQmE,UAAUC,IAAI,YAAY;AAE9C,cAAIF,OAAOG;AAAarE,oBAAQzC,MAAMC,YAAY,mBAAmB0G,OAAOG,WAAW;AACvF,cAAIH,OAAOI;AAAYtE,oBAAQzC,MAAMC,YAAY,kBAAkB0G,OAAOI,UAAU;QACrF;MACH;MAEUC,cAAW;;AACnB,YAAIC,UAAU,GAAG,KAAKvS,QAAAA;AACtB,aAAI,gBAAKwK,eAAL,mBAAiBuH,UAAjB,mBAAwBC,QAAQ;AAClCO,sBAAU,UAAK/H,eAAL,mBAAiBgI,cAAaD;QACzC,OAAM;AACLA,sBAAU,UAAK/H,eAAL,mBAAiBiI,aAAYF;QACxC;AAED,eAAOA;MACT;MAEUjE,4BAA4BX,QAAe;AACnD,cAAM+E,8BAA8B,KAAKtG,iBAAiBC,UAAU,yBAAyB;AAC7FqG,oCAA4BlG,MAAM;UAChChb,MAAMmc;QACP,CAAA;MACH;MAEUpB,iBAA6B;AAAA,YAAdoG,SAAMhW,UAAAC,SAAA,KAAAD,UAAA,CAAA,MAAApK,SAAAoK,UAAA,CAAA,IAAG;AAChC,cAAM2O,QAAsC,CAAA;AAC5C,cAAMsH,OAAO,KAAK3J,aAAa;AAE/B,YAAI,CAAC0J,QAAQ;AACXrH,gBAAMjR,UAAU,KAAKkP,wBAAwB,UAAU;AACvD+B,gBAAMnY,SAAY,GAAAyf,IAAAA;AAClBtH,gBAAMxY,QAAW,GAAA8f,IAAAA;AACjB,kBAAQ,KAAK5J,gBAAc;YACzB,KAAK9S,gBAAgBsD;AACnB8R,oBAAM5X,MAAM;AACZ4X,oBAAM/X,OAAO;AACb+X,oBAAMuH,QAAQ;AACdvH,oBAAMwH,SAAS;AACf;YACF,KAAK5c,gBAAgBwD;AACnB4R,oBAAM5X,MAAM;AACZ4X,oBAAMuH,QAAQ;AACdvH,oBAAM/X,OAAO;AACb+X,oBAAMwH,SAAS;AACf;YACF,KAAK5c,gBAAgBuD;AACnB6R,oBAAMwH,SAAS;AACfxH,oBAAMuH,QAAQ;AACdvH,oBAAM5X,MAAM;AACZ4X,oBAAM/X,OAAO;AACb;YACF,KAAK2C,gBAAgBqD;YACrB;AACE+R,oBAAMwH,SAAS;AACfxH,oBAAM/X,OAAO;AACb+X,oBAAM5X,MAAM;AACZ4X,oBAAMuH,QAAQ;AACd;UAAM;QAEX,OAAM;AACLvH,gBAAMjR,UAAU;AAChBiR,gBAAMxY,QAAQ;AACdwY,gBAAMnY,SAAS;AACfmY,gBAAM5X,MAAM;AACZ4X,gBAAMuH,QAAQ;AACdvH,gBAAM/X,OAAO;AACb+X,gBAAMwH,SAAS;QAChB;AACDtX,eAAOuX,OAAO,KAAK3H,YAAYE,OAAOA,KAAK;AAC3C,aAAK1B,qBAAqB+I;MAC5B;MAEUzG,aAAU;AAClBxa,QAAAA,KAAIwM,KAAK,mBAAmB;AAE5B,cAAM8U,iBAAiB,IAAIC,sBAAsB;UAC/C5K,MAAM;UACNlB,QAAQ;UACR+L,cAAc,KAAK9H,YAAY+H;UAC/BC,cAAc,IAAInI,IAAI,KAAKjL,QAAQ,EAAEqT;QACtC,CAAA;AAKD,cAAMC,sBAAsB,IAAIL,sBAAsB;UACpD5K,MAAM;UACNlB,QAAQ;UACR+L,cAAc,KAAK9H,YAAY+H;UAC/BC,cAAc,IAAInI,IAAI,KAAKjL,QAAQ,EAAEqT;QACtC,CAAA;AAMD,cAAME,iBAAiB,IAAItc,oBAAoB+b,cAAc;AAG7D,cAAMQ,wCAAyCC,OAAK;AAClD,gBAAMC,iBAAiBH,eAAeE,CAAC;AACvCF,yBAAeE,CAAC,IAAI,SAASE,aAAaziB,QAAe;AACvD,gBAAIA,UAAUA,WAAW,uBAAuB;AAC9C,qBAAOqiB,eAAe/R,OAAM;YAC7B;AAAA,qBAAA9E,OAAAC,UAAAC,QAHkD2H,OAAI,IAAA9P,MAAAiI,OAAAA,IAAAA,OAAA,IAAA,CAAA,GAAAI,OAAA,GAAAA,OAAAJ,MAAAI,QAAA;AAAJyH,mBAAIzH,OAAAH,CAAAA,IAAAA,UAAAG,IAAA;YAAA;AAIvD,mBAAO4W,eAAeE,MAAM,MAAM,CAAC1iB,QAAQ,GAAGqT,IAAI,CAAC;;;AAIvDiP,8CAAsC,MAAM;AAC5CA,8CAAsC,WAAW;AAEjDD,uBAAe/R,SAAS,MAAK;AAC3B,iBAAO,IAAI/Q,QAAQ,CAACC,SAASoD,WAAU;AAErCyf,2BAAevQ,UAAU;cAAE5N,SAAS;cAAOC,IAAIC,qBAAoB;cAAIpE,QAAQ;cAAuBqE,QAAQ,CAAA;YAAE,GAAI,CAAC6P,KAAKhF,aAAY;AACpI,oBAAM;gBAAEe,QAAQnQ;kBAASoP,YAAoC,CAAA;AAC7D,kBAAIgF,KAAK;AACPyO,2BAAW,MAAK;AACd/f,yBAAOsR,GAAG;mBACT,EAAE;cACN,WAAU3Q,MAAMyM,QAAQlQ,GAAG,KAAKA,IAAI4L,SAAS,GAAG;AAG/C,sBAAMkX,gBAAgBA,MAAK;AACzB,sBAAI,KAAKtK,sBAAsB,MAAM,KAAKC,oBAAoB,KAAKD,mBAAmB;AACpF,0BAAM;sBAAEA;oBAAmB,IAAG;AAE9B,yBAAK+D,OAAM,EAERzR,KAAMiY,OAAK;AACV,2BAAKvK,oBAAoBA;AACzB,2BAAKwK,gBAAgB,MAAMtjB,SAASoD,MAAM;qBAC3C,EACAiI,MAAO5K,WAAU2C,OAAO3C,KAAK,CAAC;kBAClC,OAAM;AACLT,4BAAQM,GAAG;kBACZ;;AAEH,oBAAI,KAAKqY,YAAY;AACnByK,gCAAa;gBACd,OAAM;AACL,uBAAKG,kBAAkBH;gBACxB;cACF,OAAM;AAEL,qBAAKE,gBAAgB,MAAMtjB,SAASoD,MAAM;cAC3C;YACH,CAAC;UACH,CAAC;;AAGHyf,uBAAelO,mBAAmB,CAACjB,SAAkEc,OAAoC;AACvI,gBAAMC,WAAWf;AACjB,cAAI,CAAC3P,MAAMyM,QAAQiE,QAAQ,KAAKxN,eAAe4H,SAAS4F,SAASjU,MAAM,GAAG;AACxE,kBAAM0d,oBAAoBtZ,qBAAoB;AAC9C,iBAAKuZ,cAAcD,mBAAmB;cACpCzH,QAAQ;cACRxT,UAAUoD;YACX,CAAA;AACDoO,qBAASyJ,oBAAoBA;UAC9B;AACD2E,yBAAepP,WAAWhP,OAAOgQ,UAAoCD,EAAE;;AAKzE,cAAMgP,wBAAwB,IAAIC,MAAMZ,gBAAgB;;;UAGtDa,gBAAgBA,MAAM;QACvB,CAAA;AAED,aAAK9G,WAAW4G;AAChB,cAAM9H,mBAAmBiI,eAAef,mBAAmB;AAE3D,aAAKlH,mBAAmBA;AAExB,cAAMoF,eAAepF,iBAAiBC,UAAU,QAAQ;AACxDmF,qBAAarU,GAAG,QAASF,WAAS;AAChC,cAAIA,MAAMoL,SAAS,iBAAiB;AAGlC,iBAAKqJ,uBAAuBzU,MAAMzL,KAAKod,mBAAmB3R,MAAMzL,KAAKqC,GAAG;UACzE;QACH,CAAC;AAGD,cAAMygB,eAAelI,iBAAiBC,UAAU,QAAQ;AACxDiI,qBAAanX,GAAG,QAASF,WAAS;AAChC,gBAAM;YAAEzL;UAAM,IAAGyL;AACjB,eAAKsP,eAAe/a,IAAI;QAC1B,CAAC;AAGD,cAAMic,eAAerB,iBAAiBC,UAAU,QAAQ;AACxDoB,qBAAatQ,GAAG,QAASwQ,YAAU;AAEjC,cAAIA,OAAOC,UAAU;AACnB,iBAAKvE,aAAasE,OAAOC;AACzB,iBAAKnE,kBAAkBkE,OAAOR;UAC/B;AACI,iBAAKZ,eAAc;AACxB,cAAI,KAAK0H,iBAAiB;AACxB,iBAAKA,gBAAe;AACpB,mBAAO,KAAKA;UACb;QACH,CAAC;AAED,aAAKhkB,WAAWikB;AAEhB,YAAI,KAAKjkB,SAAS2N;AAAoB7I,2BAAiB,KAAK9E,SAASkU,UAAU;AAC/EoP,uBAAezQ,iBAAgB;AAC/BpR,QAAAA,KAAI8T,MAAM,2BAA2B;MACvC;MAEUwO,gBAAgBO,iBAA0B7jB,SAAgCoD,QAA4B;AAC9G,cAAMsd,eAAgB5f,UAAQ;AAC5B,gBAAM;YAAE4T;YAAKlD;UAAiB,IAAG1Q;AACjC,cAAI4T,KAAK;AACP1T,YAAAA,KAAIP,MAAMiU,GAAG;AACb,gBAAItR;AAAQA,qBAAOsR,GAAG;UACvB,WAEQ1U;AAASA,oBAAQ,CAACwR,eAAe,CAAC;AAC3C,cAAI,KAAK0H;AAAoB,iBAAK2C,eAAc;;AAElD,cAAMiI,cAAc,KAAKpI,iBAAiBC,UAAU,OAAO;AAC3D,YAAI,CAAC,KAAK7C,mBAAmB;AAC3B,eAAK+C,eAAe,IAAI;AACxB/V,uBAAage,aAAa,QAAQpD,YAAY;AAC9CoD,sBAAYhI,MAAM;YAAEnE,MAAM;YAAe7W,MAAM;cAAE+iB;YAAiB;UAAA,CAAE;QACrE,OAAM;AACL/d,uBAAage,aAAa,QAAQpD,YAAY;AAC9C,gBAAMxC,oBAAoBtZ,qBAAoB;AAC9C,eAAKuZ,cAAcD,iBAAiB;AACpC4F,sBAAYhI,MAAM;YAChBnE,MAAM;YACN7W,MAAM;cAAE+iB;cAAiBpH,UAAU,KAAK3D;cAAmBoF;cAAmBxB,YAAY,KAAKC;YAAW;UAC3G,CAAA;QACF;MACH;MAEUqE,uBAAuB9C,mBAA2B/a,KAAW;AACrE,cAAM0e,UAAU,KAAKD,YAAW;AAChC,cAAMlE,aAAa7X,cACjB,qFAC0Cgc,OAAmB,6CAE7B,KAAKvG,kBAAkBlR,cAAqB,iCAC9C,KAAKkR,kBAAkBjR,aAAmB,kBAE9D;AAGZ,cAAM0Z,eAAele,cAA8C,gCAAA,KAAKyV,kBAAkBnR,QAAoB,YAAA;AAC9G,cAAM6Z,eAAene,cAAc,4CAA4C;AAC/Eme,qBAAa3L,YAAY0L,YAAY;AACrCrG,mBAAWrF,YAAY2L,YAAY;AACnC,cAAMC,aAAaA,MAAK;AACtBF,uBAAazY,iBAAiB,SAAS,MAAK;AAC1C,iBAAK6S,cAAcD,mBAAmB;cACpC/a;cACAsT,QAAQ;cACRxT,UAAUoD;YACX,CAAA;AACDqX,uBAAWD,OAAM;AAEjB,gBAAI,KAAK9C,oBAAoBuJ,SAAShY,WAAW;AAAG,mBAAKyO,oBAAoBC,MAAMjR,UAAU;UAC/F,CAAC;;AAGH,aAAKyX,oBAAoB1D,UAAU;AAEnC,cAAMyG,eAAeA,MAAK;AACxB,eAAKxJ,oBAAoBC,MAAMjR,UAAU;AACzC,eAAKgR,oBAAoBtC,YAAYqF,UAAU;;AAGjD9X,kBAAUue,YAAY;AACtBve,kBAAUqe,UAAU;MACtB;IACD;;;;;;;;;;;;;;;;;;;;;;;;;;ICp1BYG;;;;;;;AAAP,IAAOA,qBAAP,cAAkCC,eAAqB;MAqB3DC,cAA2C;AAAA,YAA/BC,SAA+B,UAAA,SAAA,KAAA,UAAA,CAAA,MAAA,SAAA,UAAA,CAAA,IAAF,CAAA;AACvC,cAAA;AADyC,wBApBnBC,MAAAA,QAAAA,gBAAgBC,SAoBG;AAAA,wBAlBOC,MAAAA,oBAAAA,mBAAmBC,MAkB1B;AAAA,wBAhBUC,MAAAA,yBAAAA,iBAAiBD,MAgB3B;AAAA,wBAdJE,MAAAA,QAAAA,iBAAiBC,QAcb;AAAA,wBAZNC,MAAAA,UAAAA,eAAeC,SAYT;AAAA,wBAAA,MAAA,iBAVN,IAUM;AAAA,wBAAA,MAAA,sBAAA,MAAA;AAAA,wBAAA,MAAA,cAAA,MAAA;AAAA,wBAAA,MAAA,iBAJL,CAAA,CAIK;AAAA,wBAAA,MAAA,cAFtB,KAEsB;AAEzC,aAAKC,qBAAqBV,OAAOW,mBAAmB,CAAA;AACpD,aAAKC,aAAaZ,OAAOY,cAAc,CAAA;AACvC,aAAKC,gBAAgBb,OAAOa,iBAAiB,CAAA;AAC7C,aAAKC,cAAcd,OAAOc,eAAe;AACzC,aAAKC,cAAcf,OAAOe,eAAe;MAC1C;MAEW,IAARC,WAAQ;AACV,YAAI,KAAKC,WAAWT,eAAeU,aAAa,KAAKC,eAAe;AAClE,iBAAO,KAAKA,cAAcH;QAC3B;AACD,eAAO;MACR;MAEW,IAARA,SAASI,GAAkC;AAC7C,cAAM,IAAIC,MAAM,iBAAV;MACP;MAES,MAAJC,KAAKC,SAA2B;AACpC,cAAMC,gCAAN;AAEA,YAAIC;AACJ,YAAI,CAAC,KAAKX,aAAa;AACrB,eAAKA,cAAcY,eAAerB,iBAAiBD,QAAQ,CAA1B;AACjC,gBAAM;YAAEuB;YAAeC;YAAaC;YAASC;YAAQC;UAA/C,IAA8D,KAAKjB;AACzEW,oBAAU;YAAEI,SAASG,OAAOC,SAASJ,SAAS,EAAzB;YAA8BK,MAAM;YAAWP;YAAeQ,aAAaP;YAAaE;YAAQC;;QACtH,OAAM;AACL,gBAAM;YAAEF;YAASF;YAAeC;YAAaQ;YAAWN;YAAQC;UAA1D,IAAyE,KAAKjB;AACpFW,oBAAU;YAAEI,SAASG,OAAOC,SAASJ,SAAS,EAAzB;YAA8BK,MAAME;YAAWT;YAAeQ,aAAaP;YAAaE;YAAQC;;QACtH;AACD,aAAKZ,gBAAgB,IAAIkB,MAAM,KAAK3B,kBAAf;AACrB4B,YAAIC,MAAM,qCAAV;AACA,cAAM,KAAKpB,cAAcG,KAAnBkB,eAAAA,eAAA;UACJC,iBAAiB;QADb,GAED,KAAK7B,UAFJ,GAAA,CAAA,GAAA;UAGJa;SAHF,CAAA;AAKA,aAAKR,SAAST,eAAekC;AAC7B,aAAKC,KAAKC,eAAeF,OAAOzC,gBAAgBC,SAAhD;AAEA,YAAI;AACFoC,cAAIC,MAAM,gCAAV;AACA,cAAIhB,QAAQsB,aAAa;AACvB,iBAAKC,aAAa;AAClB,kBAAM,KAAKC,QAAL;UACP;iBACMC,OAAO;AACdV,cAAIU,MAAM,6CAA6CA,KAAvD;AACA,eAAKL,KAAKC,eAAeK,SAASD,KAAlC;QACD;MACF;MAEY,MAAPD,UAAO;AACX,cAAMG,4BAAN;AACA,YAAI,CAAC,KAAK/B;AAAe,gBAAMgC,0BAA0BC,SAAS,iCAAnC;AAC/B,aAAKnC,SAAST,eAAe6C;AAC7B,aAAKV,KAAKC,eAAeS,YAAY;UAAEC,SAASrD,gBAAgBC;SAAhE;AACA,YAAI;AACF,gBAAM,KAAKiB,cAAcoC,MAAM,KAAK1C,aAA9B;AACN,gBAAM;YAAEgB;cAAY,KAAKV,cAAcH;AACvC,cAAIa,WAAWI,SAASJ,OAAD,MAAcI,SAAU,KAAKnB,YAAkCe,SAAS,EAAlD,GAAuD;AAClG,kBAAM;cAAEA,SAAS2B;cAAU7B;cAAeC;cAAaQ;cAAWN;cAAQC;YAApE,IAAmF,KAAKjB;AAC9F,kBAAMW,UAA4B;cAChCI,SAASG,OAAOC,SAASuB,UAAU,EAA1B;cACTtB,MAAME;cACNT;cACAQ,aAAaP;cACbG;cACAD;YANgC;AAWlC,kBAAM,KAAKX,cAAcsC,YAAnBjB,eAAA,CAAA,GACDf,OADC,CAAN;AAGA,kBAAMiC,iBAAiB,MAAM,KAAKvC,cAAcwC,SAASC,QAAgB;cAAEC,QAAQ;YAAV,CAA5C;AAC7B,gBAAIH,kBAAkBzB,SAASyB,cAAD,MAAqBzB,SAAU,KAAKnB,YAAkCe,SAAS,EAAlD,GAAuD;AAChH,oBAAMsB,0BAA0BW,SAC9B,KADI,+CAAA,OAE4C,KAAKhD,YAAkCe,SAAqB6B,aAAAA,EAAAA,OAAAA,cAFxG,CAAN;YAID;UACF;AACD,eAAKzC,SAAST,eAAeU;AAC7B,eAAKC,cAAcsB,gBAAnB;AACA,eAAKE,KAAKnC,eAAeU,WAAW;YAAEoC,SAASrD,gBAAgBC;YAAW6D,aAAa,KAAKjB;WAA5F;AACA,iBAAO,KAAK9B;iBACLgC,OAAO;AAEd,eAAK/B,SAAST,eAAekC;AAC7B,eAAKI,aAAa;AAClB,eAAKH,KAAKnC,eAAeyC,SAASD,KAAlC;AACA,gBAAMA,iBAAiBgB,gBAAgBhB,QAAQiB,iBAAiBC,gBAAgB,mCAAjC;QAChD;MACF;MAEe,MAAVC,aAA6D;AAAA,YAAlD5C,UAAgC,UAAA,SAAA,KAAA,UAAA,CAAA,MAAA,SAAA,UAAA,CAAA,IAAA;UAAE6C,SAAS;;AAC1D,YAAI,CAAC,KAAKjD;AAAe,gBAAMgC,0BAA0BC,SAAS,iCAAnC;AAC/B,cAAM,MAAMe,WAAN;AACN,cAAM,KAAKhD,cAAckD,OAAnB;AACN,aAAKlD,cAAcmD,gBAAnB;AACA,YAAI/C,QAAQ6C,SAAS;AACnB,eAAKnD,SAAST,eAAeC;AAC7B,eAAKU,gBAAgB;QACtB,OAAM;AAEL,eAAKF,SAAST,eAAekC;QAC9B;AAED,aAAKI,aAAa;AAClB,aAAKH,KAAKC,eAAe2B,YAAzB;MACD;MAEgB,MAAXC,cAAW;AACf,YAAI,KAAKvD,WAAWT,eAAeU;AAAW,gBAAM+C,iBAAiBQ,kBAAkB,2BAAnC;AACpD,YAAI,CAAC,KAAKtD;AAAe,gBAAMgC,0BAA0BC,SAAS,iCAAnC;AAC/B,cAAMsB,WAAW,MAAM,KAAKvD,cAAcqD,YAAY,EAA/B;AACvB,eAAOE;MACR;MAEDC,mBAAmBpD,SAAiC;AAClD,YAAI,KAAKN,WAAWT,eAAekC;AAAO;AAC1C,YAAInB,YAAAA,QAAAA,YAAJ,UAAIA,QAASR,aAAa;AACxB,eAAKA,cAAcQ,QAAQR;QAC5B;MACF;IArJ0D;;;",
  "names": ["randomId", "randombytes", "toString", "EthereumRpcError", "serializeError", "noop", "undefined", "safeApply", "handler", "context", "args", "Reflect", "apply", "err", "setTimeout", "arrayClone", "arr", "n", "length", "copy", "Array", "i", "createStreamMiddleware", "idMap", "readNoop", "events", "SafeEventEmitter", "processResponse", "res", "id", "Error", "Object", "assign", "end", "processNotification", "emit", "processMessage", "_encoding", "cb", "isNotification", "_err", "stream", "Duplex", "objectMode", "read", "write", "middleware", "req", "next", "push", "createIdRemapMiddleware", "_end", "originalId", "newId", "randomId", "done", "anyStreamEnd", "_cb", "once", "eos", "readable", "writable", "setupMultiplex", "mux", "ObjectMultiplex", "getStream", "streamHelper", "name", "_substreams", "createStream", "pump", "window", "console", "error", "SYN", "ACK", "BRK", "BasePostMessageStream", "SerializableError", "JRPCEngine", "Substream", "IGNORE_SUBSTREAM", "constructor", "_ref", "target", "targetWindow", "targetOrigin", "_defineProperty", "_init", "_haveSyn", "_name", "_target", "_targetWindow", "_targetOrigin", "_onMessage", "onMessage", "bind", "_synIntervalId", "addEventListener", "_handShake", "_break", "cork", "_write", "_onData", "data", "uncork", "_postMessage", "originConstraint", "postMessage", "event", "message", "origin", "source", "_read", "_", "_destroy", "removeEventListener", "EventEmitter", "type", "doError", "_events", "_len", "arguments", "_key", "er", "len", "listeners", "code", "Number", "isInteger", "toString", "stringify", "stack", "_middleware", "_runAllMiddleware", "middlewareStack", "returnHandlers", "isComplete", "_runMiddleware", "reverse", "Promise", "resolve", "serializeError", "returnHandler", "_runReturnHandlers", "handlers", "reject", "_checkForCompletion", "handle", "isArray", "_handleBatch", "_handle", "_promiseHandle", "asMiddleware", "middlewareError", "handlerCallback", "reqs", "responses", "all", "map", "callerReq", "jsonrpc", "method", "_objectSpread", "_processRequest", "_error", "result", "parent", "_parent", "chunk", "callback", "Symbol", "opts", "substream", "destroy", "ignoreStream", "warn", "storeAsStream", "ObservableStore", "Buffer", "require_util", "Buffer", "err", "self", "Duplex", "Buffer", "keys", "Duplex", "self", "Buffer", "self", "Duplex", "Buffer", "self", "n", "Duplex", "require_readable_browser", "self", "noop", "supportedFiatCurrencies", "provider", "providerSupportedFiatCurrencies", "PROVIDER_SUPPORTED_FIAT_CURRENCIES", "filter", "currency", "cryptoCompareCurrenciesSet", "has", "documentReady", "Promise", "resolve", "document", "readyState", "handleEvent", "createErrorMiddleware", "req", "res", "next", "method", "error", "ethErrors", "rpc", "invalidRequest", "message", "data", "done", "log", "logStreamDisconnectWarning", "remoteLabel", "emitter", "warningMsg", "stack", "warn", "listenerCount", "emit", "getPopupFeatures", "dualScreenLeft", "window", "screenLeft", "undefined", "screenX", "dualScreenTop", "screenTop", "screenY", "w", "h", "width", "innerWidth", "documentElement", "clientWidth", "screen", "height", "innerHeight", "clientHeight", "systemZoom", "left", "Math", "abs", "top", "features", "imgExists", "url", "reject", "img", "createElement", "onload", "onerror", "src", "e", "getSiteIcon", "icon", "querySelector", "href", "Array", "from", "querySelectorAll", "find", "_icon", "Boolean", "sendSiteMetadata", "engine", "domainMetadata", "getSiteMetadata", "handle", "jsonrpc", "id", "getPreopenInstanceId", "params", "NOOP", "messages", "errors", "originalError", "LOGIN_PROVIDER", "WALLET_VERIFIERS", "WALLET_OPENLOGIN_VERIFIER_MAP", "PAYMENT_PROVIDER", "SUPPORTED_PAYMENT_NETWORK", "TORUS_BUILD_ENV", "BUTTON_POSITION", "CRYPTO_COMPARE_CURRENCIES", "paymentProviders", "translations", "runOnLoad", "htmlToElement", "handleStream", "validatePaymentProvider", "getTorusUrl", "getUserLanguage", "EMITTED_NOTIFICATIONS", "FEATURES_PROVIDER_CHANGE_WINDOW", "FEATURES_DEFAULT_WALLET_WINDOW", "FEATURES_CONFIRM_WINDOW", "getRpcPromiseCallback", "TorusInpageProvider", "defaults", "hashes", "integrity", "main", "PopupHandler", "getSiteName", "defaultVerifiers", "iframeIntegrity", "expectedCacheControlHeader", "UNSAFE_METHODS", "Torus", "GOOGLE", "FACEBOOK", "TWITCH", "REDDIT", "DISCORD", "EMAIL_PASSWORDLESS", "MOONPAY", "WYRE", "RAMPNETWORK", "XANPOOL", "MERCURYO", "TRANSAK", "BANXA", "MAINNET", "MATIC", "BSC_MAINNET", "AVALANCHE_MAINNET", "XDAI", "PRODUCTION", "DEVELOPMENT", "BINANCE", "TESTING", "LRC", "BETA", "BNB", "POLYGON", "BOTTOM_LEFT", "TOP_LEFT", "BOTTOM_RIGHT", "TOP_RIGHT", "Set", "line1", "line2", "line3", "supportPage", "minOrderValue", "maxOrderValue", "validCurrencies", "validCryptoCurrenciesByChain", "value", "display", "includeFees", "api", "enforceMax", "receiveHint", "sell", "en", "embed", "continue", "actionRequired", "pendingAction", "cookiesRequired", "enableCookies", "clickHere", "de", "ja", "ko", "zh", "supportedVerifierList", "Object", "values", "prodTorusUrl", "localStorageKeyPrefix", "fn", "body", "then", "catch", "addEventListener", "html", "template", "trimmedHtml", "trim", "innerHTML", "content", "firstChild", "eventName", "handler", "_len", "arguments", "length", "handlerArgs", "_key", "handlerWrapper", "removeEventListener", "chunk", "removeListener", "on", "loglevel", "getLogger", "disconnected", "permanentlyDisconnected", "unsupportedSync", "invalidDuplexStream", "invalidOptions", "maxEventListeners", "shouldSendMetadata", "invalidRequestArgs", "invalidRequestMethod", "invalidRequestParams", "invalidLoggerObject", "invalidLoggerMethod", "info", "connected", "chainId", "warnings", "enableDeprecation", "sendDeprecation", "events", "close", "networkChanged", "notification", "publicConfigStore", "config", "isValid", "keys", "selectedProvider", "selectedParams", "fiatValue", "requestedOrderAmount", "parseFloat", "toString", "selectedCurrency", "includes", "selectedCryptoCurrency", "flat", "map", "finalCryptoCurrency", "toLowerCase", "random", "slice", "buildEnv", "torusUrl", "logLevel", "version", "versionUsed", "response", "get", "useAPIKey", "userLanguage", "navigator", "language", "userLanguages", "split", "prototype", "hasOwnProperty", "call", "SafeEventEmitter", "defaultMaxListeners", "unwrapResult", "isArray", "result", "constructor", "connectionStream", "jsonRpcStreamName", "_defineProperty", "enable", "experimentalMethods", "send", "isDuplexStream", "Error", "isTorus", "setMaxListeners", "_state", "_objectSpread", "_defaultState", "selectedAddress", "networkVersion", "_handleAccountsChanged", "bind", "_handleChainChanged", "_handleUnlockStateChanged", "_handleConnect", "_handleDisconnect", "_handleStreamDisconnect", "_sendSync", "_rpcRequest", "_warnOfDeprecation", "_initializeState", "request", "sendAsync", "mux", "ObjectMultiplex", "pump", "_publicConfigStore", "ObservableStore", "storageKey", "createStream", "storeAsStream", "ignoreStream", "isConnected", "jsonRpcConnection", "createStreamMiddleware", "stream", "rpcEngine", "JRPCEngine", "push", "createIdRemapMiddleware", "middleware", "_rpcEngine", "payload", "type", "_sentWarnings", "args", "callback", "addListener", "listener", "once", "prependListener", "prependOnceListener", "accounts", "isUnlocked", "initialized", "isInternal", "cb", "_payload", "err", "tryPreopenHandle", "methodOrPayload", "callbackOrArgs", "debug", "isRecoverable", "errorMessage", "isPermanentlyDisconnected", "EthereumRpcError", "streamName", "isEthAccounts", "finalAccounts", "account", "dequal", "hasEmittedConnection", "options", "algorithms", "delimiter", "full", "internalHashes", "forEach", "algorithm", "createHash", "update", "digest", "sri", "output", "join", "finalOptions", "EventEmitter", "_ref", "target", "windowTimer", "iClosedWindow", "_setupTimer", "Number", "setInterval", "closed", "clearInterval", "open", "focus", "redirect", "locationReplaceOnRedirect", "location", "replace", "siteName", "metaTitle", "title", "hostname", "name", "preLoadIframe", "torusIframeHtml", "check", "hash", "crossOrigin", "rel", "relList", "supports", "head", "appendChild", "buttonPosition", "buttonSize", "modalZIndex", "apiKey", "configuration", "isLoggedIn", "isInitialized", "torusWidgetVisibility", "requestedVerifier", "currentVerifier", "setAPIKey", "alertZIndex", "isIframeFullScreen", "init", "enableLogging", "enabledVerifiers", "network", "host", "networkName", "blockExplorer", "ticker", "tickerName", "loginConfig", "showTorusButton", "whiteLabel", "skipTKey", "useWalletConnect", "mfaLevel", "isCustomLogin", "setDefaultLevel", "enableAll", "disableAll", "torusIframeUrl", "URL", "pathname", "endsWith", "torusIframe", "torusAlertContainer", "style", "setProperty", "link", "setAttribute", "styleLink", "defaultLanguage", "customTranslations", "mergedTranslations", "deepmerge", "languageTranslations", "embedTranslations", "handleSetup", "_setupWeb3", "initStream", "communicationMux", "getStream", "success", "_displayIframe", "write", "fetchUrl", "resp", "fetch", "cache", "headers", "text", "calculatedIntegrity", "generateIntegrity", "clearInit", "login", "verifier", "login_hint", "loginHint", "ethereum", "logout", "logOutStream", "statusStream", "statusStreamHandler", "status", "loggedIn", "cleanUp", "isElement", "element", "Element", "HTMLDocument", "contains", "remove", "torusAlert", "hideTorusButton", "_sendWidgetVisibilityStatus", "setProvider", "rest", "_objectWithoutProperties", "_excluded", "providerChangeStream", "preopenInstanceId", "_handleWindow", "override", "showWallet", "path", "showWalletStream", "finalPath", "showWalletHandler", "instanceId", "finalUrl", "searchParams", "append", "x", "walletWindow", "getPublicAddress", "_ref2", "verifierId", "isExtended", "walletVerifier", "openloginVerifier", "getUserInfo", "userInfoAccessStream", "userInfoAccessHandler", "approved", "rejected", "newRequest", "userInfoStream", "userInfoHandler", "handlerChunk", "initiateTopup", "JSON", "stringify", "topupStream", "topupHandler", "loginWithPrivateKey", "loginParams", "privateKey", "userInfo", "Buffer", "loginPrivKeyStream", "loginHandler", "showWalletConnectScanner", "walletConnectStream", "walletConnectHandler", "windowStream", "handledWindow", "_createPopupBlockAlert", "closeHandler", "_ref3", "receivedId", "_setEmbedWhiteLabel", "theme", "isDark", "colors", "classList", "add", "torusBrand1", "torusGray2", "_getLogoUrl", "logoUrl", "logoLight", "logoDark", "torusWidgetVisibilityStream", "isFull", "size", "right", "bottom", "assign", "metamaskStream", "BasePostMessageStream", "targetWindow", "contentWindow", "targetOrigin", "origin", "communicationStream", "inpageProvider", "detectAccountRequestPrototypeModifier", "m", "originalMethod", "providerFunc", "apply", "setTimeout", "handleLoginCb", "_", "_showLoginPopup", "isLoginCallback", "proxiedInpageProvider", "Proxy", "deleteProperty", "setupMultiplex", "widgetStream", "calledFromEmbed", "oauthStream", "successAlert", "btnContainer", "bindOnLoad", "children", "attachOnLoad", "TorusWalletAdapter", "BaseEvmAdapter", "constructor", "params", "WALLET_ADAPTERS", "TORUS_EVM", "ADAPTER_NAMESPACES", "EIP155", "CHAIN_NAMESPACES", "ADAPTER_CATEGORY", "EXTERNAL", "ADAPTER_STATUS", "NOT_READY", "torusWalletOptions", "adapterSettings", "initParams", "loginSettings", "chainConfig", "sessionTime", "provider", "status", "CONNECTED", "torusInstance", "_", "Error", "init", "options", "checkInitializationRequirements", "network", "getChainConfig", "blockExplorer", "displayName", "chainId", "ticker", "tickerName", "Number", "parseInt", "host", "networkName", "rpcTarget", "Torus", "log", "debug", "_objectSpread", "showTorusButton", "READY", "emit", "ADAPTER_EVENTS", "autoConnect", "rehydrated", "connect", "error", "ERRORED", "checkConnectionRequirements", "WalletInitializationError", "notReady", "CONNECTING", "adapter", "login", "_chainId", "setProvider", "updatedChainID", "ethereum", "request", "method", "fromCode", "reconnected", "Web3AuthError", "WalletLoginError", "connectionError", "disconnect", "cleanup", "logout", "hideTorusButton", "DISCONNECTED", "getUserInfo", "notConnectedError", "userInfo", "setAdapterSettings"]
}
