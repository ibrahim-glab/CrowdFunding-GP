import {
  normalizeChainId
} from "./chunk-FG2CDSPQ.js";
import {
  WagmiConnector
} from "./chunk-5LCC4TJ5.js";
import {
  _classPrivateFieldGet,
  _classPrivateFieldInitSpec,
  _classPrivateFieldSet
} from "./chunk-I5FN74TN.js";
import {
  _defineProperty
} from "./chunk-YUOLCEGR.js";
import "./chunk-OSKR2P2Q.js";
import "./chunk-LYEG5PGG.js";
import {
  ethers_exports,
  init_lib,
  utils_exports
} from "./chunk-I3BLH5LU.js";
import "./chunk-MFKPCOBF.js";
import "./chunk-QDKWUOME.js";
import "./chunk-3JDV7GMI.js";
import "./chunk-JVFNGTH2.js";
import "./chunk-UFR7PFM3.js";
import {
  __require
} from "./chunk-HY2WJTHE.js";

// node_modules/@thirdweb-dev/wallets/evm/connectors/magic/dist/thirdweb-dev-wallets-evm-connectors-magic.browser.esm.js
init_lib();

// node_modules/@magic-sdk/types/dist/es/index.mjs
var r = ((n) => (n.MissingApiKey = "MISSING_API_KEY", n.ModalNotReady = "MODAL_NOT_READY", n.MalformedResponse = "MALFORMED_RESPONSE", n.InvalidArgument = "INVALID_ARGUMENT", n.ExtensionNotInitialized = "EXTENSION_NOT_INITIALIZED", n.IncompatibleExtensions = "INCOMPATIBLE_EXTENSIONS", n))(r || {});
var a = ((s) => (s.SyncWeb3Method = "SYNC_WEB3_METHOD", s.DuplicateIframe = "DUPLICATE_IFRAME", s.ReactNativeEndpointConfiguration = "REACT_NATIVE_ENDPOINT_CONFIGURATION", s.DeprecationNotice = "DEPRECATION_NOTICE", s))(a || {});
var m = ((t) => (t[t.ParseError = -32700] = "ParseError", t[t.InvalidRequest = -32600] = "InvalidRequest", t[t.MethodNotFound = -32601] = "MethodNotFound", t[t.InvalidParams = -32602] = "InvalidParams", t[t.InternalError = -32603] = "InternalError", t[t.MagicLinkFailedVerification = -1e4] = "MagicLinkFailedVerification", t[t.MagicLinkExpired = -10001] = "MagicLinkExpired", t[t.MagicLinkRateLimited = -10002] = "MagicLinkRateLimited", t[t.MagicLinkInvalidRedirectURL = -10006] = "MagicLinkInvalidRedirectURL", t[t.UserAlreadyLoggedIn = -10003] = "UserAlreadyLoggedIn", t[t.UpdateEmailFailed = -10004] = "UpdateEmailFailed", t[t.UserRequestEditEmail = -10005] = "UserRequestEditEmail", t[t.InactiveRecipient = -10010] = "InactiveRecipient", t[t.AccessDeniedToUser = -10011] = "AccessDeniedToUser", t))(m || {});
var p = ((e) => (e.LoginWithSms = "magic_auth_login_with_sms", e.LoginWithEmailOTP = "magic_auth_login_with_email_otp", e.LoginWithMagicLink = "magic_auth_login_with_magic_link", e.LoginWithCredential = "magic_auth_login_with_credential", e.GetIdToken = "magic_auth_get_id_token", e.GenerateIdToken = "magic_auth_generate_id_token", e.GetMetadata = "magic_auth_get_metadata", e.IsLoggedIn = "magic_auth_is_logged_in", e.Logout = "magic_auth_logout", e.UpdateEmail = "magic_auth_update_email", e.UserSettings = "magic_auth_settings", e.UserSettingsTestMode = "magic_auth_settings_testing_mode", e.LoginWithSmsTestMode = "magic_auth_login_with_sms_testing_mode", e.LoginWithEmailOTPTestMode = "magic_auth_login_with_email_otp_testing_mode", e.LoginWithMagicLinkTestMode = "magic_login_with_magic_link_testing_mode", e.LoginWithCredentialTestMode = "magic_auth_login_with_credential_testing_mode", e.GetIdTokenTestMode = "magic_auth_get_id_token_testing_mode", e.GenerateIdTokenTestMode = "magic_auth_generate_id_token_testing_mode", e.GetMetadataTestMode = "magic_auth_get_metadata_testing_mode", e.IsLoggedInTestMode = "magic_auth_is_logged_in_testing_mode", e.LogoutTestMode = "magic_auth_logout_testing_mode", e.UpdateEmailTestMode = "magic_auth_update_email_testing_mode", e.IntermediaryEvent = "magic_intermediary_event", e.RequestAccounts = "eth_requestAccounts", e.GetInfo = "mc_get_wallet_info", e.ShowUI = "mc_wallet", e.NFTPurchase = "magic_nft_purchase", e.RequestUserInfoWithUI = "mc_request_user_info", e.Disconnect = "mc_disconnect", e.UpdatePhoneNumber = "magic_auth_update_phone_number", e.UpdatePhoneNumberTestMode = "magic_auth_update_phone_number_testing_mode", e.RecoverAccount = "magic_auth_recover_account", e.RecoverAccountTestMode = "magic_auth_recover_account_testing_mode", e))(p || {});
var u = ((i) => (i.MAGIC_HANDLE_RESPONSE = "MAGIC_HANDLE_RESPONSE", i.MAGIC_OVERLAY_READY = "MAGIC_OVERLAY_READY", i.MAGIC_SHOW_OVERLAY = "MAGIC_SHOW_OVERLAY", i.MAGIC_HIDE_OVERLAY = "MAGIC_HIDE_OVERLAY", i.MAGIC_HANDLE_EVENT = "MAGIC_HANDLE_EVENT", i))(u || {});
var o = ((_2) => (_2.MAGIC_HANDLE_REQUEST = "MAGIC_HANDLE_REQUEST", _2))(o || {});
var c = ((_2) => (_2.Harmony = "HARMONY", _2))(c || {});

// node_modules/@magic-sdk/provider/dist/es/index.mjs
var vt = Object.create;
var Y = Object.defineProperty;
var It = Object.defineProperties;
var Pt = Object.getOwnPropertyDescriptor;
var xt = Object.getOwnPropertyDescriptors;
var bt = Object.getOwnPropertyNames;
var Oe = Object.getOwnPropertySymbols;
var $t = Object.getPrototypeOf;
var _e = Object.prototype.hasOwnProperty;
var Nt = Object.prototype.propertyIsEnumerable;
var Ce = (n, e, t) => e in n ? Y(n, e, { enumerable: true, configurable: true, writable: true, value: t }) : n[e] = t;
var Z = (n, e) => {
  for (var t in e || (e = {}))
    _e.call(e, t) && Ce(n, t, e[t]);
  if (Oe)
    for (var t of Oe(e))
      Nt.call(e, t) && Ce(n, t, e[t]);
  return n;
};
var De = (n, e) => It(n, xt(e));
var Mt = (n, e) => () => (e || n((e = { exports: {} }).exports, e), e.exports);
var wt = (n, e) => {
  for (var t in e)
    Y(n, t, { get: e[t], enumerable: true });
};
var At = (n, e, t, r2) => {
  if (e && typeof e == "object" || typeof e == "function")
    for (let o2 of bt(e))
      !_e.call(n, o2) && o2 !== t && Y(n, o2, { get: () => e[o2], enumerable: !(r2 = Pt(e, o2)) || r2.enumerable });
  return n;
};
var Lt = (n, e, t) => (t = n != null ? vt($t(n)) : {}, At(e || !n || !n.__esModule ? Y(t, "default", { value: n, enumerable: true }) : t, n));
var x = (n, e, t) => new Promise((r2, o2) => {
  var s = (c2) => {
    try {
      i(t.next(c2));
    } catch (p2) {
      o2(p2);
    }
  }, a2 = (c2) => {
    try {
      i(t.throw(c2));
    } catch (p2) {
      o2(p2);
    }
  }, i = (c2) => c2.done ? r2(c2.value) : Promise.resolve(c2.value).then(s, a2);
  i((t = t.apply(n, e)).next());
});
var lt = Mt((Tr, be) => {
  "use strict";
  var Nn = Object.prototype.hasOwnProperty, v = "~";
  function B() {
  }
  Object.create && (B.prototype = /* @__PURE__ */ Object.create(null), new B().__proto__ || (v = false));
  function Mn(n, e, t) {
    this.fn = n, this.context = e, this.once = t || false;
  }
  function ct(n, e, t, r2, o2) {
    if (typeof t != "function")
      throw new TypeError("The listener must be a function");
    var s = new Mn(t, r2 || n, o2), a2 = v ? v + e : e;
    return n._events[a2] ? n._events[a2].fn ? n._events[a2] = [n._events[a2], s] : n._events[a2].push(s) : (n._events[a2] = s, n._eventsCount++), n;
  }
  function ie2(n, e) {
    --n._eventsCount === 0 ? n._events = new B() : delete n._events[e];
  }
  function R() {
    this._events = new B(), this._eventsCount = 0;
  }
  R.prototype.eventNames = function() {
    var e = [], t, r2;
    if (this._eventsCount === 0)
      return e;
    for (r2 in t = this._events)
      Nn.call(t, r2) && e.push(v ? r2.slice(1) : r2);
    return Object.getOwnPropertySymbols ? e.concat(Object.getOwnPropertySymbols(t)) : e;
  };
  R.prototype.listeners = function(e) {
    var t = v ? v + e : e, r2 = this._events[t];
    if (!r2)
      return [];
    if (r2.fn)
      return [r2.fn];
    for (var o2 = 0, s = r2.length, a2 = new Array(s); o2 < s; o2++)
      a2[o2] = r2[o2].fn;
    return a2;
  };
  R.prototype.listenerCount = function(e) {
    var t = v ? v + e : e, r2 = this._events[t];
    return r2 ? r2.fn ? 1 : r2.length : 0;
  };
  R.prototype.emit = function(e, t, r2, o2, s, a2) {
    var i = v ? v + e : e;
    if (!this._events[i])
      return false;
    var c2 = this._events[i], p2 = arguments.length, l, u2;
    if (c2.fn) {
      switch (c2.once && this.removeListener(e, c2.fn, void 0, true), p2) {
        case 1:
          return c2.fn.call(c2.context), true;
        case 2:
          return c2.fn.call(c2.context, t), true;
        case 3:
          return c2.fn.call(c2.context, t, r2), true;
        case 4:
          return c2.fn.call(c2.context, t, r2, o2), true;
        case 5:
          return c2.fn.call(c2.context, t, r2, o2, s), true;
        case 6:
          return c2.fn.call(c2.context, t, r2, o2, s, a2), true;
      }
      for (u2 = 1, l = new Array(p2 - 1); u2 < p2; u2++)
        l[u2 - 1] = arguments[u2];
      c2.fn.apply(c2.context, l);
    } else {
      var P = c2.length, A;
      for (u2 = 0; u2 < P; u2++)
        switch (c2[u2].once && this.removeListener(e, c2[u2].fn, void 0, true), p2) {
          case 1:
            c2[u2].fn.call(c2[u2].context);
            break;
          case 2:
            c2[u2].fn.call(c2[u2].context, t);
            break;
          case 3:
            c2[u2].fn.call(c2[u2].context, t, r2);
            break;
          case 4:
            c2[u2].fn.call(c2[u2].context, t, r2, o2);
            break;
          default:
            if (!l)
              for (A = 1, l = new Array(p2 - 1); A < p2; A++)
                l[A - 1] = arguments[A];
            c2[u2].fn.apply(c2[u2].context, l);
        }
    }
    return true;
  };
  R.prototype.on = function(e, t, r2) {
    return ct(this, e, t, r2, false);
  };
  R.prototype.once = function(e, t, r2) {
    return ct(this, e, t, r2, true);
  };
  R.prototype.removeListener = function(e, t, r2, o2) {
    var s = v ? v + e : e;
    if (!this._events[s])
      return this;
    if (!t)
      return ie2(this, s), this;
    var a2 = this._events[s];
    if (a2.fn)
      a2.fn === t && (!o2 || a2.once) && (!r2 || a2.context === r2) && ie2(this, s);
    else {
      for (var i = 0, c2 = [], p2 = a2.length; i < p2; i++)
        (a2[i].fn !== t || o2 && !a2[i].once || r2 && a2[i].context !== r2) && c2.push(a2[i]);
      c2.length ? this._events[s] = c2.length === 1 ? c2[0] : c2 : ie2(this, s);
    }
    return this;
  };
  R.prototype.removeAllListeners = function(e) {
    var t;
    return e ? (t = v ? v + e : e, this._events[t] && ie2(this, t)) : (this._events = new B(), this._eventsCount = 0), this;
  };
  R.prototype.off = R.prototype.removeListener;
  R.prototype.addListener = R.prototype.on;
  R.prefixed = v;
  R.EventEmitter = R;
  typeof be < "u" && (be.exports = R);
});
function St(n) {
  let e = { exports: {} };
  return n(e, e.exports), e.exports;
}
var Ot = Number.MAX_SAFE_INTEGER || 9007199254740991;
var Pe = { SEMVER_SPEC_VERSION: "2.0.0", MAX_LENGTH: 256, MAX_SAFE_INTEGER: Ot, MAX_SAFE_COMPONENT_LENGTH: 16 };
var Ct = typeof process == "object" && process.env && process.env.NODE_DEBUG && /\bsemver\b/i.test(process.env.NODE_DEBUG) ? (...n) => console.error("SEMVER", ...n) : () => {
};
var m2 = Ct;
var W = St(function(n, e) {
  let { MAX_SAFE_COMPONENT_LENGTH: t } = Pe, r2 = (e = n.exports = {}).re = [], o2 = e.src = [], s = e.t = {}, a2 = 0, i = (c2, p2, l) => {
    let u2 = a2++;
    m2(u2, p2), s[c2] = u2, o2[u2] = p2, r2[u2] = new RegExp(p2, l ? "g" : void 0);
  };
  i("NUMERICIDENTIFIER", "0|[1-9]\\d*"), i("NUMERICIDENTIFIERLOOSE", "[0-9]+"), i("NONNUMERICIDENTIFIER", "\\d*[a-zA-Z-][a-zA-Z0-9-]*"), i("MAINVERSION", `(${o2[s.NUMERICIDENTIFIER]})\\.(${o2[s.NUMERICIDENTIFIER]})\\.(${o2[s.NUMERICIDENTIFIER]})`), i("MAINVERSIONLOOSE", `(${o2[s.NUMERICIDENTIFIERLOOSE]})\\.(${o2[s.NUMERICIDENTIFIERLOOSE]})\\.(${o2[s.NUMERICIDENTIFIERLOOSE]})`), i("PRERELEASEIDENTIFIER", `(?:${o2[s.NUMERICIDENTIFIER]}|${o2[s.NONNUMERICIDENTIFIER]})`), i("PRERELEASEIDENTIFIERLOOSE", `(?:${o2[s.NUMERICIDENTIFIERLOOSE]}|${o2[s.NONNUMERICIDENTIFIER]})`), i("PRERELEASE", `(?:-(${o2[s.PRERELEASEIDENTIFIER]}(?:\\.${o2[s.PRERELEASEIDENTIFIER]})*))`), i("PRERELEASELOOSE", `(?:-?(${o2[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o2[s.PRERELEASEIDENTIFIERLOOSE]})*))`), i("BUILDIDENTIFIER", "[0-9A-Za-z-]+"), i("BUILD", `(?:\\+(${o2[s.BUILDIDENTIFIER]}(?:\\.${o2[s.BUILDIDENTIFIER]})*))`), i("FULLPLAIN", `v?${o2[s.MAINVERSION]}${o2[s.PRERELEASE]}?${o2[s.BUILD]}?`), i("FULL", `^${o2[s.FULLPLAIN]}$`), i("LOOSEPLAIN", `[v=\\s]*${o2[s.MAINVERSIONLOOSE]}${o2[s.PRERELEASELOOSE]}?${o2[s.BUILD]}?`), i("LOOSE", `^${o2[s.LOOSEPLAIN]}$`), i("GTLT", "((?:<|>)?=?)"), i("XRANGEIDENTIFIERLOOSE", `${o2[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`), i("XRANGEIDENTIFIER", `${o2[s.NUMERICIDENTIFIER]}|x|X|\\*`), i("XRANGEPLAIN", `[v=\\s]*(${o2[s.XRANGEIDENTIFIER]})(?:\\.(${o2[s.XRANGEIDENTIFIER]})(?:\\.(${o2[s.XRANGEIDENTIFIER]})(?:${o2[s.PRERELEASE]})?${o2[s.BUILD]}?)?)?`), i("XRANGEPLAINLOOSE", `[v=\\s]*(${o2[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o2[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o2[s.XRANGEIDENTIFIERLOOSE]})(?:${o2[s.PRERELEASELOOSE]})?${o2[s.BUILD]}?)?)?`), i("XRANGE", `^${o2[s.GTLT]}\\s*${o2[s.XRANGEPLAIN]}$`), i("XRANGELOOSE", `^${o2[s.GTLT]}\\s*${o2[s.XRANGEPLAINLOOSE]}$`), i("COERCE", `(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`), i("COERCERTL", o2[s.COERCE], true), i("LONETILDE", "(?:~>?)"), i("TILDETRIM", `(\\s*)${o2[s.LONETILDE]}\\s+`, true), e.tildeTrimReplace = "$1~", i("TILDE", `^${o2[s.LONETILDE]}${o2[s.XRANGEPLAIN]}$`), i("TILDELOOSE", `^${o2[s.LONETILDE]}${o2[s.XRANGEPLAINLOOSE]}$`), i("LONECARET", "(?:\\^)"), i("CARETTRIM", `(\\s*)${o2[s.LONECARET]}\\s+`, true), e.caretTrimReplace = "$1^", i("CARET", `^${o2[s.LONECARET]}${o2[s.XRANGEPLAIN]}$`), i("CARETLOOSE", `^${o2[s.LONECARET]}${o2[s.XRANGEPLAINLOOSE]}$`), i("COMPARATORLOOSE", `^${o2[s.GTLT]}\\s*(${o2[s.LOOSEPLAIN]})$|^$`), i("COMPARATOR", `^${o2[s.GTLT]}\\s*(${o2[s.FULLPLAIN]})$|^$`), i("COMPARATORTRIM", `(\\s*)${o2[s.GTLT]}\\s*(${o2[s.LOOSEPLAIN]}|${o2[s.XRANGEPLAIN]})`, true), e.comparatorTrimReplace = "$1$2$3", i("HYPHENRANGE", `^\\s*(${o2[s.XRANGEPLAIN]})\\s+-\\s+(${o2[s.XRANGEPLAIN]})\\s*$`), i("HYPHENRANGELOOSE", `^\\s*(${o2[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o2[s.XRANGEPLAINLOOSE]})\\s*$`), i("STAR", "(<|>)?=?\\s*\\*"), i("GTE0", "^\\s*>=\\s*0.0.0\\s*$"), i("GTE0PRE", "^\\s*>=\\s*0.0.0-0\\s*$");
});
var ke = /^[0-9]+$/;
var Xe = (n, e) => {
  let t = ke.test(n), r2 = ke.test(e);
  return t && r2 && (n = +n, e = +e), n === e ? 0 : t && !r2 ? -1 : r2 && !t ? 1 : n < e ? -1 : 1;
};
var _t = (n, e) => Xe(e, n);
var Dt = { compareIdentifiers: Xe, rcompareIdentifiers: _t };
var { MAX_LENGTH: qe, MAX_SAFE_INTEGER: Q } = Pe;
var { re: Je, t: Ue } = W;
var { compareIdentifiers: K } = Dt;
var E = class {
  constructor(e, t) {
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), e instanceof E) {
      if (e.loose === !!t.loose && e.includePrerelease === !!t.includePrerelease)
        return e;
      e = e.version;
    } else if (typeof e != "string")
      throw new TypeError(`Invalid Version: ${e}`);
    if (e.length > qe)
      throw new TypeError(`version is longer than ${qe} characters`);
    m2("SemVer", e, t), this.options = t, this.loose = !!t.loose, this.includePrerelease = !!t.includePrerelease;
    let r2 = e.trim().match(t.loose ? Je[Ue.LOOSE] : Je[Ue.FULL]);
    if (!r2)
      throw new TypeError(`Invalid Version: ${e}`);
    if (this.raw = e, this.major = +r2[1], this.minor = +r2[2], this.patch = +r2[3], this.major > Q || this.major < 0)
      throw new TypeError("Invalid major version");
    if (this.minor > Q || this.minor < 0)
      throw new TypeError("Invalid minor version");
    if (this.patch > Q || this.patch < 0)
      throw new TypeError("Invalid patch version");
    r2[4] ? this.prerelease = r2[4].split(".").map((o2) => {
      if (/^[0-9]+$/.test(o2)) {
        let s = +o2;
        if (s >= 0 && s < Q)
          return s;
      }
      return o2;
    }) : this.prerelease = [], this.build = r2[5] ? r2[5].split(".") : [], this.format();
  }
  format() {
    return this.version = `${this.major}.${this.minor}.${this.patch}`, this.prerelease.length && (this.version += `-${this.prerelease.join(".")}`), this.version;
  }
  toString() {
    return this.version;
  }
  compare(e) {
    if (m2("SemVer.compare", this.version, this.options, e), !(e instanceof E)) {
      if (typeof e == "string" && e === this.version)
        return 0;
      e = new E(e, this.options);
    }
    return e.version === this.version ? 0 : this.compareMain(e) || this.comparePre(e);
  }
  compareMain(e) {
    return e instanceof E || (e = new E(e, this.options)), K(this.major, e.major) || K(this.minor, e.minor) || K(this.patch, e.patch);
  }
  comparePre(e) {
    if (e instanceof E || (e = new E(e, this.options)), this.prerelease.length && !e.prerelease.length)
      return -1;
    if (!this.prerelease.length && e.prerelease.length)
      return 1;
    if (!this.prerelease.length && !e.prerelease.length)
      return 0;
    let t = 0;
    do {
      let r2 = this.prerelease[t], o2 = e.prerelease[t];
      if (m2("prerelease compare", t, r2, o2), r2 === void 0 && o2 === void 0)
        return 0;
      if (o2 === void 0)
        return 1;
      if (r2 === void 0)
        return -1;
      if (r2 !== o2)
        return K(r2, o2);
    } while (++t);
  }
  compareBuild(e) {
    e instanceof E || (e = new E(e, this.options));
    let t = 0;
    do {
      let r2 = this.build[t], o2 = e.build[t];
      if (m2("prerelease compare", t, r2, o2), r2 === void 0 && o2 === void 0)
        return 0;
      if (o2 === void 0)
        return 1;
      if (r2 === void 0)
        return -1;
      if (r2 !== o2)
        return K(r2, o2);
    } while (++t);
  }
  inc(e, t) {
    switch (e) {
      case "premajor":
        this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc("pre", t);
        break;
      case "preminor":
        this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc("pre", t);
        break;
      case "prepatch":
        this.prerelease.length = 0, this.inc("patch", t), this.inc("pre", t);
        break;
      case "prerelease":
        this.prerelease.length === 0 && this.inc("patch", t), this.inc("pre", t);
        break;
      case "major":
        this.minor === 0 && this.patch === 0 && this.prerelease.length !== 0 || this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];
        break;
      case "minor":
        this.patch === 0 && this.prerelease.length !== 0 || this.minor++, this.patch = 0, this.prerelease = [];
        break;
      case "patch":
        this.prerelease.length === 0 && this.patch++, this.prerelease = [];
        break;
      case "pre":
        if (this.prerelease.length === 0)
          this.prerelease = [0];
        else {
          let r2 = this.prerelease.length;
          for (; --r2 >= 0; )
            typeof this.prerelease[r2] == "number" && (this.prerelease[r2]++, r2 = -2);
          r2 === -1 && this.prerelease.push(0);
        }
        t && (this.prerelease[0] === t ? isNaN(this.prerelease[1]) && (this.prerelease = [t, 0]) : this.prerelease = [t, 0]);
        break;
      default:
        throw new Error(`invalid increment argument: ${e}`);
    }
    return this.format(), this.raw = this.version, this;
  }
};
var kt = (n, e, t) => new E(n, t).compare(new E(e, t));
var k = kt;
var qt = (n, e, t) => k(n, e, t) === 0;
var Jt = qt;
var Ut = (n, e, t) => k(n, e, t) !== 0;
var Gt = Ut;
var Ft = (n, e, t) => k(n, e, t) > 0;
var Kt = Ft;
var jt = (n, e, t) => k(n, e, t) >= 0;
var Wt = jt;
var Xt = (n, e, t) => k(n, e, t) < 0;
var Bt = Xt;
var Ht = (n, e, t) => k(n, e, t) <= 0;
var Vt = Ht;
var zt = (n, e, t, r2) => {
  switch (e) {
    case "===":
      return typeof n == "object" && (n = n.version), typeof t == "object" && (t = t.version), n === t;
    case "!==":
      return typeof n == "object" && (n = n.version), typeof t == "object" && (t = t.version), n !== t;
    case "":
    case "=":
    case "==":
      return Jt(n, t, r2);
    case "!=":
      return Gt(n, t, r2);
    case ">":
      return Kt(n, t, r2);
    case ">=":
      return Wt(n, t, r2);
    case "<":
      return Bt(n, t, r2);
    case "<=":
      return Vt(n, t, r2);
    default:
      throw new TypeError(`Invalid operator: ${e}`);
  }
};
var Ie = zt;
var j = Symbol("SemVer ANY");
var L = class {
  static get ANY() {
    return j;
  }
  constructor(e, t) {
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), e instanceof L) {
      if (e.loose === !!t.loose)
        return e;
      e = e.value;
    }
    m2("comparator", e, t), this.options = t, this.loose = !!t.loose, this.parse(e), this.semver === j ? this.value = "" : this.value = this.operator + this.semver.version, m2("comp", this);
  }
  parse(e) {
    let t = this.options.loose ? Ge[Fe.COMPARATORLOOSE] : Ge[Fe.COMPARATOR], r2 = e.match(t);
    if (!r2)
      throw new TypeError(`Invalid comparator: ${e}`);
    this.operator = r2[1] !== void 0 ? r2[1] : "", this.operator === "=" && (this.operator = ""), r2[2] ? this.semver = new E(r2[2], this.options.loose) : this.semver = j;
  }
  toString() {
    return this.value;
  }
  test(e) {
    if (m2("Comparator.test", e, this.options.loose), this.semver === j || e === j)
      return true;
    if (typeof e == "string")
      try {
        e = new E(e, this.options);
      } catch (t) {
        return false;
      }
    return Ie(e, this.operator, this.semver, this.options);
  }
  intersects(e, t) {
    if (!(e instanceof L))
      throw new TypeError("a Comparator is required");
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), this.operator === "")
      return this.value === "" || new $(e.value, t).test(this.value);
    if (e.operator === "")
      return e.value === "" || new $(this.value, t).test(e.semver);
    let r2 = !(this.operator !== ">=" && this.operator !== ">" || e.operator !== ">=" && e.operator !== ">"), o2 = !(this.operator !== "<=" && this.operator !== "<" || e.operator !== "<=" && e.operator !== "<"), s = this.semver.version === e.semver.version, a2 = !(this.operator !== ">=" && this.operator !== "<=" || e.operator !== ">=" && e.operator !== "<="), i = Ie(this.semver, "<", e.semver, t) && (this.operator === ">=" || this.operator === ">") && (e.operator === "<=" || e.operator === "<"), c2 = Ie(this.semver, ">", e.semver, t) && (this.operator === "<=" || this.operator === "<") && (e.operator === ">=" || e.operator === ">");
    return r2 || o2 || s && a2 || i || c2;
  }
};
var { re: Ge, t: Fe } = W;
var $ = class {
  constructor(e, t) {
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), e instanceof $)
      return e.loose === !!t.loose && e.includePrerelease === !!t.includePrerelease ? e : new $(e.raw, t);
    if (e instanceof L)
      return this.raw = e.value, this.set = [[e]], this.format(), this;
    if (this.options = t, this.loose = !!t.loose, this.includePrerelease = !!t.includePrerelease, this.raw = e, this.set = e.split(/\s*\|\|\s*/).map((r2) => this.parseRange(r2.trim())).filter((r2) => r2.length), !this.set.length)
      throw new TypeError(`Invalid SemVer Range: ${e}`);
    this.format();
  }
  format() {
    return this.range = this.set.map((e) => e.join(" ").trim()).join("||").trim(), this.range;
  }
  toString() {
    return this.range;
  }
  parseRange(e) {
    let { loose: t } = this.options;
    e = e.trim();
    let r2 = t ? g[y.HYPHENRANGELOOSE] : g[y.HYPHENRANGE];
    e = e.replace(r2, pn(this.options.includePrerelease)), m2("hyphen replace", e), e = e.replace(g[y.COMPARATORTRIM], Yt), m2("comparator trim", e, g[y.COMPARATORTRIM]), e = (e = (e = e.replace(g[y.TILDETRIM], Zt)).replace(g[y.CARETTRIM], Qt)).split(/\s+/).join(" ");
    let o2 = t ? g[y.COMPARATORLOOSE] : g[y.COMPARATOR];
    return e.split(" ").map((s) => en(s, this.options)).join(" ").split(/\s+/).map((s) => ln(s, this.options)).filter(this.options.loose ? (s) => !!s.match(o2) : () => true).map((s) => new L(s, this.options));
  }
  intersects(e, t) {
    if (!(e instanceof $))
      throw new TypeError("a Range is required");
    return this.set.some((r2) => Ke(r2, t) && e.set.some((o2) => Ke(o2, t) && r2.every((s) => o2.every((a2) => s.intersects(a2, t)))));
  }
  test(e) {
    if (!e)
      return false;
    if (typeof e == "string")
      try {
        e = new E(e, this.options);
      } catch (t) {
        return false;
      }
    for (let t = 0; t < this.set.length; t++)
      if (un(this.set[t], e, this.options))
        return true;
    return false;
  }
};
var { re: g, t: y, comparatorTrimReplace: Yt, tildeTrimReplace: Zt, caretTrimReplace: Qt } = W;
var Ke = (n, e) => {
  let t = true, r2 = n.slice(), o2 = r2.pop();
  for (; t && r2.length; )
    t = r2.every((s) => o2.intersects(s, e)), o2 = r2.pop();
  return t;
};
var en = (n, e) => (m2("comp", n, e), n = rn(n, e), m2("caret", n), n = tn(n, e), m2("tildes", n), n = on(n, e), m2("xrange", n), n = cn(n, e), m2("stars", n), n);
var T = (n) => !n || n.toLowerCase() === "x" || n === "*";
var tn = (n, e) => n.trim().split(/\s+/).map((t) => nn(t, e)).join(" ");
var nn = (n, e) => {
  let t = e.loose ? g[y.TILDELOOSE] : g[y.TILDE];
  return n.replace(t, (r2, o2, s, a2, i) => {
    let c2;
    return m2("tilde", n, r2, o2, s, a2, i), T(o2) ? c2 = "" : T(s) ? c2 = `>=${o2}.0.0 <${+o2 + 1}.0.0-0` : T(a2) ? c2 = `>=${o2}.${s}.0 <${o2}.${+s + 1}.0-0` : i ? (m2("replaceTilde pr", i), c2 = `>=${o2}.${s}.${a2}-${i} <${o2}.${+s + 1}.0-0`) : c2 = `>=${o2}.${s}.${a2} <${o2}.${+s + 1}.0-0`, m2("tilde return", c2), c2;
  });
};
var rn = (n, e) => n.trim().split(/\s+/).map((t) => sn(t, e)).join(" ");
var sn = (n, e) => {
  m2("caret", n, e);
  let t = e.loose ? g[y.CARETLOOSE] : g[y.CARET], r2 = e.includePrerelease ? "-0" : "";
  return n.replace(t, (o2, s, a2, i, c2) => {
    let p2;
    return m2("caret", n, o2, s, a2, i, c2), T(s) ? p2 = "" : T(a2) ? p2 = `>=${s}.0.0${r2} <${+s + 1}.0.0-0` : T(i) ? p2 = s === "0" ? `>=${s}.${a2}.0${r2} <${s}.${+a2 + 1}.0-0` : `>=${s}.${a2}.0${r2} <${+s + 1}.0.0-0` : c2 ? (m2("replaceCaret pr", c2), p2 = s === "0" ? a2 === "0" ? `>=${s}.${a2}.${i}-${c2} <${s}.${a2}.${+i + 1}-0` : `>=${s}.${a2}.${i}-${c2} <${s}.${+a2 + 1}.0-0` : `>=${s}.${a2}.${i}-${c2} <${+s + 1}.0.0-0`) : (m2("no pr"), p2 = s === "0" ? a2 === "0" ? `>=${s}.${a2}.${i}${r2} <${s}.${a2}.${+i + 1}-0` : `>=${s}.${a2}.${i}${r2} <${s}.${+a2 + 1}.0-0` : `>=${s}.${a2}.${i} <${+s + 1}.0.0-0`), m2("caret return", p2), p2;
  });
};
var on = (n, e) => (m2("replaceXRanges", n, e), n.split(/\s+/).map((t) => an(t, e)).join(" "));
var an = (n, e) => {
  n = n.trim();
  let t = e.loose ? g[y.XRANGELOOSE] : g[y.XRANGE];
  return n.replace(t, (r2, o2, s, a2, i, c2) => {
    m2("xRange", n, r2, o2, s, a2, i, c2);
    let p2 = T(s), l = p2 || T(a2), u2 = l || T(i), P = u2;
    return o2 === "=" && P && (o2 = ""), c2 = e.includePrerelease ? "-0" : "", p2 ? r2 = o2 === ">" || o2 === "<" ? "<0.0.0-0" : "*" : o2 && P ? (l && (a2 = 0), i = 0, o2 === ">" ? (o2 = ">=", l ? (s = +s + 1, a2 = 0, i = 0) : (a2 = +a2 + 1, i = 0)) : o2 === "<=" && (o2 = "<", l ? s = +s + 1 : a2 = +a2 + 1), o2 === "<" && (c2 = "-0"), r2 = `${o2 + s}.${a2}.${i}${c2}`) : l ? r2 = `>=${s}.0.0${c2} <${+s + 1}.0.0-0` : u2 && (r2 = `>=${s}.${a2}.0${c2} <${s}.${+a2 + 1}.0-0`), m2("xRange return", r2), r2;
  });
};
var cn = (n, e) => (m2("replaceStars", n, e), n.trim().replace(g[y.STAR], ""));
var ln = (n, e) => (m2("replaceGTE0", n, e), n.trim().replace(g[e.includePrerelease ? y.GTE0PRE : y.GTE0], ""));
var pn = (n) => (e, t, r2, o2, s, a2, i, c2, p2, l, u2, P, A) => `${t = T(r2) ? "" : T(o2) ? `>=${r2}.0.0${n ? "-0" : ""}` : T(s) ? `>=${r2}.${o2}.0${n ? "-0" : ""}` : a2 ? `>=${t}` : `>=${t}${n ? "-0" : ""}`} ${c2 = T(p2) ? "" : T(l) ? `<${+p2 + 1}.0.0-0` : T(u2) ? `<${p2}.${+l + 1}.0-0` : P ? `<=${p2}.${l}.${u2}-${P}` : n ? `<${p2}.${l}.${+u2 + 1}-0` : `<=${c2}`}`.trim();
var un = (n, e, t) => {
  for (let r2 = 0; r2 < n.length; r2++)
    if (!n[r2].test(e))
      return false;
  if (e.prerelease.length && !t.includePrerelease) {
    for (let r2 = 0; r2 < n.length; r2++)
      if (m2(n[r2].semver), n[r2].semver !== L.ANY && n[r2].semver.prerelease.length > 0) {
        let o2 = n[r2].semver;
        if (o2.major === e.major && o2.minor === e.minor && o2.patch === e.patch)
          return true;
      }
    return false;
  }
  return true;
};
var Be = (n, e, t) => {
  try {
    e = new $(e, t);
  } catch (r2) {
    return false;
  }
  return e.test(n);
};
var { MAX_LENGTH: dn } = Pe;
var { re: je, t: We } = W;
var mn = (n, e) => {
  if (e && typeof e == "object" || (e = { loose: !!e, includePrerelease: false }), n instanceof E)
    return n;
  if (typeof n != "string" || n.length > dn || !(e.loose ? je[We.LOOSE] : je[We.FULL]).test(n))
    return null;
  try {
    return new E(n, e);
  } catch (t) {
    return null;
  }
};
var hn = mn;
var { re: ee, t: te } = W;
var He = (n, e) => {
  if (n instanceof E)
    return n;
  if (typeof n == "number" && (n = String(n)), typeof n != "string")
    return null;
  let t = null;
  if ((e = e || {}).rtl) {
    let r2;
    for (; (r2 = ee[te.COERCERTL].exec(n)) && (!t || t.index + t[0].length !== n.length); )
      t && r2.index + r2[0].length === t.index + t[0].length || (t = r2), ee[te.COERCERTL].lastIndex = r2.index + r2[1].length + r2[2].length;
    ee[te.COERCERTL].lastIndex = -1;
  } else
    t = n.match(ee[te.COERCE]);
  return t === null ? null : hn(`${t[2]}.${t[3] || "0"}.${t[4] || "0"}`, e);
};
function En(n) {
  return String.fromCharCode(parseInt(n.slice(1), 16));
}
function fn(n) {
  return `%${`00${n.charCodeAt(0).toString(16)}`.slice(-2)}`;
}
function yn(n) {
  return btoa(encodeURIComponent(n).replace(/%[0-9A-F]{2}/g, En));
}
function gn(n) {
  return decodeURIComponent(Array.from(atob(n), fn).join(""));
}
function ne(n) {
  return yn(JSON.stringify(n));
}
function Ve(n) {
  return JSON.parse(gn(n));
}
function N(n) {
  return typeof n == "undefined";
}
function vn(n) {
  return n === null;
}
function re(n) {
  return vn(n) || N(n);
}
function ze(n) {
  return re(n) ? false : !N(n.jsonrpc) && !N(n.id) && (!N(n.result) || !N(n.error));
}
function Ye(n) {
  return re(n) ? false : typeof n == "number" && Object.values(m).includes(n);
}
function se(n) {
  if (!n)
    return true;
  for (let e in n)
    if (Object.hasOwnProperty.call(n, e))
      return false;
  return true;
}
var h = {};
function In(n, e) {
  return Object.assign(h, e), n;
}
var Ze = { "magic-sdk": "magic-sdk", "@magic-sdk/react-native": "magic-sdk-rn", "@magic-sdk/react-native-bare": "magic-sdk-rn-bare", "@magic-sdk/react-native-expo": "magic-sdk-rn-expo" };
var b = class extends Error {
  constructor(t, r2) {
    super(`Magic SDK Error: [${t}] ${r2}`);
    this.code = t;
    this.rawMessage = r2;
    this.__proto__ = Error;
    Object.setPrototypeOf(this, b.prototype);
  }
};
var M = class extends Error {
  constructor(t) {
    super();
    this.__proto__ = Error;
    let r2 = Number(t == null ? void 0 : t.code);
    this.rawMessage = (t == null ? void 0 : t.message) || "Internal error", this.code = Ye(r2) ? r2 : m.InternalError, this.message = `Magic RPC Error: [${this.code}] ${this.rawMessage}`, this.data = (t == null ? void 0 : t.data) || void 0, Object.setPrototypeOf(this, M.prototype);
  }
};
var q = class {
  constructor(e, t) {
    this.code = e;
    this.rawMessage = t;
    this.message = `Magic SDK Warning: [${e}] ${t}`;
  }
  log() {
    console.warn(this.message);
  }
};
var J = class extends Error {
  constructor(t, r2, o2, s) {
    super(`Magic Extension Error (${t.name}): [${r2}] ${o2}`);
    this.code = r2;
    this.rawMessage = o2;
    this.data = s;
    this.__proto__ = Error;
    Object.setPrototypeOf(this, J.prototype);
  }
};
var X = class {
  constructor(e, t, r2) {
    this.code = t;
    this.rawMessage = r2;
    this.message = `Magic Extension Warning (${e.name}): [${t}] ${r2}`;
  }
  log() {
    console.warn(this.message);
  }
};
function Qe() {
  return new b(r.MissingApiKey, "Please provide an API key that you acquired from the Magic developer dashboard.");
}
function dr() {
  return new b(r.ModalNotReady, "Modal is not ready.");
}
function et() {
  return new b(r.MalformedResponse, "Response from the Magic iframe is malformed.");
}
function tt(n) {
  return new b(r.ExtensionNotInitialized, `Extensions must be initialized with a Magic SDK instance before \`Extension.${n}\` can be accessed. Do not invoke \`Extension.${n}\` inside an extension constructor.`);
}
function nt(n) {
  let e = `Some extensions are incompatible with \`${h.sdkName}@${h.version}\`:`;
  return n.filter((t) => typeof t.compat != "undefined" && t.compat !== null).forEach((t) => {
    let r2 = t.compat[h.sdkName];
    typeof r2 == "string" ? e += `
  - Extension \`${t.name}\` supports version(s) \`${r2}\`` : r2 || (e += `
  - Extension \`${t.name}\` does not support ${h.platform} environments.`);
  }), new b(r.IncompatibleExtensions, e);
}
function rt(n) {
  let e = (t) => {
    let r2 = t + 1, o2 = r2 % 10, s = r2 % 100;
    return o2 === 1 && s !== 11 ? `${r2}st` : o2 === 2 && s !== 12 ? `${r2}nd` : o2 === 3 && s !== 13 ? `${r2}rd` : `${r2}th`;
  };
  return new b(r.InvalidArgument, `Invalid ${e(n.argument)} argument given to \`${n.procedure}\`.
  Expected: \`${n.expected}\`
  Received: \`${n.received}\``);
}
function mr() {
  return new q(a.DuplicateIframe, "Duplicate iframes found.");
}
function st() {
  return new q(a.SyncWeb3Method, "Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.");
}
function ot() {
  return new q(a.ReactNativeEndpointConfiguration, `CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${h.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`);
}
function* xn() {
  let n = 0;
  for (; ; )
    n < Number.MAX_SAFE_INTEGER ? yield ++n : n = 0;
}
var bn = xn();
function xe() {
  return bn.next().value;
}
var it = Symbol("Payload pre-processed by Magic SDK");
function at(n) {
  return Object.defineProperty(n, it, { value: true, enumerable: false }), n;
}
function $n(n) {
  return !!n[it];
}
function _(n) {
  var e, t, r2;
  return $n(n) || (n.jsonrpc = (e = n.jsonrpc) != null ? e : "2.0", n.id = xe(), n.method = (t = n.method) != null ? t : "noop", n.params = (r2 = n.params) != null ? r2 : [], at(n)), n;
}
function d(n, e = []) {
  return at({ params: e, method: n, jsonrpc: "2.0", id: xe() });
}
var S = class {
  constructor(e) {
    e instanceof S ? (this._jsonrpc = e.payload.jsonrpc, this._id = e.payload.id, this._result = e.payload.result, this._error = e.payload.error) : ze(e) ? (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = e.result, this._error = e.error) : (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = void 0, this._error = void 0);
  }
  applyError(e) {
    return this._error = e, this;
  }
  applyResult(e) {
    return this._result = e, this;
  }
  get hasError() {
    return typeof this._error != "undefined" && this._error !== null;
  }
  get hasResult() {
    return typeof this._result != "undefined";
  }
  get payload() {
    return { jsonrpc: this._jsonrpc, id: this._id, result: this._result, error: this._error };
  }
};
var pt = Lt(lt());
var $e = class extends pt.default {
};
function ae() {
  let n = new $e();
  return { emitter: n, createChainingEmitterMethod: (r2, o2) => (...s) => (n[r2].apply(n, s), o2), createBoundEmitterMethod: (r2) => (...o2) => n[r2].apply(n, o2) };
}
var ut = Symbol("isPromiEvent");
function dt(n) {
  return !!n[ut];
}
function ce(n) {
  let e = Ne(n), { createBoundEmitterMethod: t, createChainingEmitterMethod: r2 } = ae(), o2 = Symbol("Promise.then"), s = Symbol("Promise.catch"), a2 = Symbol("Promise.finally"), i = (l, u2) => (...P) => {
    let A = u2[l].apply(u2, P);
    return c2(A);
  }, c2 = (l) => Object.assign(l, { [ut]: true, [o2]: l[o2] || l.then, [s]: l[s] || l.catch, [a2]: l[a2] || l.finally, then: i(o2, l), catch: i(s, l), finally: i(a2, l), on: r2("on", l), once: r2("once", l), addListener: r2("addListener", l), off: r2("off", l), removeListener: r2("removeListener", l), removeAllListeners: r2("removeAllListeners", l), emit: t("emit"), eventNames: t("eventNames"), listeners: t("listeners"), listenerCount: t("listenerCount") }), p2 = c2(e.then((l) => (p2.emit("done", l), p2.emit("settled"), l), (l) => {
    throw p2.emit("error", l), p2.emit("settled"), l;
  }));
  return p2;
}
function Ne(n) {
  return new Promise((e, t) => {
    let r2 = n(e, t);
    Promise.resolve(r2).catch(t);
  });
}
var I = class {
  constructor(e) {
    this.sdk = e;
  }
  get overlay() {
    return this.sdk.overlay;
  }
  request(e) {
    let t = this.overlay.post(o.MAGIC_HANDLE_REQUEST, _(e)), r2 = ce((s, a2) => {
      t.then((i) => {
        if (o2(), i.hasError)
          a2(new M(i.payload.error));
        else if (i.hasResult)
          s(i.payload.result);
        else
          throw et();
      }).catch((i) => {
        o2(), a2(i);
      });
    }), o2 = this.overlay.on(u.MAGIC_HANDLE_EVENT, (s) => {
      var i;
      let { response: a2 } = s.data;
      if (a2.id === e.id && ((i = a2.result) == null ? void 0 : i.event)) {
        let { event: c2, params: p2 = [] } = a2.result;
        r2.emit(c2, ...p2);
      }
    });
    return r2;
  }
  createIntermediaryEvent(e, t) {
    return (o2) => {
      let s = d(p.IntermediaryEvent, [{ payloadId: t, eventType: e, args: o2 }]);
      this.request(s);
    };
  }
};
var le = class extends I {
  loginWithMagicLink(e) {
    let { email: t, showUI: r2 = true, redirectURI: o2 } = e, s = d(this.sdk.testMode ? p.LoginWithMagicLinkTestMode : p.LoginWithMagicLink, [{ email: t, showUI: r2, redirectURI: o2 }]);
    return this.request(s);
  }
  loginWithSMS(e) {
    let { phoneNumber: t } = e, r2 = d(this.sdk.testMode ? p.LoginWithSmsTestMode : p.LoginWithSms, [{ phoneNumber: t, showUI: true }]);
    return this.request(r2);
  }
  loginWithEmailOTP(e) {
    let { email: t, showUI: r2 } = e, o2 = d(this.sdk.testMode ? p.LoginWithEmailOTPTestMode : p.LoginWithEmailOTP, [{ email: t, showUI: r2 }]);
    if (!r2) {
      let s = this.request(o2);
      return s && s.on("otp-input-sent", (a2) => {
        this.createIntermediaryEvent("verify-email-otp", o2.id)(a2);
      }), s;
    }
    return this.request(o2);
  }
  loginWithCredential(e) {
    let t = e != null ? e : "";
    if (!e && h.platform === "web") {
      t = window.location.search;
      let o2 = window.location.origin + window.location.pathname;
      window.history.replaceState(null, "", o2);
    }
    let r2 = d(this.sdk.testMode ? p.LoginWithCredentialTestMode : p.LoginWithCredential, [t]);
    return this.request(r2);
  }
};
var H = {};
wt(H, { clear: () => Sn, getItem: () => D, iterate: () => Dn, key: () => Cn, keys: () => _n, length: () => On, removeItem: () => ue, setItem: () => G });
var pe;
function C(n) {
  return (...e) => x(this, null, function* () {
    return pe || (pe = yield h.configureStorage()), yield pe.ready(), pe[n](...e);
  });
}
var D = C("getItem");
var G = C("setItem");
var ue = C("removeItem");
var Sn = C("clear");
var On = C("length");
var Cn = C("key");
var _n = C("keys");
var Dn = C("iterate");
function mt() {
  let n = window.crypto.getRandomValues(new Uint8Array(16));
  n[6] = n[6] & 15 | 64, n[8] = n[8] & 191 | 128;
  let e = "";
  return e += n[0].toString(16), e += n[1].toString(16), e += n[2].toString(16), e += n[3].toString(16), e += "-", e += n[4].toString(16), e += n[5].toString(16), e += "-", e += n[6].toString(16), e += n[7].toString(16), e += "-", e += n[8].toString(16), e += n[9].toString(16), e += "-", e += n[10].toString(16), e += n[11].toString(16), e += n[12].toString(16), e += n[13].toString(16), e += n[14].toString(16), e += n[15].toString(16), e;
}
var Me = "STORE_KEY_PRIVATE_KEY";
var de = "STORE_KEY_PUBLIC_JWK";
var we = "ECDSA";
var Et = "P-256";
var kn = { name: we, namedCurve: Et };
var qn = { name: we, namedCurve: Et };
function me() {
  ue(de), ue(Me);
}
function ft() {
  return x(this, null, function* () {
    let n = yield Jn();
    if (!n) {
      console.info("unable to create public key or webcrypto is unsupported");
      return;
    }
    let { subtle: e } = window.crypto, t = yield D(Me);
    if (!t || !e) {
      console.info("unable to find private key or webcrypto unsupported");
      return;
    }
    let r2 = { iat: Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3), jti: mt() }, o2 = { typ: "dpop+jwt", alg: "ES256", jwk: n }, s = { protected: ht(JSON.stringify(o2)), claims: ht(JSON.stringify(r2)) }, a2 = Fn(`${s.protected}.${s.claims}`), i = { name: we, hash: { name: "SHA-256" } }, c2 = jn(new Uint8Array(yield e.sign(i, t, a2)));
    return `${s.protected}.${s.claims}.${c2}`;
  });
}
function Jn() {
  return x(this, null, function* () {
    if (!Gn()) {
      console.info("webcrypto is not supported");
      return;
    }
    return (yield D(de)) || (yield Un()), D(de);
  });
}
function Un() {
  return x(this, null, function* () {
    let n = null, { subtle: e } = window.crypto, t = yield e.generateKey(kn, true, ["sign"]), r2 = yield e.exportKey("jwk", t.privateKey);
    n = yield e.exportKey("jwk", t.publicKey);
    let o2 = yield e.importKey("jwk", r2, qn, false, ["sign"]);
    yield G(Me, o2), yield G(de, n);
  });
}
function Gn() {
  let n = typeof window != "undefined" && !!window.crypto, e = n && !!window.crypto.subtle;
  return n && e;
}
function ht(n) {
  return yt(Kn(n));
}
function Fn(n) {
  return new TextEncoder().encode(n);
}
function yt(n) {
  return btoa(n).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+/g, "");
}
function Kn(n) {
  return encodeURIComponent(n).replace(/%([0-9A-F]{2})/g, (t, r2) => String.fromCharCode(parseInt(r2, 16)));
}
function jn(n) {
  let e = "";
  return n.forEach((t) => {
    e += String.fromCharCode(t);
  }), yt(e);
}
var he = class extends I {
  getIdToken(e) {
    let t = d(this.sdk.testMode ? p.GetIdTokenTestMode : p.GetIdToken, [e]);
    return this.request(t);
  }
  generateIdToken(e) {
    let t = d(this.sdk.testMode ? p.GenerateIdTokenTestMode : p.GenerateIdToken, [e]);
    return this.request(t);
  }
  getMetadata() {
    let e = d(this.sdk.testMode ? p.GetMetadataTestMode : p.GetMetadata);
    return this.request(e);
  }
  updateEmail(e) {
    let { email: t, showUI: r2 = true } = e, o2 = d(this.sdk.testMode ? p.UpdateEmailTestMode : p.UpdateEmail, [{ email: t, showUI: r2 }]);
    return this.request(o2);
  }
  isLoggedIn() {
    let e = d(this.sdk.testMode ? p.IsLoggedInTestMode : p.IsLoggedIn);
    return this.request(e);
  }
  logout() {
    me();
    let e = d(this.sdk.testMode ? p.LogoutTestMode : p.Logout);
    return this.request(e);
  }
  showSettings() {
    let e = d(this.sdk.testMode ? p.UserSettingsTestMode : p.UserSettings);
    return this.request(e);
  }
  updatePhoneNumber() {
    let e = d(this.sdk.testMode ? p.UpdatePhoneNumberTestMode : p.UpdatePhoneNumber);
    return this.request(e);
  }
  recoverAccount(e) {
    let t = d(this.sdk.testMode ? p.RecoverAccountTestMode : p.RecoverAccount, [e]);
    return this.request(t);
  }
};
var Ee = class extends I {
  connectWithUI() {
    let e = d(p.RequestAccounts);
    return this.request(e);
  }
  showUI() {
    let e = d(p.ShowUI);
    return this.request(e);
  }
  getInfo() {
    let e = d(p.GetInfo);
    return this.request(e);
  }
  requestUserInfoWithUI(e) {
    let t = d(p.RequestUserInfoWithUI, e ? [e] : []);
    return this.request(t);
  }
  disconnect() {
    me();
    let e = d(p.Disconnect);
    return this.request(e);
  }
};
var { createBoundEmitterMethod: fe, createChainingEmitterMethod: F } = ae();
var ye = class extends I {
  constructor() {
    super(...arguments);
    this.isMagic = true;
    this.on = F("on", this);
    this.once = F("once", this);
    this.addListener = F("addListener", this);
    this.off = F("off", this);
    this.removeListener = F("removeListener", this);
    this.removeAllListeners = F("removeAllListeners", this);
    this.emit = fe("emit");
    this.eventNames = fe("eventNames");
    this.listeners = fe("listeners");
    this.listenerCount = fe("listenerCount");
  }
  sendAsync(t, r2) {
    if (!r2)
      throw rt({ procedure: "Magic.rpcProvider.sendAsync", argument: 1, expected: "function", received: r2 === null ? "null" : typeof r2 });
    if (Array.isArray(t))
      this.overlay.post(o.MAGIC_HANDLE_REQUEST, t.map((o2) => {
        let s = _(o2);
        return this.prefixPayloadMethodForTestMode(s), s;
      })).then((o2) => {
        r2(null, o2.map((s) => De(Z({}, s.payload), { error: s.hasError ? new M(s.payload.error) : null })));
      });
    else {
      let o2 = _(t);
      this.prefixPayloadMethodForTestMode(o2), this.overlay.post(o.MAGIC_HANDLE_REQUEST, o2).then((s) => {
        r2(s.hasError ? new M(s.payload.error) : null, s.payload);
      });
    }
  }
  send(t, r2) {
    if (typeof t == "string") {
      let s = d(t, Array.isArray(r2) ? r2 : []);
      return this.request(s);
    }
    if (Array.isArray(t) || !!r2) {
      this.sendAsync(t, r2);
      return;
    }
    let o2 = st();
    return o2.log(), new S(t).applyError({ code: -32603, message: o2.rawMessage }).payload;
  }
  enable() {
    let t = d("eth_accounts");
    return this.request(t);
  }
  request(t) {
    return this.prefixPayloadMethodForTestMode(t), super.request(t);
  }
  prefixPayloadMethodForTestMode(t) {
    let r2 = "testMode/eth/";
    this.sdk.testMode && (t.method = `${r2}${t.method}`);
  }
};
function Ae(n, e) {
  return e ? new URL(n, e) : new URL(n);
}
var Rt = ["request", "overlay", "sdk"];
function Wn(n) {
  let e = Object.getPrototypeOf(n), t = [e];
  for (; e !== I.prototype; )
    e = Object.getPrototypeOf(e), t.push(e);
  return t;
}
var ge = class extends I {
  constructor() {
    super(void 0);
    this.__sdk_access_field_descriptors__ = /* @__PURE__ */ new Map();
    this.__is_initialized__ = false;
    this.utils = { createPromiEvent: ce, isPromiEvent: dt, encodeJSON: ne, decodeJSON: Ve, createJsonRpcRequestPayload: d, standardizeJsonRpcRequestPayload: _, storage: H };
    let t = [this, ...Wn(this)];
    Rt.forEach((r2) => {
      let o2 = t.map((c2) => Object.getOwnPropertyDescriptor(c2, r2)), s = o2.findIndex((c2) => !!c2), a2 = s > 0, i = o2[s];
      i && (this.__sdk_access_field_descriptors__.set(r2, { descriptor: i, isPrototypeField: a2 }), Object.defineProperty(this, r2, { configurable: true, get: () => {
        throw tt(r2);
      } }));
    });
  }
  init(t) {
    this.__is_initialized__ || (Rt.forEach((r2) => {
      if (this.__sdk_access_field_descriptors__.has(r2)) {
        let { descriptor: o2, isPrototypeField: s } = this.__sdk_access_field_descriptors__.get(r2);
        s ? delete this[r2] : Object.defineProperty(this, r2, o2);
      }
    }), this.sdk = t, this.__is_initialized__ = true);
  }
  createDeprecationWarning(t) {
    let { method: r2, removalVersion: o2, useInstead: s } = t, a2 = s ? ` Use \`${s}\` instead.` : "", i = `\`${r2}\` will be removed from this Extension in version \`${o2}\`.${a2}`;
    return new X(this, "DEPRECATION_NOTICE", i);
  }
  createWarning(t, r2) {
    return new X(this, t, r2);
  }
  createError(t, r2, o2) {
    return new J(this, t, r2, o2);
  }
};
var Le = class extends ge {
};
var w = class extends ge {
};
w.Internal = Le, w.Anonymous = "anonymous extension";
var Re = class extends I {
  purchase(e) {
    let t = d(p.NFTPurchase, [e]);
    return this.request(t);
  }
};
function Tt(n) {
  return n.compat && n.compat[h.sdkName] != null ? typeof n.compat[h.sdkName] == "string" ? Be(He(h.version), n.compat[h.sdkName]) : !!n.compat[h.sdkName] : true;
}
function Bn(n) {
  var o2;
  let e = (o2 = n == null ? void 0 : n.extensions) != null ? o2 : [], t = {}, r2 = [];
  if (Array.isArray(e) ? e.forEach((s) => {
    Tt(s) ? (s.init(this), (s.name || s.name !== w.Anonymous) && (this[s.name] = s), s instanceof w.Internal && (se(s.config) || (t[s.name] = s.config))) : r2.push(s);
  }) : Object.keys(e).forEach((s) => {
    if (Tt(e[s])) {
      e[s].init(this);
      let a2 = e[s];
      this[s] = a2, a2 instanceof w.Internal && (se(a2.config) || (t[e[s].name] = a2.config));
    } else
      r2.push(e[s]);
  }), r2.length)
    throw nt(r2);
  return t;
}
var z = class {
  constructor(e, t) {
    this.apiKey = e;
    var a2;
    if (!e)
      throw Qe();
    h.platform === "react-native" && (t == null ? void 0 : t.endpoint) && ot().log();
    let { defaultEndpoint: r2, version: o2 } = h;
    this.testMode = !!(t != null && t.testMode), this.endpoint = Ae((a2 = t == null ? void 0 : t.endpoint) != null ? a2 : r2).origin, this.auth = new le(this), this.user = new he(this), this.wallet = new Ee(this), this.nft = new Re(this), this.rpcProvider = new ye(this);
    let s = Bn.call(this, t);
    this.parameters = ne(Z({ API_KEY: this.apiKey, DOMAIN_ORIGIN: window.location ? window.location.origin : "", ETH_NETWORK: t == null ? void 0 : t.network, host: Ae(this.endpoint).host, sdk: Ze[h.sdkName], version: o2, ext: se(s) ? void 0 : s, locale: (t == null ? void 0 : t.locale) || "en_US" }, h.bundleId ? { bundleId: h.bundleId } : {}));
  }
  get overlay() {
    if (!z.__overlays__.has(this.parameters)) {
      let e = new h.ViewController(this.endpoint, this.parameters);
      e.init(), z.__overlays__.set(this.parameters, e);
    }
    return z.__overlays__.get(this.parameters);
  }
  preload() {
    return x(this, null, function* () {
      yield this.overlay.ready;
    });
  }
};
var Te = z;
Te.__overlays__ = /* @__PURE__ */ new Map();
function Hn(n, e) {
  return e && Array.isArray(n) ? n.find((t) => t.id === e) : n;
}
function Vn(n, e) {
  var o2;
  let t = (o2 = e.data.response) == null ? void 0 : o2.id, r2 = Hn(n, t);
  if (t && r2) {
    let s = new S(r2).applyResult(e.data.response.result).applyError(e.data.response.error);
    return { id: t, response: s };
  }
  return {};
}
function zn(n, e) {
  return x(this, null, function* () {
    let t = yield D("rt"), r2;
    if (h.platform === "web")
      try {
        r2 = yield ft();
      } catch (o2) {
        console.error("webcrypto error", o2);
      }
    return r2 ? t ? { msgType: n, payload: e, jwt: r2, rt: t } : { msgType: n, payload: e, jwt: r2 } : { msgType: n, payload: e };
  });
}
function Yn(n) {
  return x(this, null, function* () {
    !n.data.rt || (yield G("rt", n.data.rt));
  });
}
var Se = class {
  constructor(e, t) {
    this.endpoint = e;
    this.parameters = t;
    this.messageHandlers = /* @__PURE__ */ new Set();
    this.ready = this.waitForReady(), this.listen();
  }
  post(e, t) {
    return x(this, null, function* () {
      return Ne((r2) => x(this, null, function* () {
        yield this.ready;
        let o2 = [], s = Array.isArray(t) ? t.map((p2) => p2.id) : [], a2 = yield zn(`${e}-${this.parameters}`, t);
        yield this._post(a2);
        let i = (p2) => (l) => {
          let { id: u2, response: P } = Vn(t, l);
          Yn(l), u2 && P && Array.isArray(t) && s.includes(u2) ? (o2.push(P), o2.length === t.length && (p2(), r2(o2))) : u2 && P && !Array.isArray(t) && u2 === t.id && (p2(), r2(P));
        }, c2 = this.on(u.MAGIC_HANDLE_RESPONSE, i(() => c2()));
      }));
    });
  }
  on(e, t) {
    let r2 = t.bind(window), o2 = (s) => {
      s.data.msgType === `${e}-${this.parameters}` && r2(s);
    };
    return this.messageHandlers.add(o2), () => this.messageHandlers.delete(o2);
  }
  waitForReady() {
    return new Promise((e) => {
      this.on(u.MAGIC_OVERLAY_READY, () => e());
    });
  }
  listen() {
    this.on(u.MAGIC_HIDE_OVERLAY, () => {
      this.hideOverlay();
    }), this.on(u.MAGIC_SHOW_OVERLAY, () => {
      this.showOverlay();
    });
  }
};

// node_modules/magic-sdk/dist/es/index.mjs
var Zr = Object.create;
var Je2 = Object.defineProperty;
var qr = Object.getOwnPropertyDescriptor;
var kr = Object.getOwnPropertyNames;
var et2 = Object.getPrototypeOf;
var rt2 = Object.prototype.hasOwnProperty;
var ve = ((b2) => typeof __require != "undefined" ? __require : typeof Proxy != "undefined" ? new Proxy(b2, { get: (A, R) => (typeof __require != "undefined" ? __require : A)[R] }) : b2)(function(b2) {
  if (typeof __require != "undefined")
    return __require.apply(this, arguments);
  throw new Error('Dynamic require of "' + b2 + '" is not supported');
});
var $e2 = (b2, A) => () => (A || b2((A = { exports: {} }).exports, A), A.exports);
var tt2 = (b2, A, R, L2) => {
  if (A && typeof A == "object" || typeof A == "function")
    for (let D3 of kr(A))
      !rt2.call(b2, D3) && D3 !== R && Je2(b2, D3, { get: () => A[D3], enumerable: !(L2 = qr(A, D3)) || L2.enumerable });
  return b2;
};
var Ze2 = (b2, A, R) => (R = b2 != null ? Zr(et2(b2)) : {}, tt2(A || !b2 || !b2.__esModule ? Je2(R, "default", { value: b2, enumerable: true }) : R, b2));
var se2 = (b2, A, R) => new Promise((L2, D3) => {
  var X2 = (I2) => {
    try {
      Y3(R.next(I2));
    } catch (M3) {
      D3(M3);
    }
  }, P = (I2) => {
    try {
      Y3(R.throw(I2));
    } catch (M3) {
      D3(M3);
    }
  }, Y3 = (I2) => I2.done ? L2(I2.value) : Promise.resolve(I2.value).then(X2, P);
  Y3((R = R.apply(b2, A)).next());
});
var ke2 = $e2((qe2, Ne2) => {
  (function(b2) {
    if (typeof qe2 == "object" && typeof Ne2 < "u")
      Ne2.exports = b2();
    else if (typeof define == "function" && define.amd)
      define([], b2);
    else {
      var A;
      typeof window < "u" ? A = window : typeof global < "u" ? A = global : typeof self < "u" ? A = self : A = this, A.localforage = b2();
    }
  })(function() {
    var b2, A, R;
    return function L2(D3, X2, P) {
      function Y3(H3, $3) {
        if (!X2[H3]) {
          if (!D3[H3]) {
            var m3 = typeof ve == "function" && ve;
            if (!$3 && m3)
              return m3(H3, true);
            if (I2)
              return I2(H3, true);
            var _2 = new Error("Cannot find module '" + H3 + "'");
            throw _2.code = "MODULE_NOT_FOUND", _2;
          }
          var B = X2[H3] = { exports: {} };
          D3[H3][0].call(B.exports, function(z3) {
            var Z2 = D3[H3][1][z3];
            return Y3(Z2 || z3);
          }, B, B.exports, L2, D3, X2, P);
        }
        return X2[H3].exports;
      }
      for (var I2 = typeof ve == "function" && ve, M3 = 0; M3 < P.length; M3++)
        Y3(P[M3]);
      return Y3;
    }({ 1: [function(L2, D3, X2) {
      (function(P) {
        "use strict";
        var Y3 = P.MutationObserver || P.WebKitMutationObserver, I2;
        if (Y3) {
          var M3 = 0, H3 = new Y3(z3), $3 = P.document.createTextNode("");
          H3.observe($3, { characterData: true }), I2 = function() {
            $3.data = M3 = ++M3 % 2;
          };
        } else if (!P.setImmediate && typeof P.MessageChannel < "u") {
          var m3 = new P.MessageChannel();
          m3.port1.onmessage = z3, I2 = function() {
            m3.port2.postMessage(0);
          };
        } else
          "document" in P && "onreadystatechange" in P.document.createElement("script") ? I2 = function() {
            var F2 = P.document.createElement("script");
            F2.onreadystatechange = function() {
              z3(), F2.onreadystatechange = null, F2.parentNode.removeChild(F2), F2 = null;
            }, P.document.documentElement.appendChild(F2);
          } : I2 = function() {
            setTimeout(z3, 0);
          };
        var _2, B = [];
        function z3() {
          _2 = true;
          for (var F2, k3, U = B.length; U; ) {
            for (k3 = B, B = [], F2 = -1; ++F2 < U; )
              k3[F2]();
            U = B.length;
          }
          _2 = false;
        }
        D3.exports = Z2;
        function Z2(F2) {
          B.push(F2) === 1 && !_2 && I2();
        }
      }).call(this, typeof global < "u" ? global : typeof self < "u" ? self : typeof window < "u" ? window : {});
    }, {}], 2: [function(L2, D3, X2) {
      "use strict";
      var P = L2(1);
      function Y3() {
      }
      var I2 = {}, M3 = ["REJECTED"], H3 = ["FULFILLED"], $3 = ["PENDING"];
      D3.exports = m3;
      function m3(h2) {
        if (typeof h2 != "function")
          throw new TypeError("resolver must be a function");
        this.state = $3, this.queue = [], this.outcome = void 0, h2 !== Y3 && Z2(this, h2);
      }
      m3.prototype.catch = function(h2) {
        return this.then(null, h2);
      }, m3.prototype.then = function(h2, N3) {
        if (typeof h2 != "function" && this.state === H3 || typeof N3 != "function" && this.state === M3)
          return this;
        var E3 = new this.constructor(Y3);
        if (this.state !== $3) {
          var O2 = this.state === H3 ? h2 : N3;
          B(E3, O2, this.outcome);
        } else
          this.queue.push(new _2(E3, h2, N3));
        return E3;
      };
      function _2(h2, N3, E3) {
        this.promise = h2, typeof N3 == "function" && (this.onFulfilled = N3, this.callFulfilled = this.otherCallFulfilled), typeof E3 == "function" && (this.onRejected = E3, this.callRejected = this.otherCallRejected);
      }
      _2.prototype.callFulfilled = function(h2) {
        I2.resolve(this.promise, h2);
      }, _2.prototype.otherCallFulfilled = function(h2) {
        B(this.promise, this.onFulfilled, h2);
      }, _2.prototype.callRejected = function(h2) {
        I2.reject(this.promise, h2);
      }, _2.prototype.otherCallRejected = function(h2) {
        B(this.promise, this.onRejected, h2);
      };
      function B(h2, N3, E3) {
        P(function() {
          var O2;
          try {
            O2 = N3(E3);
          } catch (V2) {
            return I2.reject(h2, V2);
          }
          O2 === h2 ? I2.reject(h2, new TypeError("Cannot resolve promise with itself")) : I2.resolve(h2, O2);
        });
      }
      I2.resolve = function(h2, N3) {
        var E3 = F2(z3, N3);
        if (E3.status === "error")
          return I2.reject(h2, E3.value);
        var O2 = E3.value;
        if (O2)
          Z2(h2, O2);
        else {
          h2.state = H3, h2.outcome = N3;
          for (var V2 = -1, j3 = h2.queue.length; ++V2 < j3; )
            h2.queue[V2].callFulfilled(N3);
        }
        return h2;
      }, I2.reject = function(h2, N3) {
        h2.state = M3, h2.outcome = N3;
        for (var E3 = -1, O2 = h2.queue.length; ++E3 < O2; )
          h2.queue[E3].callRejected(N3);
        return h2;
      };
      function z3(h2) {
        var N3 = h2 && h2.then;
        if (h2 && (typeof h2 == "object" || typeof h2 == "function") && typeof N3 == "function")
          return function() {
            N3.apply(h2, arguments);
          };
      }
      function Z2(h2, N3) {
        var E3 = false;
        function O2(J3) {
          E3 || (E3 = true, I2.reject(h2, J3));
        }
        function V2(J3) {
          E3 || (E3 = true, I2.resolve(h2, J3));
        }
        function j3() {
          N3(V2, O2);
        }
        var Q2 = F2(j3);
        Q2.status === "error" && O2(Q2.value);
      }
      function F2(h2, N3) {
        var E3 = {};
        try {
          E3.value = h2(N3), E3.status = "success";
        } catch (O2) {
          E3.status = "error", E3.value = O2;
        }
        return E3;
      }
      m3.resolve = k3;
      function k3(h2) {
        return h2 instanceof this ? h2 : I2.resolve(new this(Y3), h2);
      }
      m3.reject = U;
      function U(h2) {
        var N3 = new this(Y3);
        return I2.reject(N3, h2);
      }
      m3.all = ae3;
      function ae3(h2) {
        var N3 = this;
        if (Object.prototype.toString.call(h2) !== "[object Array]")
          return this.reject(new TypeError("must be an array"));
        var E3 = h2.length, O2 = false;
        if (!E3)
          return this.resolve([]);
        for (var V2 = new Array(E3), j3 = 0, Q2 = -1, J3 = new this(Y3); ++Q2 < E3; )
          ee2(h2[Q2], Q2);
        return J3;
        function ee2(oe2, a2) {
          N3.resolve(oe2).then(s, function(v) {
            O2 || (O2 = true, I2.reject(J3, v));
          });
          function s(v) {
            V2[a2] = v, ++j3 === E3 && !O2 && (O2 = true, I2.resolve(J3, V2));
          }
        }
      }
      m3.race = re2;
      function re2(h2) {
        var N3 = this;
        if (Object.prototype.toString.call(h2) !== "[object Array]")
          return this.reject(new TypeError("must be an array"));
        var E3 = h2.length, O2 = false;
        if (!E3)
          return this.resolve([]);
        for (var V2 = -1, j3 = new this(Y3); ++V2 < E3; )
          Q2(h2[V2]);
        return j3;
        function Q2(J3) {
          N3.resolve(J3).then(function(ee2) {
            O2 || (O2 = true, I2.resolve(j3, ee2));
          }, function(ee2) {
            O2 || (O2 = true, I2.reject(j3, ee2));
          });
        }
      }
    }, { 1: 1 }], 3: [function(L2, D3, X2) {
      (function(P) {
        "use strict";
        typeof P.Promise != "function" && (P.Promise = L2(2));
      }).call(this, typeof global < "u" ? global : typeof self < "u" ? self : typeof window < "u" ? window : {});
    }, { 2: 2 }], 4: [function(L2, D3, X2) {
      "use strict";
      var P = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
        return typeof e;
      } : function(e) {
        return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      };
      function Y3(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function I2() {
        try {
          if (typeof indexedDB < "u")
            return indexedDB;
          if (typeof webkitIndexedDB < "u")
            return webkitIndexedDB;
          if (typeof mozIndexedDB < "u")
            return mozIndexedDB;
          if (typeof OIndexedDB < "u")
            return OIndexedDB;
          if (typeof msIndexedDB < "u")
            return msIndexedDB;
        } catch {
          return;
        }
      }
      var M3 = I2();
      function H3() {
        try {
          if (!M3 || !M3.open)
            return false;
          var e = typeof openDatabase < "u" && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform), t = typeof fetch == "function" && fetch.toString().indexOf("[native code") !== -1;
          return (!e || t) && typeof indexedDB < "u" && typeof IDBKeyRange < "u";
        } catch {
          return false;
        }
      }
      function $3(e, t) {
        e = e || [], t = t || {};
        try {
          return new Blob(e, t);
        } catch (n) {
          if (n.name !== "TypeError")
            throw n;
          for (var r2 = typeof BlobBuilder < "u" ? BlobBuilder : typeof MSBlobBuilder < "u" ? MSBlobBuilder : typeof MozBlobBuilder < "u" ? MozBlobBuilder : WebKitBlobBuilder, o2 = new r2(), i = 0; i < e.length; i += 1)
            o2.append(e[i]);
          return o2.getBlob(t.type);
        }
      }
      typeof Promise > "u" && L2(3);
      var m3 = Promise;
      function _2(e, t) {
        t && e.then(function(r2) {
          t(null, r2);
        }, function(r2) {
          t(r2);
        });
      }
      function B(e, t, r2) {
        typeof t == "function" && e.then(t), typeof r2 == "function" && e.catch(r2);
      }
      function z3(e) {
        return typeof e != "string" && (console.warn(e + " used as a key, but it is not a string."), e = String(e)), e;
      }
      function Z2() {
        if (arguments.length && typeof arguments[arguments.length - 1] == "function")
          return arguments[arguments.length - 1];
      }
      var F2 = "local-forage-detect-blob-support", k3 = void 0, U = {}, ae3 = Object.prototype.toString, re2 = "readonly", h2 = "readwrite";
      function N3(e) {
        for (var t = e.length, r2 = new ArrayBuffer(t), o2 = new Uint8Array(r2), i = 0; i < t; i++)
          o2[i] = e.charCodeAt(i);
        return r2;
      }
      function E3(e) {
        return new m3(function(t) {
          var r2 = e.transaction(F2, h2), o2 = $3([""]);
          r2.objectStore(F2).put(o2, "key"), r2.onabort = function(i) {
            i.preventDefault(), i.stopPropagation(), t(false);
          }, r2.oncomplete = function() {
            var i = navigator.userAgent.match(/Chrome\/(\d+)/), n = navigator.userAgent.match(/Edge\//);
            t(n || !i || parseInt(i[1], 10) >= 43);
          };
        }).catch(function() {
          return false;
        });
      }
      function O2(e) {
        return typeof k3 == "boolean" ? m3.resolve(k3) : E3(e).then(function(t) {
          return k3 = t, k3;
        });
      }
      function V2(e) {
        var t = U[e.name], r2 = {};
        r2.promise = new m3(function(o2, i) {
          r2.resolve = o2, r2.reject = i;
        }), t.deferredOperations.push(r2), t.dbReady ? t.dbReady = t.dbReady.then(function() {
          return r2.promise;
        }) : t.dbReady = r2.promise;
      }
      function j3(e) {
        var t = U[e.name], r2 = t.deferredOperations.pop();
        if (r2)
          return r2.resolve(), r2.promise;
      }
      function Q2(e, t) {
        var r2 = U[e.name], o2 = r2.deferredOperations.pop();
        if (o2)
          return o2.reject(t), o2.promise;
      }
      function J3(e, t) {
        return new m3(function(r2, o2) {
          if (U[e.name] = U[e.name] || G2(), e.db)
            if (t)
              V2(e), e.db.close();
            else
              return r2(e.db);
          var i = [e.name];
          t && i.push(e.version);
          var n = M3.open.apply(M3, i);
          t && (n.onupgradeneeded = function(f) {
            var u2 = n.result;
            try {
              u2.createObjectStore(e.storeName), f.oldVersion <= 1 && u2.createObjectStore(F2);
            } catch (c2) {
              if (c2.name === "ConstraintError")
                console.warn('The database "' + e.name + '" has been upgraded from version ' + f.oldVersion + " to version " + f.newVersion + ', but the storage "' + e.storeName + '" already exists.');
              else
                throw c2;
            }
          }), n.onerror = function(f) {
            f.preventDefault(), o2(n.error);
          }, n.onsuccess = function() {
            var f = n.result;
            f.onversionchange = function(u2) {
              u2.target.close();
            }, r2(f), j3(e);
          };
        });
      }
      function ee2(e) {
        return J3(e, false);
      }
      function oe2(e) {
        return J3(e, true);
      }
      function a2(e, t) {
        if (!e.db)
          return true;
        var r2 = !e.db.objectStoreNames.contains(e.storeName), o2 = e.version < e.db.version, i = e.version > e.db.version;
        if (o2 && (e.version !== t && console.warn('The database "' + e.name + `" can't be downgraded from version ` + e.db.version + " to version " + e.version + "."), e.version = e.db.version), i || r2) {
          if (r2) {
            var n = e.db.version + 1;
            n > e.version && (e.version = n);
          }
          return true;
        }
        return false;
      }
      function s(e) {
        return new m3(function(t, r2) {
          var o2 = new FileReader();
          o2.onerror = r2, o2.onloadend = function(i) {
            var n = btoa(i.target.result || "");
            t({ __local_forage_encoded_blob: true, data: n, type: e.type });
          }, o2.readAsBinaryString(e);
        });
      }
      function v(e) {
        var t = N3(atob(e.data));
        return $3([t], { type: e.type });
      }
      function p2(e) {
        return e && e.__local_forage_encoded_blob;
      }
      function g2(e) {
        var t = this, r2 = t._initReady().then(function() {
          var o2 = U[t._dbInfo.name];
          if (o2 && o2.dbReady)
            return o2.dbReady;
        });
        return B(r2, e, e), r2;
      }
      function w2(e) {
        V2(e);
        for (var t = U[e.name], r2 = t.forages, o2 = 0; o2 < r2.length; o2++) {
          var i = r2[o2];
          i._dbInfo.db && (i._dbInfo.db.close(), i._dbInfo.db = null);
        }
        return e.db = null, ee2(e).then(function(n) {
          return e.db = n, a2(e) ? oe2(e) : n;
        }).then(function(n) {
          e.db = t.db = n;
          for (var f = 0; f < r2.length; f++)
            r2[f]._dbInfo.db = n;
        }).catch(function(n) {
          throw Q2(e, n), n;
        });
      }
      function T3(e, t, r2, o2) {
        o2 === void 0 && (o2 = 1);
        try {
          var i = e.db.transaction(e.storeName, t);
          r2(null, i);
        } catch (n) {
          if (o2 > 0 && (!e.db || n.name === "InvalidStateError" || n.name === "NotFoundError"))
            return m3.resolve().then(function() {
              if (!e.db || n.name === "NotFoundError" && !e.db.objectStoreNames.contains(e.storeName) && e.version <= e.db.version)
                return e.db && (e.version = e.db.version + 1), oe2(e);
            }).then(function() {
              return w2(e).then(function() {
                T3(e, t, r2, o2 - 1);
              });
            }).catch(r2);
          r2(n);
        }
      }
      function G2() {
        return { forages: [], db: null, dbReady: null, deferredOperations: [] };
      }
      function fe3(e) {
        var t = this, r2 = { db: null };
        if (e)
          for (var o2 in e)
            r2[o2] = e[o2];
        var i = U[r2.name];
        i || (i = G2(), U[r2.name] = i), i.forages.push(t), t._initReady || (t._initReady = t.ready, t.ready = g2);
        var n = [];
        function f() {
          return m3.resolve();
        }
        for (var u2 = 0; u2 < i.forages.length; u2++) {
          var c2 = i.forages[u2];
          c2 !== t && n.push(c2._initReady().catch(f));
        }
        var l = i.forages.slice(0);
        return m3.all(n).then(function() {
          return r2.db = i.db, ee2(r2);
        }).then(function(d2) {
          return r2.db = d2, a2(r2, t._defaultConfig.version) ? oe2(r2) : d2;
        }).then(function(d2) {
          r2.db = i.db = d2, t._dbInfo = r2;
          for (var y2 = 0; y2 < l.length; y2++) {
            var S2 = l[y2];
            S2 !== t && (S2._dbInfo.db = r2.db, S2._dbInfo.version = r2.version);
          }
        });
      }
      function ie2(e, t) {
        var r2 = this;
        e = z3(e);
        var o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            T3(r2._dbInfo, re2, function(f, u2) {
              if (f)
                return n(f);
              try {
                var c2 = u2.objectStore(r2._dbInfo.storeName), l = c2.get(e);
                l.onsuccess = function() {
                  var d2 = l.result;
                  d2 === void 0 && (d2 = null), p2(d2) && (d2 = v(d2)), i(d2);
                }, l.onerror = function() {
                  n(l.error);
                };
              } catch (d2) {
                n(d2);
              }
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function ce3(e, t) {
        var r2 = this, o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            T3(r2._dbInfo, re2, function(f, u2) {
              if (f)
                return n(f);
              try {
                var c2 = u2.objectStore(r2._dbInfo.storeName), l = c2.openCursor(), d2 = 1;
                l.onsuccess = function() {
                  var y2 = l.result;
                  if (y2) {
                    var S2 = y2.value;
                    p2(S2) && (S2 = v(S2));
                    var x2 = e(S2, y2.key, d2++);
                    x2 !== void 0 ? i(x2) : y2.continue();
                  } else
                    i();
                }, l.onerror = function() {
                  n(l.error);
                };
              } catch (y2) {
                n(y2);
              }
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function nr(e, t, r2) {
        var o2 = this;
        e = z3(e);
        var i = new m3(function(n, f) {
          var u2;
          o2.ready().then(function() {
            return u2 = o2._dbInfo, ae3.call(t) === "[object Blob]" ? O2(u2.db).then(function(c2) {
              return c2 ? t : s(t);
            }) : t;
          }).then(function(c2) {
            T3(o2._dbInfo, h2, function(l, d2) {
              if (l)
                return f(l);
              try {
                var y2 = d2.objectStore(o2._dbInfo.storeName);
                c2 === null && (c2 = void 0);
                var S2 = y2.put(c2, e);
                d2.oncomplete = function() {
                  c2 === void 0 && (c2 = null), n(c2);
                }, d2.onabort = d2.onerror = function() {
                  var x2 = S2.error ? S2.error : S2.transaction.error;
                  f(x2);
                };
              } catch (x2) {
                f(x2);
              }
            });
          }).catch(f);
        });
        return _2(i, r2), i;
      }
      function or(e, t) {
        var r2 = this;
        e = z3(e);
        var o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            T3(r2._dbInfo, h2, function(f, u2) {
              if (f)
                return n(f);
              try {
                var c2 = u2.objectStore(r2._dbInfo.storeName), l = c2.delete(e);
                u2.oncomplete = function() {
                  i();
                }, u2.onerror = function() {
                  n(l.error);
                }, u2.onabort = function() {
                  var d2 = l.error ? l.error : l.transaction.error;
                  n(d2);
                };
              } catch (d2) {
                n(d2);
              }
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function ir(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            T3(t._dbInfo, h2, function(n, f) {
              if (n)
                return i(n);
              try {
                var u2 = f.objectStore(t._dbInfo.storeName), c2 = u2.clear();
                f.oncomplete = function() {
                  o2();
                }, f.onabort = f.onerror = function() {
                  var l = c2.error ? c2.error : c2.transaction.error;
                  i(l);
                };
              } catch (l) {
                i(l);
              }
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function ar(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            T3(t._dbInfo, re2, function(n, f) {
              if (n)
                return i(n);
              try {
                var u2 = f.objectStore(t._dbInfo.storeName), c2 = u2.count();
                c2.onsuccess = function() {
                  o2(c2.result);
                }, c2.onerror = function() {
                  i(c2.error);
                };
              } catch (l) {
                i(l);
              }
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function fr(e, t) {
        var r2 = this, o2 = new m3(function(i, n) {
          if (e < 0) {
            i(null);
            return;
          }
          r2.ready().then(function() {
            T3(r2._dbInfo, re2, function(f, u2) {
              if (f)
                return n(f);
              try {
                var c2 = u2.objectStore(r2._dbInfo.storeName), l = false, d2 = c2.openKeyCursor();
                d2.onsuccess = function() {
                  var y2 = d2.result;
                  if (!y2) {
                    i(null);
                    return;
                  }
                  e === 0 || l ? i(y2.key) : (l = true, y2.advance(e));
                }, d2.onerror = function() {
                  n(d2.error);
                };
              } catch (y2) {
                n(y2);
              }
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function ur(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            T3(t._dbInfo, re2, function(n, f) {
              if (n)
                return i(n);
              try {
                var u2 = f.objectStore(t._dbInfo.storeName), c2 = u2.openKeyCursor(), l = [];
                c2.onsuccess = function() {
                  var d2 = c2.result;
                  if (!d2) {
                    o2(l);
                    return;
                  }
                  l.push(d2.key), d2.continue();
                }, c2.onerror = function() {
                  i(c2.error);
                };
              } catch (d2) {
                i(d2);
              }
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function sr(e, t) {
        t = Z2.apply(this, arguments);
        var r2 = this.config();
        e = typeof e != "function" && e || {}, e.name || (e.name = e.name || r2.name, e.storeName = e.storeName || r2.storeName);
        var o2 = this, i;
        if (!e.name)
          i = m3.reject("Invalid arguments");
        else {
          var n = e.name === r2.name && o2._dbInfo.db, f = n ? m3.resolve(o2._dbInfo.db) : ee2(e).then(function(u2) {
            var c2 = U[e.name], l = c2.forages;
            c2.db = u2;
            for (var d2 = 0; d2 < l.length; d2++)
              l[d2]._dbInfo.db = u2;
            return u2;
          });
          e.storeName ? i = f.then(function(u2) {
            if (!!u2.objectStoreNames.contains(e.storeName)) {
              var c2 = u2.version + 1;
              V2(e);
              var l = U[e.name], d2 = l.forages;
              u2.close();
              for (var y2 = 0; y2 < d2.length; y2++) {
                var S2 = d2[y2];
                S2._dbInfo.db = null, S2._dbInfo.version = c2;
              }
              var x2 = new m3(function(C3, K3) {
                var W2 = M3.open(e.name, c2);
                W2.onerror = function(q3) {
                  var de3 = W2.result;
                  de3.close(), K3(q3);
                }, W2.onupgradeneeded = function() {
                  var q3 = W2.result;
                  q3.deleteObjectStore(e.storeName);
                }, W2.onsuccess = function() {
                  var q3 = W2.result;
                  q3.close(), C3(q3);
                };
              });
              return x2.then(function(C3) {
                l.db = C3;
                for (var K3 = 0; K3 < d2.length; K3++) {
                  var W2 = d2[K3];
                  W2._dbInfo.db = C3, j3(W2._dbInfo);
                }
              }).catch(function(C3) {
                throw (Q2(e, C3) || m3.resolve()).catch(function() {
                }), C3;
              });
            }
          }) : i = f.then(function(u2) {
            V2(e);
            var c2 = U[e.name], l = c2.forages;
            u2.close();
            for (var d2 = 0; d2 < l.length; d2++) {
              var y2 = l[d2];
              y2._dbInfo.db = null;
            }
            var S2 = new m3(function(x2, C3) {
              var K3 = M3.deleteDatabase(e.name);
              K3.onerror = function() {
                var W2 = K3.result;
                W2 && W2.close(), C3(K3.error);
              }, K3.onblocked = function() {
                console.warn('dropInstance blocked for database "' + e.name + '" until all open connections are closed');
              }, K3.onsuccess = function() {
                var W2 = K3.result;
                W2 && W2.close(), x2(W2);
              };
            });
            return S2.then(function(x2) {
              c2.db = x2;
              for (var C3 = 0; C3 < l.length; C3++) {
                var K3 = l[C3];
                j3(K3._dbInfo);
              }
            }).catch(function(x2) {
              throw (Q2(e, x2) || m3.resolve()).catch(function() {
              }), x2;
            });
          });
        }
        return _2(i, t), i;
      }
      var cr = { _driver: "asyncStorage", _initStorage: fe3, _support: H3(), iterate: ce3, getItem: ie2, setItem: nr, removeItem: or, clear: ir, length: ar, key: fr, keys: ur, dropInstance: sr };
      function lr() {
        return typeof openDatabase == "function";
      }
      var te3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", dr2 = "~~local_forage_type~", Be2 = /^~~local_forage_type~([^~]+)~/, he3 = "__lfsc__:", be = he3.length, _e2 = "arbf", we2 = "blob", xe2 = "si08", Oe2 = "ui08", Ce2 = "uic8", Le2 = "si16", Pe2 = "si32", Me2 = "ur16", Fe2 = "ui32", Ue2 = "fl32", Ye2 = "fl64", ze2 = be + _e2.length, We2 = Object.prototype.toString;
      function Ke2(e) {
        var t = e.length * 0.75, r2 = e.length, o2, i = 0, n, f, u2, c2;
        e[e.length - 1] === "=" && (t--, e[e.length - 2] === "=" && t--);
        var l = new ArrayBuffer(t), d2 = new Uint8Array(l);
        for (o2 = 0; o2 < r2; o2 += 4)
          n = te3.indexOf(e[o2]), f = te3.indexOf(e[o2 + 1]), u2 = te3.indexOf(e[o2 + 2]), c2 = te3.indexOf(e[o2 + 3]), d2[i++] = n << 2 | f >> 4, d2[i++] = (f & 15) << 4 | u2 >> 2, d2[i++] = (u2 & 3) << 6 | c2 & 63;
        return l;
      }
      function Ee2(e) {
        var t = new Uint8Array(e), r2 = "", o2;
        for (o2 = 0; o2 < t.length; o2 += 3)
          r2 += te3[t[o2] >> 2], r2 += te3[(t[o2] & 3) << 4 | t[o2 + 1] >> 4], r2 += te3[(t[o2 + 1] & 15) << 2 | t[o2 + 2] >> 6], r2 += te3[t[o2 + 2] & 63];
        return t.length % 3 === 2 ? r2 = r2.substring(0, r2.length - 1) + "=" : t.length % 3 === 1 && (r2 = r2.substring(0, r2.length - 2) + "=="), r2;
      }
      function vr(e, t) {
        var r2 = "";
        if (e && (r2 = We2.call(e)), e && (r2 === "[object ArrayBuffer]" || e.buffer && We2.call(e.buffer) === "[object ArrayBuffer]")) {
          var o2, i = he3;
          e instanceof ArrayBuffer ? (o2 = e, i += _e2) : (o2 = e.buffer, r2 === "[object Int8Array]" ? i += xe2 : r2 === "[object Uint8Array]" ? i += Oe2 : r2 === "[object Uint8ClampedArray]" ? i += Ce2 : r2 === "[object Int16Array]" ? i += Le2 : r2 === "[object Uint16Array]" ? i += Me2 : r2 === "[object Int32Array]" ? i += Pe2 : r2 === "[object Uint32Array]" ? i += Fe2 : r2 === "[object Float32Array]" ? i += Ue2 : r2 === "[object Float64Array]" ? i += Ye2 : t(new Error("Failed to get type for BinaryArray"))), t(i + Ee2(o2));
        } else if (r2 === "[object Blob]") {
          var n = new FileReader();
          n.onload = function() {
            var f = dr2 + e.type + "~" + Ee2(this.result);
            t(he3 + we2 + f);
          }, n.readAsArrayBuffer(e);
        } else
          try {
            t(JSON.stringify(e));
          } catch (f) {
            console.error("Couldn't convert value into a JSON string: ", e), t(null, f);
          }
      }
      function hr(e) {
        if (e.substring(0, be) !== he3)
          return JSON.parse(e);
        var t = e.substring(ze2), r2 = e.substring(be, ze2), o2;
        if (r2 === we2 && Be2.test(t)) {
          var i = t.match(Be2);
          o2 = i[1], t = t.substring(i[0].length);
        }
        var n = Ke2(t);
        switch (r2) {
          case _e2:
            return n;
          case we2:
            return $3([n], { type: o2 });
          case xe2:
            return new Int8Array(n);
          case Oe2:
            return new Uint8Array(n);
          case Ce2:
            return new Uint8ClampedArray(n);
          case Le2:
            return new Int16Array(n);
          case Me2:
            return new Uint16Array(n);
          case Pe2:
            return new Int32Array(n);
          case Fe2:
            return new Uint32Array(n);
          case Ue2:
            return new Float32Array(n);
          case Ye2:
            return new Float64Array(n);
          default:
            throw new Error("Unkown type: " + r2);
        }
      }
      var Ie2 = { serialize: vr, deserialize: hr, stringToBuffer: Ke2, bufferToString: Ee2 };
      function He2(e, t, r2, o2) {
        e.executeSql("CREATE TABLE IF NOT EXISTS " + t.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], r2, o2);
      }
      function mr2(e) {
        var t = this, r2 = { db: null };
        if (e)
          for (var o2 in e)
            r2[o2] = typeof e[o2] != "string" ? e[o2].toString() : e[o2];
        var i = new m3(function(n, f) {
          try {
            r2.db = openDatabase(r2.name, String(r2.version), r2.description, r2.size);
          } catch (u2) {
            return f(u2);
          }
          r2.db.transaction(function(u2) {
            He2(u2, r2, function() {
              t._dbInfo = r2, n();
            }, function(c2, l) {
              f(l);
            });
          }, f);
        });
        return r2.serializer = Ie2, i;
      }
      function ne3(e, t, r2, o2, i, n) {
        e.executeSql(r2, o2, i, function(f, u2) {
          u2.code === u2.SYNTAX_ERR ? f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [t.storeName], function(c2, l) {
            l.rows.length ? n(c2, u2) : He2(c2, t, function() {
              c2.executeSql(r2, o2, i, n);
            }, n);
          }, n) : n(f, u2);
        }, n);
      }
      function yr(e, t) {
        var r2 = this;
        e = z3(e);
        var o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            var f = r2._dbInfo;
            f.db.transaction(function(u2) {
              ne3(u2, f, "SELECT * FROM " + f.storeName + " WHERE key = ? LIMIT 1", [e], function(c2, l) {
                var d2 = l.rows.length ? l.rows.item(0).value : null;
                d2 && (d2 = f.serializer.deserialize(d2)), i(d2);
              }, function(c2, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function pr(e, t) {
        var r2 = this, o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            var f = r2._dbInfo;
            f.db.transaction(function(u2) {
              ne3(u2, f, "SELECT * FROM " + f.storeName, [], function(c2, l) {
                for (var d2 = l.rows, y2 = d2.length, S2 = 0; S2 < y2; S2++) {
                  var x2 = d2.item(S2), C3 = x2.value;
                  if (C3 && (C3 = f.serializer.deserialize(C3)), C3 = e(C3, x2.key, S2 + 1), C3 !== void 0) {
                    i(C3);
                    return;
                  }
                }
                i();
              }, function(c2, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function Ve2(e, t, r2, o2) {
        var i = this;
        e = z3(e);
        var n = new m3(function(f, u2) {
          i.ready().then(function() {
            t === void 0 && (t = null);
            var c2 = t, l = i._dbInfo;
            l.serializer.serialize(t, function(d2, y2) {
              y2 ? u2(y2) : l.db.transaction(function(S2) {
                ne3(S2, l, "INSERT OR REPLACE INTO " + l.storeName + " (key, value) VALUES (?, ?)", [e, d2], function() {
                  f(c2);
                }, function(x2, C3) {
                  u2(C3);
                });
              }, function(S2) {
                if (S2.code === S2.QUOTA_ERR) {
                  if (o2 > 0) {
                    f(Ve2.apply(i, [e, c2, r2, o2 - 1]));
                    return;
                  }
                  u2(S2);
                }
              });
            });
          }).catch(u2);
        });
        return _2(n, r2), n;
      }
      function gr(e, t, r2) {
        return Ve2.apply(this, [e, t, r2, 1]);
      }
      function br(e, t) {
        var r2 = this;
        e = z3(e);
        var o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            var f = r2._dbInfo;
            f.db.transaction(function(u2) {
              ne3(u2, f, "DELETE FROM " + f.storeName + " WHERE key = ?", [e], function() {
                i();
              }, function(c2, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function _r(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f) {
              ne3(f, n, "DELETE FROM " + n.storeName, [], function() {
                o2();
              }, function(u2, c2) {
                i(c2);
              });
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function wr(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f) {
              ne3(f, n, "SELECT COUNT(key) as c FROM " + n.storeName, [], function(u2, c2) {
                var l = c2.rows.item(0).c;
                o2(l);
              }, function(u2, c2) {
                i(c2);
              });
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function Er(e, t) {
        var r2 = this, o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            var f = r2._dbInfo;
            f.db.transaction(function(u2) {
              ne3(u2, f, "SELECT key FROM " + f.storeName + " WHERE id = ? LIMIT 1", [e + 1], function(c2, l) {
                var d2 = l.rows.length ? l.rows.item(0).key : null;
                i(d2);
              }, function(c2, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function Ir(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f) {
              ne3(f, n, "SELECT key FROM " + n.storeName, [], function(u2, c2) {
                for (var l = [], d2 = 0; d2 < c2.rows.length; d2++)
                  l.push(c2.rows.item(d2).key);
                o2(l);
              }, function(u2, c2) {
                i(c2);
              });
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function Sr(e) {
        return new m3(function(t, r2) {
          e.transaction(function(o2) {
            o2.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function(i, n) {
              for (var f = [], u2 = 0; u2 < n.rows.length; u2++)
                f.push(n.rows.item(u2).name);
              t({ db: e, storeNames: f });
            }, function(i, n) {
              r2(n);
            });
          }, function(o2) {
            r2(o2);
          });
        });
      }
      function Ar(e, t) {
        t = Z2.apply(this, arguments);
        var r2 = this.config();
        e = typeof e != "function" && e || {}, e.name || (e.name = e.name || r2.name, e.storeName = e.storeName || r2.storeName);
        var o2 = this, i;
        return e.name ? i = new m3(function(n) {
          var f;
          e.name === r2.name ? f = o2._dbInfo.db : f = openDatabase(e.name, "", "", 0), e.storeName ? n({ db: f, storeNames: [e.storeName] }) : n(Sr(f));
        }).then(function(n) {
          return new m3(function(f, u2) {
            n.db.transaction(function(c2) {
              function l(x2) {
                return new m3(function(C3, K3) {
                  c2.executeSql("DROP TABLE IF EXISTS " + x2, [], function() {
                    C3();
                  }, function(W2, q3) {
                    K3(q3);
                  });
                });
              }
              for (var d2 = [], y2 = 0, S2 = n.storeNames.length; y2 < S2; y2++)
                d2.push(l(n.storeNames[y2]));
              m3.all(d2).then(function() {
                f();
              }).catch(function(x2) {
                u2(x2);
              });
            }, function(c2) {
              u2(c2);
            });
          });
        }) : i = m3.reject("Invalid arguments"), _2(i, t), i;
      }
      var Rr = { _driver: "webSQLStorage", _initStorage: mr2, _support: lr(), iterate: pr, getItem: yr, setItem: gr, removeItem: br, clear: _r, length: wr, key: Er, keys: Ir, dropInstance: Ar };
      function Dr() {
        try {
          return typeof localStorage < "u" && "setItem" in localStorage && !!localStorage.setItem;
        } catch {
          return false;
        }
      }
      function Ge2(e, t) {
        var r2 = e.name + "/";
        return e.storeName !== t.storeName && (r2 += e.storeName + "/"), r2;
      }
      function Nr() {
        var e = "_localforage_support_test";
        try {
          return localStorage.setItem(e, true), localStorage.removeItem(e), false;
        } catch {
          return true;
        }
      }
      function Tr() {
        return !Nr() || localStorage.length > 0;
      }
      function Br(e) {
        var t = this, r2 = {};
        if (e)
          for (var o2 in e)
            r2[o2] = e[o2];
        return r2.keyPrefix = Ge2(e, t._defaultConfig), Tr() ? (t._dbInfo = r2, r2.serializer = Ie2, m3.resolve()) : m3.reject();
      }
      function xr(e) {
        var t = this, r2 = t.ready().then(function() {
          for (var o2 = t._dbInfo.keyPrefix, i = localStorage.length - 1; i >= 0; i--) {
            var n = localStorage.key(i);
            n.indexOf(o2) === 0 && localStorage.removeItem(n);
          }
        });
        return _2(r2, e), r2;
      }
      function Or(e, t) {
        var r2 = this;
        e = z3(e);
        var o2 = r2.ready().then(function() {
          var i = r2._dbInfo, n = localStorage.getItem(i.keyPrefix + e);
          return n && (n = i.serializer.deserialize(n)), n;
        });
        return _2(o2, t), o2;
      }
      function Cr(e, t) {
        var r2 = this, o2 = r2.ready().then(function() {
          for (var i = r2._dbInfo, n = i.keyPrefix, f = n.length, u2 = localStorage.length, c2 = 1, l = 0; l < u2; l++) {
            var d2 = localStorage.key(l);
            if (d2.indexOf(n) === 0) {
              var y2 = localStorage.getItem(d2);
              if (y2 && (y2 = i.serializer.deserialize(y2)), y2 = e(y2, d2.substring(f), c2++), y2 !== void 0)
                return y2;
            }
          }
        });
        return _2(o2, t), o2;
      }
      function Lr(e, t) {
        var r2 = this, o2 = r2.ready().then(function() {
          var i = r2._dbInfo, n;
          try {
            n = localStorage.key(e);
          } catch {
            n = null;
          }
          return n && (n = n.substring(i.keyPrefix.length)), n;
        });
        return _2(o2, t), o2;
      }
      function Pr(e) {
        var t = this, r2 = t.ready().then(function() {
          for (var o2 = t._dbInfo, i = localStorage.length, n = [], f = 0; f < i; f++) {
            var u2 = localStorage.key(f);
            u2.indexOf(o2.keyPrefix) === 0 && n.push(u2.substring(o2.keyPrefix.length));
          }
          return n;
        });
        return _2(r2, e), r2;
      }
      function Mr(e) {
        var t = this, r2 = t.keys().then(function(o2) {
          return o2.length;
        });
        return _2(r2, e), r2;
      }
      function Fr(e, t) {
        var r2 = this;
        e = z3(e);
        var o2 = r2.ready().then(function() {
          var i = r2._dbInfo;
          localStorage.removeItem(i.keyPrefix + e);
        });
        return _2(o2, t), o2;
      }
      function Ur(e, t, r2) {
        var o2 = this;
        e = z3(e);
        var i = o2.ready().then(function() {
          t === void 0 && (t = null);
          var n = t;
          return new m3(function(f, u2) {
            var c2 = o2._dbInfo;
            c2.serializer.serialize(t, function(l, d2) {
              if (d2)
                u2(d2);
              else
                try {
                  localStorage.setItem(c2.keyPrefix + e, l), f(n);
                } catch (y2) {
                  (y2.name === "QuotaExceededError" || y2.name === "NS_ERROR_DOM_QUOTA_REACHED") && u2(y2), u2(y2);
                }
            });
          });
        });
        return _2(i, r2), i;
      }
      function Yr(e, t) {
        if (t = Z2.apply(this, arguments), e = typeof e != "function" && e || {}, !e.name) {
          var r2 = this.config();
          e.name = e.name || r2.name, e.storeName = e.storeName || r2.storeName;
        }
        var o2 = this, i;
        return e.name ? i = new m3(function(n) {
          e.storeName ? n(Ge2(e, o2._defaultConfig)) : n(e.name + "/");
        }).then(function(n) {
          for (var f = localStorage.length - 1; f >= 0; f--) {
            var u2 = localStorage.key(f);
            u2.indexOf(n) === 0 && localStorage.removeItem(u2);
          }
        }) : i = m3.reject("Invalid arguments"), _2(i, t), i;
      }
      var zr = { _driver: "localStorageWrapper", _initStorage: Br, _support: Dr(), iterate: Cr, getItem: Or, setItem: Ur, removeItem: Fr, clear: xr, length: Mr, key: Lr, keys: Pr, dropInstance: Yr }, Wr = function(t, r2) {
        return t === r2 || typeof t == "number" && typeof r2 == "number" && isNaN(t) && isNaN(r2);
      }, Kr = function(t, r2) {
        for (var o2 = t.length, i = 0; i < o2; ) {
          if (Wr(t[i], r2))
            return true;
          i++;
        }
        return false;
      }, je2 = Array.isArray || function(e) {
        return Object.prototype.toString.call(e) === "[object Array]";
      }, le2 = {}, Xe2 = {}, ue3 = { INDEXEDDB: cr, WEBSQL: Rr, LOCALSTORAGE: zr }, Hr = [ue3.INDEXEDDB._driver, ue3.WEBSQL._driver, ue3.LOCALSTORAGE._driver], me2 = ["dropInstance"], Se2 = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(me2), Vr = { description: "", driver: Hr.slice(), name: "localforage", size: 4980736, storeName: "keyvaluepairs", version: 1 };
      function Gr(e, t) {
        e[t] = function() {
          var r2 = arguments;
          return e.ready().then(function() {
            return e[t].apply(e, r2);
          });
        };
      }
      function Ae2() {
        for (var e = 1; e < arguments.length; e++) {
          var t = arguments[e];
          if (t)
            for (var r2 in t)
              t.hasOwnProperty(r2) && (je2(t[r2]) ? arguments[0][r2] = t[r2].slice() : arguments[0][r2] = t[r2]);
        }
        return arguments[0];
      }
      var jr = function() {
        function e(t) {
          Y3(this, e);
          for (var r2 in ue3)
            if (ue3.hasOwnProperty(r2)) {
              var o2 = ue3[r2], i = o2._driver;
              this[r2] = i, le2[i] || this.defineDriver(o2);
            }
          this._defaultConfig = Ae2({}, Vr), this._config = Ae2({}, this._defaultConfig, t), this._driverSet = null, this._initDriver = null, this._ready = false, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver).catch(function() {
          });
        }
        return e.prototype.config = function(r2) {
          if ((typeof r2 > "u" ? "undefined" : P(r2)) === "object") {
            if (this._ready)
              return new Error("Can't call config() after localforage has been used.");
            for (var o2 in r2) {
              if (o2 === "storeName" && (r2[o2] = r2[o2].replace(/\W/g, "_")), o2 === "version" && typeof r2[o2] != "number")
                return new Error("Database version must be a number.");
              this._config[o2] = r2[o2];
            }
            return "driver" in r2 && r2.driver ? this.setDriver(this._config.driver) : true;
          } else
            return typeof r2 == "string" ? this._config[r2] : this._config;
        }, e.prototype.defineDriver = function(r2, o2, i) {
          var n = new m3(function(f, u2) {
            try {
              var c2 = r2._driver, l = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");
              if (!r2._driver) {
                u2(l);
                return;
              }
              for (var d2 = Se2.concat("_initStorage"), y2 = 0, S2 = d2.length; y2 < S2; y2++) {
                var x2 = d2[y2], C3 = !Kr(me2, x2);
                if ((C3 || r2[x2]) && typeof r2[x2] != "function") {
                  u2(l);
                  return;
                }
              }
              var K3 = function() {
                for (var de3 = function(Jr) {
                  return function() {
                    var $r = new Error("Method " + Jr + " is not implemented by the current driver"), Qe2 = m3.reject($r);
                    return _2(Qe2, arguments[arguments.length - 1]), Qe2;
                  };
                }, Re2 = 0, Qr = me2.length; Re2 < Qr; Re2++) {
                  var De2 = me2[Re2];
                  r2[De2] || (r2[De2] = de3(De2));
                }
              };
              K3();
              var W2 = function(de3) {
                le2[c2] && console.info("Redefining LocalForage driver: " + c2), le2[c2] = r2, Xe2[c2] = de3, f();
              };
              "_support" in r2 ? r2._support && typeof r2._support == "function" ? r2._support().then(W2, u2) : W2(!!r2._support) : W2(true);
            } catch (q3) {
              u2(q3);
            }
          });
          return B(n, o2, i), n;
        }, e.prototype.driver = function() {
          return this._driver || null;
        }, e.prototype.getDriver = function(r2, o2, i) {
          var n = le2[r2] ? m3.resolve(le2[r2]) : m3.reject(new Error("Driver not found."));
          return B(n, o2, i), n;
        }, e.prototype.getSerializer = function(r2) {
          var o2 = m3.resolve(Ie2);
          return B(o2, r2), o2;
        }, e.prototype.ready = function(r2) {
          var o2 = this, i = o2._driverSet.then(function() {
            return o2._ready === null && (o2._ready = o2._initDriver()), o2._ready;
          });
          return B(i, r2, r2), i;
        }, e.prototype.setDriver = function(r2, o2, i) {
          var n = this;
          je2(r2) || (r2 = [r2]);
          var f = this._getSupportedDrivers(r2);
          function u2() {
            n._config.driver = n.driver();
          }
          function c2(y2) {
            return n._extend(y2), u2(), n._ready = n._initStorage(n._config), n._ready;
          }
          function l(y2) {
            return function() {
              var S2 = 0;
              function x2() {
                for (; S2 < y2.length; ) {
                  var C3 = y2[S2];
                  return S2++, n._dbInfo = null, n._ready = null, n.getDriver(C3).then(c2).catch(x2);
                }
                u2();
                var K3 = new Error("No available storage method found.");
                return n._driverSet = m3.reject(K3), n._driverSet;
              }
              return x2();
            };
          }
          var d2 = this._driverSet !== null ? this._driverSet.catch(function() {
            return m3.resolve();
          }) : m3.resolve();
          return this._driverSet = d2.then(function() {
            var y2 = f[0];
            return n._dbInfo = null, n._ready = null, n.getDriver(y2).then(function(S2) {
              n._driver = S2._driver, u2(), n._wrapLibraryMethodsWithReady(), n._initDriver = l(f);
            });
          }).catch(function() {
            u2();
            var y2 = new Error("No available storage method found.");
            return n._driverSet = m3.reject(y2), n._driverSet;
          }), B(this._driverSet, o2, i), this._driverSet;
        }, e.prototype.supports = function(r2) {
          return !!Xe2[r2];
        }, e.prototype._extend = function(r2) {
          Ae2(this, r2);
        }, e.prototype._getSupportedDrivers = function(r2) {
          for (var o2 = [], i = 0, n = r2.length; i < n; i++) {
            var f = r2[i];
            this.supports(f) && o2.push(f);
          }
          return o2;
        }, e.prototype._wrapLibraryMethodsWithReady = function() {
          for (var r2 = 0, o2 = Se2.length; r2 < o2; r2++)
            Gr(this, Se2[r2]);
        }, e.prototype.createInstance = function(r2) {
          return new e(r2);
        }, e;
      }(), Xr = new jr();
      D3.exports = Xr;
    }, { 3: 3 }] }, {}, [4])(4);
  });
});
var rr = $e2((ye2, er) => {
  (function(b2, A) {
    typeof ye2 == "object" && typeof er < "u" ? A(ye2) : typeof define == "function" && define.amd ? define("localforage-driver-memory", ["exports"], A) : A(b2.LocalforageDriverMemory = {});
  })(typeof self < "u" ? self : ye2, function(b2) {
    "use strict";
    var A = "localforage-driver-memory";
    function R(a2) {
      var s = typeof Symbol == "function" && a2[Symbol.iterator], v = 0;
      return s ? s.call(a2) : { next: function() {
        return a2 && v >= a2.length && (a2 = void 0), { value: a2 && a2[v++], done: !a2 };
      } };
    }
    function L2(a2, s) {
      a2 = a2 || [], s = s || {};
      try {
        return new Blob(a2, s);
      } catch (w2) {
        if (w2.name !== "TypeError")
          throw w2;
        for (var v = typeof BlobBuilder < "u" ? BlobBuilder : typeof MSBlobBuilder < "u" ? MSBlobBuilder : typeof MozBlobBuilder < "u" ? MozBlobBuilder : WebKitBlobBuilder, p2 = new v(), g2 = 0; g2 < a2.length; g2 += 1)
          p2.append(a2[g2]);
        return p2.getBlob(s.type);
      }
    }
    var D3 = /^~~local_forage_type~([^~]+)~/, X2 = 9, P = X2 + 4, Y3 = Object.prototype.toString;
    function I2(a2) {
      var s = a2.length * 0.75, v = a2.length;
      a2[a2.length - 1] === "=" && (s--, a2[a2.length - 2] === "=" && s--);
      for (var p2 = new ArrayBuffer(s), g2 = new Uint8Array(p2), w2 = 0, T3 = 0; w2 < v; w2 += 4) {
        var G2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[w2]), fe3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[w2 + 1]), ie2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[w2 + 2]), ce3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[w2 + 3]);
        g2[T3++] = G2 << 2 | fe3 >> 4, g2[T3++] = (fe3 & 15) << 4 | ie2 >> 2, g2[T3++] = (ie2 & 3) << 6 | ce3 & 63;
      }
      return p2;
    }
    function M3(a2) {
      for (var s = new Uint8Array(a2), v = "", p2 = 0; p2 < s.length; p2 += 3)
        v += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s[p2] >> 2], v += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(s[p2] & 3) << 4 | s[p2 + 1] >> 4], v += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(s[p2 + 1] & 15) << 2 | s[p2 + 2] >> 6], v += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s[p2 + 2] & 63];
      return s.length % 3 === 2 ? v = v.substring(0, v.length - 1) + "=" : s.length % 3 === 1 && (v = v.substring(0, v.length - 2) + "=="), v;
    }
    function H3(a2, s) {
      var v = "";
      if (a2 && (v = Y3.call(a2)), a2 && (v === "[object ArrayBuffer]" || a2.buffer && Y3.call(a2.buffer) === "[object ArrayBuffer]")) {
        var p2 = void 0, g2 = "__lfsc__:";
        a2 instanceof ArrayBuffer ? (p2 = a2, g2 += "arbf") : (p2 = a2.buffer, v === "[object Int8Array]" ? g2 += "si08" : v === "[object Uint8Array]" ? g2 += "ui08" : v === "[object Uint8ClampedArray]" ? g2 += "uic8" : v === "[object Int16Array]" ? g2 += "si16" : v === "[object Uint16Array]" ? g2 += "ur16" : v === "[object Int32Array]" ? g2 += "si32" : v === "[object Uint32Array]" ? g2 += "ui32" : v === "[object Float32Array]" ? g2 += "fl32" : v === "[object Float64Array]" ? g2 += "fl64" : s(new Error("Failed to get type for BinaryArray"))), s(g2 + M3(p2));
      } else if (v === "[object Blob]") {
        var w2 = new FileReader();
        w2.onload = function() {
          var T3 = "~~local_forage_type~" + a2.type + "~" + M3(this.result);
          s("__lfsc__:blob" + T3);
        }, w2.readAsArrayBuffer(a2);
      } else
        try {
          s(JSON.stringify(a2));
        } catch (T3) {
          console.error("Couldn't convert value into a JSON string: ", a2), s(null, T3);
        }
    }
    function $3(a2) {
      if (a2.substring(0, X2) !== "__lfsc__:")
        return JSON.parse(a2);
      var s = a2.substring(P), v = a2.substring(X2, P), p2;
      if (v === "blob" && D3.test(s)) {
        var g2 = s.match(D3);
        p2 = g2[1], s = s.substring(g2[0].length);
      }
      var w2 = I2(s);
      switch (v) {
        case "arbf":
          return w2;
        case "blob":
          return L2([w2], { type: p2 });
        case "si08":
          return new Int8Array(w2);
        case "ui08":
          return new Uint8Array(w2);
        case "uic8":
          return new Uint8ClampedArray(w2);
        case "si16":
          return new Int16Array(w2);
        case "ur16":
          return new Uint16Array(w2);
        case "si32":
          return new Int32Array(w2);
        case "ui32":
          return new Uint32Array(w2);
        case "fl32":
          return new Float32Array(w2);
        case "fl64":
          return new Float64Array(w2);
        default:
          throw new Error("Unkown type: " + v);
      }
    }
    function m3(a2) {
      var s, v;
      if (a2 === null || typeof a2 != "object" || "isActiveClone" in a2)
        return a2;
      var p2 = a2 instanceof Date ? new Date(a2) : a2.constructor();
      try {
        for (var g2 = R(Object.keys(a2)), w2 = g2.next(); !w2.done; w2 = g2.next()) {
          var T3 = w2.value;
          Object.prototype.hasOwnProperty.call(a2, T3) && (a2.isActiveClone = null, p2[T3] = m3(a2[T3]), delete a2.isActiveClone);
        }
      } catch (G2) {
        s = { error: G2 };
      } finally {
        try {
          w2 && !w2.done && (v = g2.return) && v.call(g2);
        } finally {
          if (s)
            throw s.error;
        }
      }
      return p2;
    }
    function _2(a2, s) {
      return (a2.name || s.name) + "/" + (a2.storeName || s.storeName) + "/";
    }
    function B(a2, s) {
      s && a2.then(function(v) {
        s(null, v);
      }, function(v) {
        s(v);
      });
    }
    function z3() {
      for (var a2 = [], s = 0; s < arguments.length; s++)
        a2[s] = arguments[s];
      if (arguments.length && typeof arguments[arguments.length - 1] == "function")
        return arguments[arguments.length - 1];
    }
    function Z2(a2, s) {
      var v = this;
      if (s = z3.apply(this, arguments), a2 = typeof a2 != "function" && a2 || {}, !a2.name) {
        var p2 = this.config();
        a2.name = a2.name || p2.name, a2.storeName = a2.storeName || p2.storeName;
      }
      var g2;
      return a2.name ? g2 = new Promise(function(w2) {
        a2.storeName ? w2(_2(a2, v._defaultConfig)) : w2(a2.name + "/");
      }) : g2 = Promise.reject("Invalid arguments"), { promise: g2, callback: s };
    }
    function F2(a2) {
      return typeof a2 != "string" && (console.warn(a2 + " used as a key, but it is not a string."), a2 = String(a2)), a2;
    }
    var k3 = { bufferToString: M3, deserialize: $3, serialize: H3, stringToBuffer: I2 }, U = {}, ae3 = function() {
      function a2(s) {
        this.kp = s, this.data = {};
      }
      return a2.resolve = function(s) {
        return U[s] || (U[s] = new a2(s)), U[s];
      }, a2.prototype.clear = function() {
        this.data = {};
      }, a2.prototype.drop = function() {
        this.clear(), delete U[this.kp];
      }, a2.prototype.get = function(s) {
        return this.data[s];
      }, a2.prototype.key = function(s) {
        return this.keys()[s];
      }, a2.prototype.keys = function() {
        return Object.keys(this.data);
      }, a2.prototype.rm = function(s) {
        delete this.data[s];
      }, a2.prototype.set = function(s, v) {
        this.data[s] = v;
      }, a2;
    }();
    function re2(a2) {
      var s = a2 ? m3(a2) : {}, v = _2(s, this._defaultConfig), p2 = ae3.resolve(v);
      return this._dbInfo = s, this._dbInfo.serializer = k3, this._dbInfo.keyPrefix = v, this._dbInfo.mStore = p2, Promise.resolve();
    }
    function h2(a2) {
      var s = this, v = this.ready().then(function() {
        s._dbInfo.mStore.clear();
      });
      return B(v, a2), v;
    }
    function N3(a2, s) {
      var v = Z2.apply(this, arguments), p2 = v.promise, g2 = v.callback, w2 = p2.then(function(T3) {
        ae3.resolve(T3).drop();
      });
      return B(w2, g2), p2;
    }
    function E3(a2, s) {
      var v = this;
      a2 = F2(a2);
      var p2 = this.ready().then(function() {
        var g2 = v._dbInfo.mStore.get(a2);
        return g2 == null ? null : v._dbInfo.serializer.deserialize(g2);
      });
      return B(p2, s), p2;
    }
    function O2(a2, s) {
      var v = this, p2 = this.ready().then(function() {
        for (var g2 = v._dbInfo.mStore, w2 = g2.keys(), T3 = 0; T3 < w2.length; T3++) {
          var G2 = g2.get(w2[T3]);
          if (G2 && (G2 = v._dbInfo.serializer.deserialize(G2)), G2 = a2(G2, w2[T3], T3 + 1), G2 !== void 0)
            return G2;
        }
      });
      return B(p2, s), p2;
    }
    function V2(a2, s) {
      var v = this, p2 = this.ready().then(function() {
        var g2;
        try {
          g2 = v._dbInfo.mStore.key(a2), g2 === void 0 && (g2 = null);
        } catch {
          g2 = null;
        }
        return g2;
      });
      return B(p2, s), p2;
    }
    function j3(a2) {
      var s = this, v = this.ready().then(function() {
        return s._dbInfo.mStore.keys();
      });
      return B(v, a2), v;
    }
    function Q2(a2) {
      var s = this.keys().then(function(v) {
        return v.length;
      });
      return B(s, a2), s;
    }
    function J3(a2, s) {
      var v = this;
      a2 = F2(a2);
      var p2 = this.ready().then(function() {
        v._dbInfo.mStore.rm(a2);
      });
      return B(p2, s), p2;
    }
    function ee2(a2, s, v) {
      var p2 = this;
      a2 = F2(a2);
      var g2 = this.ready().then(function() {
        s === void 0 && (s = null);
        var w2 = s;
        return new Promise(function(T3, G2) {
          p2._dbInfo.serializer.serialize(s, function(fe3, ie2) {
            if (ie2)
              G2(ie2);
            else
              try {
                p2._dbInfo.mStore.set(a2, fe3), T3(w2);
              } catch (ce3) {
                G2(ce3);
              }
          });
        });
      });
      return B(g2, v), g2;
    }
    var oe2 = true;
    b2._support = oe2, b2._driver = A, b2._initStorage = re2, b2.clear = h2, b2.dropInstance = N3, b2.getItem = E3, b2.iterate = O2, b2.key = V2, b2.keys = j3, b2.length = Q2, b2.removeItem = J3, b2.setItem = ee2, Object.defineProperty(b2, "__esModule", { value: true });
  });
});
var ge2 = Ze2(ke2());
var Te2 = Ze2(rr());
var at2 = { display: "none", position: "fixed", top: "0", right: "0", width: "100%", height: "100%", borderRadius: "0", border: "none", zIndex: "2147483647" };
function ft2(b2) {
  for (let [A, R] of Object.entries(at2))
    b2.style[A] = R;
}
function ut2(b2) {
  let A = [].slice.call(document.querySelectorAll(".magic-iframe"));
  return Boolean(A.find((R) => R.src.includes(b2)));
}
var pe2 = class extends Se {
  constructor() {
    super(...arguments);
    this.activeElement = null;
  }
  init() {
    this.test = "hello", this.iframe = new Promise((R) => {
      let L2 = () => {
        if (ut2(encodeURIComponent(this.parameters)))
          mr().log();
        else {
          let D3 = document.createElement("iframe");
          D3.classList.add("magic-iframe"), D3.dataset.magicIframeLabel = Ae(this.endpoint).host, D3.title = "Secure Modal", D3.src = Ae(`/send?params=${encodeURIComponent(this.parameters)}`, this.endpoint).href, ft2(D3), document.body.appendChild(D3), R(D3);
        }
      };
      ["loaded", "interactive", "complete"].includes(document.readyState) ? L2() : window.addEventListener("load", L2, false);
    }), window.addEventListener("message", (R) => {
      var L2;
      if (R.origin === this.endpoint && R.data && R.data.msgType && this.messageHandlers.size) {
        R.data.response = (L2 = R.data.response) != null ? L2 : {};
        for (let D3 of this.messageHandlers.values())
          D3(R);
      }
    });
  }
  showOverlay() {
    return se2(this, null, function* () {
      let R = yield this.iframe;
      R.style.display = "block", this.activeElement = document.activeElement, R.focus();
    });
  }
  hideOverlay() {
    return se2(this, null, function* () {
      var L2;
      let R = yield this.iframe;
      R.style.display = "none", (L2 = this.activeElement) != null && L2.focus && this.activeElement.focus(), this.activeElement = null;
    });
  }
  _post(R) {
    return se2(this, null, function* () {
      let L2 = yield this.iframe;
      if (L2 && L2.contentWindow)
        L2.contentWindow.postMessage(R, this.endpoint);
      else
        throw dr();
    });
  }
};
var bt2 = In(Te, { platform: "web", sdkName: "magic-sdk", version: "13.6.2", defaultEndpoint: "https://auth.magic.link/", ViewController: pe2, configureStorage: () => se2(void 0, null, function* () {
  let b2 = ge2.default.createInstance({ name: "MagicAuthLocalStorageDB", storeName: "MagicAuthLocalStorage" });
  return yield b2.defineDriver(Te2), yield b2.setDriver([ge2.default.INDEXEDDB, ge2.default.LOCALSTORAGE, Te2._driver]), b2;
}) });

// node_modules/@magic-ext/oauth/dist/es/index.mjs
var te2 = Object.create;
var D2 = Object.defineProperty;
var ne2 = Object.getOwnPropertyDescriptor;
var ie = Object.getOwnPropertyNames;
var ae2 = Object.getPrototypeOf;
var oe = Object.prototype.hasOwnProperty;
var H2 = (n, r2) => () => (r2 || n((r2 = { exports: {} }).exports, r2), r2.exports);
var se3 = (n, r2, s, m3) => {
  if (r2 && typeof r2 == "object" || typeof r2 == "function")
    for (let h2 of ie(r2))
      !oe.call(n, h2) && h2 !== s && D2(n, h2, { get: () => r2[h2], enumerable: !(m3 = ne2(r2, h2)) || m3.enumerable });
  return n;
};
var T2 = (n, r2, s) => (s = n != null ? te2(ae2(n)) : {}, se3(r2 || !n || !n.__esModule ? D2(s, "default", { value: n, enumerable: true }) : s, n));
var C2 = (n, r2, s) => new Promise((m3, h2) => {
  var w2 = (p2) => {
    try {
      d2(s.next(p2));
    } catch (u2) {
      h2(u2);
    }
  }, R = (p2) => {
    try {
      d2(s.throw(p2));
    } catch (u2) {
      h2(u2);
    }
  }, d2 = (p2) => p2.done ? m3(p2.value) : Promise.resolve(p2.value).then(w2, R);
  d2((s = s.apply(n, r2)).next());
});
var k2 = H2((I2, F2) => {
  (function(n, r2) {
    typeof I2 == "object" ? F2.exports = I2 = r2() : typeof define == "function" && define.amd ? define([], r2) : n.CryptoJS = r2();
  })(I2, function() {
    var n = n || function(r2, s) {
      var m3 = Object.create || /* @__PURE__ */ function() {
        function e() {
        }
        return function(t) {
          var c2;
          return e.prototype = t, c2 = new e(), e.prototype = null, c2;
        };
      }(), h2 = {}, w2 = h2.lib = {}, R = w2.Base = /* @__PURE__ */ function() {
        return { extend: function(e) {
          var t = m3(this);
          return e && t.mixIn(e), (!t.hasOwnProperty("init") || this.init === t.init) && (t.init = function() {
            t.$super.init.apply(this, arguments);
          }), t.init.prototype = t, t.$super = this, t;
        }, create: function() {
          var e = this.extend();
          return e.init.apply(e, arguments), e;
        }, init: function() {
        }, mixIn: function(e) {
          for (var t in e)
            e.hasOwnProperty(t) && (this[t] = e[t]);
          e.hasOwnProperty("toString") && (this.toString = e.toString);
        }, clone: function() {
          return this.init.prototype.extend(this);
        } };
      }(), d2 = w2.WordArray = R.extend({ init: function(e, t) {
        e = this.words = e || [], t != s ? this.sigBytes = t : this.sigBytes = e.length * 4;
      }, toString: function(e) {
        return (e || u2).stringify(this);
      }, concat: function(e) {
        var t = this.words, c2 = e.words, i = this.sigBytes, g2 = e.sigBytes;
        if (this.clamp(), i % 4)
          for (var v = 0; v < g2; v++) {
            var b2 = c2[v >>> 2] >>> 24 - v % 4 * 8 & 255;
            t[i + v >>> 2] |= b2 << 24 - (i + v) % 4 * 8;
          }
        else
          for (var v = 0; v < g2; v += 4)
            t[i + v >>> 2] = c2[v >>> 2];
        return this.sigBytes += g2, this;
      }, clamp: function() {
        var e = this.words, t = this.sigBytes;
        e[t >>> 2] &= 4294967295 << 32 - t % 4 * 8, e.length = r2.ceil(t / 4);
      }, clone: function() {
        var e = R.clone.call(this);
        return e.words = this.words.slice(0), e;
      }, random: function(e) {
        for (var t = [], c2 = function(y2) {
          var y2 = y2, A = 987654321, B = 4294967295;
          return function() {
            A = 36969 * (A & 65535) + (A >> 16) & B, y2 = 18e3 * (y2 & 65535) + (y2 >> 16) & B;
            var x2 = (A << 16) + y2 & B;
            return x2 /= 4294967296, x2 += 0.5, x2 * (r2.random() > 0.5 ? 1 : -1);
          };
        }, i = 0, g2; i < e; i += 4) {
          var v = c2((g2 || r2.random()) * 4294967296);
          g2 = v() * 987654071, t.push(v() * 4294967296 | 0);
        }
        return new d2.init(t, e);
      } }), p2 = h2.enc = {}, u2 = p2.Hex = { stringify: function(e) {
        for (var t = e.words, c2 = e.sigBytes, i = [], g2 = 0; g2 < c2; g2++) {
          var v = t[g2 >>> 2] >>> 24 - g2 % 4 * 8 & 255;
          i.push((v >>> 4).toString(16)), i.push((v & 15).toString(16));
        }
        return i.join("");
      }, parse: function(e) {
        for (var t = e.length, c2 = [], i = 0; i < t; i += 2)
          c2[i >>> 3] |= parseInt(e.substr(i, 2), 16) << 24 - i % 8 * 4;
        return new d2.init(c2, t / 2);
      } }, _2 = p2.Latin1 = { stringify: function(e) {
        for (var t = e.words, c2 = e.sigBytes, i = [], g2 = 0; g2 < c2; g2++) {
          var v = t[g2 >>> 2] >>> 24 - g2 % 4 * 8 & 255;
          i.push(String.fromCharCode(v));
        }
        return i.join("");
      }, parse: function(e) {
        for (var t = e.length, c2 = [], i = 0; i < t; i++)
          c2[i >>> 2] |= (e.charCodeAt(i) & 255) << 24 - i % 4 * 8;
        return new d2.init(c2, t);
      } }, a2 = p2.Utf8 = { stringify: function(e) {
        try {
          return decodeURIComponent(escape(_2.stringify(e)));
        } catch {
          throw new Error("Malformed UTF-8 data");
        }
      }, parse: function(e) {
        return _2.parse(unescape(encodeURIComponent(e)));
      } }, f = w2.BufferedBlockAlgorithm = R.extend({ reset: function() {
        this._data = new d2.init(), this._nDataBytes = 0;
      }, _append: function(e) {
        typeof e == "string" && (e = a2.parse(e)), this._data.concat(e), this._nDataBytes += e.sigBytes;
      }, _process: function(e) {
        var t = this._data, c2 = t.words, i = t.sigBytes, g2 = this.blockSize, v = g2 * 4, b2 = i / v;
        e ? b2 = r2.ceil(b2) : b2 = r2.max((b2 | 0) - this._minBufferSize, 0);
        var y2 = b2 * g2, A = r2.min(y2 * 4, i);
        if (y2) {
          for (var B = 0; B < y2; B += g2)
            this._doProcessBlock(c2, B);
          var x2 = c2.splice(0, y2);
          t.sigBytes -= A;
        }
        return new d2.init(x2, A);
      }, clone: function() {
        var e = R.clone.call(this);
        return e._data = this._data.clone(), e;
      }, _minBufferSize: 0 }), o2 = w2.Hasher = f.extend({ cfg: R.extend(), init: function(e) {
        this.cfg = this.cfg.extend(e), this.reset();
      }, reset: function() {
        f.reset.call(this), this._doReset();
      }, update: function(e) {
        return this._append(e), this._process(), this;
      }, finalize: function(e) {
        e && this._append(e);
        var t = this._doFinalize();
        return t;
      }, blockSize: 512 / 32, _createHelper: function(e) {
        return function(t, c2) {
          return new e.init(c2).finalize(t);
        };
      }, _createHmacHelper: function(e) {
        return function(t, c2) {
          return new l.HMAC.init(e, c2).finalize(t);
        };
      } }), l = h2.algo = {};
      return h2;
    }(Math);
    return n;
  });
});
var z2 = H2((S2, W2) => {
  (function(n, r2) {
    typeof S2 == "object" ? W2.exports = S2 = r2(k2()) : typeof define == "function" && define.amd ? define(["./core"], r2) : r2(n.CryptoJS);
  })(S2, function(n) {
    return function(r2) {
      var s = n, m3 = s.lib, h2 = m3.WordArray, w2 = m3.Hasher, R = s.algo, d2 = [], p2 = [];
      (function() {
        function a2(e) {
          for (var t = r2.sqrt(e), c2 = 2; c2 <= t; c2++)
            if (!(e % c2))
              return false;
          return true;
        }
        function f(e) {
          return (e - (e | 0)) * 4294967296 | 0;
        }
        for (var o2 = 2, l = 0; l < 64; )
          a2(o2) && (l < 8 && (d2[l] = f(r2.pow(o2, 1 / 2))), p2[l] = f(r2.pow(o2, 1 / 3)), l++), o2++;
      })();
      var u2 = [], _2 = R.SHA256 = w2.extend({ _doReset: function() {
        this._hash = new h2.init(d2.slice(0));
      }, _doProcessBlock: function(a2, f) {
        for (var o2 = this._hash.words, l = o2[0], e = o2[1], t = o2[2], c2 = o2[3], i = o2[4], g2 = o2[5], v = o2[6], b2 = o2[7], y2 = 0; y2 < 64; y2++) {
          if (y2 < 16)
            u2[y2] = a2[f + y2] | 0;
          else {
            var A = u2[y2 - 15], B = (A << 25 | A >>> 7) ^ (A << 14 | A >>> 18) ^ A >>> 3, x2 = u2[y2 - 2], G2 = (x2 << 15 | x2 >>> 17) ^ (x2 << 13 | x2 >>> 19) ^ x2 >>> 10;
            u2[y2] = B + u2[y2 - 7] + G2 + u2[y2 - 16];
          }
          var Q2 = i & g2 ^ ~i & v, X2 = l & e ^ l & t ^ e & t, Z2 = (l << 30 | l >>> 2) ^ (l << 19 | l >>> 13) ^ (l << 10 | l >>> 22), ee2 = (i << 26 | i >>> 6) ^ (i << 21 | i >>> 11) ^ (i << 7 | i >>> 25), P = b2 + ee2 + Q2 + p2[y2] + u2[y2], re2 = Z2 + X2;
          b2 = v, v = g2, g2 = i, i = c2 + P | 0, c2 = t, t = e, e = l, l = P + re2 | 0;
        }
        o2[0] = o2[0] + l | 0, o2[1] = o2[1] + e | 0, o2[2] = o2[2] + t | 0, o2[3] = o2[3] + c2 | 0, o2[4] = o2[4] + i | 0, o2[5] = o2[5] + g2 | 0, o2[6] = o2[6] + v | 0, o2[7] = o2[7] + b2 | 0;
      }, _doFinalize: function() {
        var a2 = this._data, f = a2.words, o2 = this._nDataBytes * 8, l = a2.sigBytes * 8;
        return f[l >>> 5] |= 128 << 24 - l % 32, f[(l + 64 >>> 9 << 4) + 14] = r2.floor(o2 / 4294967296), f[(l + 64 >>> 9 << 4) + 15] = o2, a2.sigBytes = f.length * 4, this._process(), this._hash;
      }, clone: function() {
        var a2 = w2.clone.call(this);
        return a2._hash = this._hash.clone(), a2;
      } });
      s.SHA256 = w2._createHelper(_2), s.HmacSHA256 = w2._createHmacHelper(_2);
    }(Math), n.SHA256;
  });
});
var q2 = H2((U, L2) => {
  (function(n, r2) {
    typeof U == "object" ? L2.exports = U = r2(k2()) : typeof define == "function" && define.amd ? define(["./core"], r2) : r2(n.CryptoJS);
  })(U, function(n) {
    return function() {
      var r2 = n, s = r2.lib, m3 = s.WordArray, h2 = r2.enc, w2 = h2.Base64 = { stringify: function(d2) {
        var p2 = d2.words, u2 = d2.sigBytes, _2 = this._map;
        d2.clamp();
        for (var a2 = [], f = 0; f < u2; f += 3)
          for (var o2 = p2[f >>> 2] >>> 24 - f % 4 * 8 & 255, l = p2[f + 1 >>> 2] >>> 24 - (f + 1) % 4 * 8 & 255, e = p2[f + 2 >>> 2] >>> 24 - (f + 2) % 4 * 8 & 255, t = o2 << 16 | l << 8 | e, c2 = 0; c2 < 4 && f + c2 * 0.75 < u2; c2++)
            a2.push(_2.charAt(t >>> 6 * (3 - c2) & 63));
        var i = _2.charAt(64);
        if (i)
          for (; a2.length % 4; )
            a2.push(i);
        return a2.join("");
      }, parse: function(d2) {
        var p2 = d2.length, u2 = this._map, _2 = this._reverseMap;
        if (!_2) {
          _2 = this._reverseMap = [];
          for (var a2 = 0; a2 < u2.length; a2++)
            _2[u2.charCodeAt(a2)] = a2;
        }
        var f = u2.charAt(64);
        if (f) {
          var o2 = d2.indexOf(f);
          o2 !== -1 && (p2 = o2);
        }
        return R(d2, p2, _2);
      }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" };
      function R(d2, p2, u2) {
        for (var _2 = [], a2 = 0, f = 0; f < p2; f++)
          if (f % 4) {
            var o2 = u2[d2.charCodeAt(f - 1)] << f % 4 * 2, l = u2[d2.charCodeAt(f)] >>> 6 - f % 4 * 2;
            _2[a2 >>> 2] |= (o2 | l) << 24 - a2 % 4 * 8, a2++;
          }
        return m3.create(_2, a2);
      }
    }(), n.enc.Base64;
  });
});
var E2 = ((r2) => (r2.ParseRedirectResult = "magic_oauth_parse_redirect_result", r2))(E2 || {});
var ce2 = ((a2) => (a2.InvalidRequest = "invalid_request", a2.InvalidClient = "invalid_client", a2.InvalidScope = "invalid_scope", a2.InvalidGrant = "invalid_grant", a2.UnauthorizedClient = "unauthorized_client", a2.UnsupportedResponseType = "unsupported_response_type", a2.UnsupportedGrantType = "unsupported_grant_type", a2.UnsupportedTokenType = "unsupported_token_type", a2.AccessDenied = "access_denied", a2.ServerError = "server_error", a2.TemporarilyUnavailable = "temporarily_unavailable", a2))(ce2 || {});
var j2 = T2(z2());
var J2 = T2(q2());
var $2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";
var V = typeof window != "undefined" && !!window.crypto;
var fe2 = V && !!window.crypto.subtle;
function ue2(n) {
  return Array.from(n).map((r2) => $2[r2 % $2.length]).join("");
}
function M2(n) {
  let r2 = (s) => s.replace(/\+/g, "-").replace(/\//g, "_").replace(/=/g, "");
  if (n instanceof ArrayBuffer) {
    let s = new Uint8Array(n), m3 = Array.from(s).map((w2) => String.fromCharCode(w2)).join(""), h2 = btoa(m3);
    return r2(h2);
  }
  return r2(J2.default.stringify(n));
}
function de2(n) {
  return C2(this, null, function* () {
    if (fe2) {
      let r2 = new TextEncoder().encode(n);
      return crypto.subtle.digest("SHA-256", r2).then(M2);
    }
    return M2((0, j2.default)(n));
  });
}
function N2(n) {
  let r2 = new Uint8Array(n);
  if (V)
    window.crypto.getRandomValues(r2);
  else
    for (let s = 0; s < n; s += 1)
      r2[s] = Math.floor(Math.random() * Math.floor(255));
  return ue2(r2);
}
function K2() {
  return C2(this, null, function* () {
    let n = N2(128), r2 = N2(128), s = yield de2(r2);
    return { verifier: r2, challenge: s, state: n };
  });
}
var Y2 = class extends w.Internal {
  constructor() {
    super(...arguments);
    this.name = "oauth";
    this.config = {};
    this.compat = { "magic-sdk": ">=2.4.6", "@magic-sdk/react-native": false, "@magic-sdk/react-native-bare": false, "@magic-sdk/react-native-expo": false };
  }
  loginWithRedirect(s) {
    return this.utils.createPromiEvent((m3) => C2(this, null, function* () {
      let { provider: h2, query: w2 } = yield pe3.call(this, s);
      window.location.href = new URL(`/v1/oauth2/${h2}/start?${w2}`, this.sdk.endpoint).href, m3();
    }));
  }
  getRedirectResult() {
    let s = window.location.search, m3 = window.location.origin + window.location.pathname;
    return window.history.replaceState(null, "", m3), he2.call(this, s);
  }
};
var O = "oauth_redirect_metadata";
function pe3(n) {
  return C2(this, null, function* () {
    yield this.utils.storage.removeItem(O);
    let { provider: r2, redirectURI: s, scope: m3, loginHint: h2 } = n, { verifier: w2, challenge: R, state: d2 } = yield K2(), p2 = JSON.stringify({ verifier: w2, state: d2 });
    return yield this.utils.storage.setItem(O, p2), { query: [`magic_api_key=${encodeURIComponent(this.sdk.apiKey)}`, `magic_challenge=${encodeURIComponent(R)}`, `state=${encodeURIComponent(d2)}`, `platform=${encodeURIComponent("web")}`, m3 && `scope=${encodeURIComponent(m3.join(" "))}`, s && `redirect_uri=${encodeURIComponent(s)}`, h2 && `login_hint=${encodeURIComponent(h2)}`].reduce((_2, a2) => a2 ? `${_2}&${a2}` : _2), provider: r2, redirectURI: s };
  });
}
function he2(n) {
  return this.utils.createPromiEvent((r2, s) => C2(this, null, function* () {
    var _2;
    let m3 = yield this.utils.storage.getItem(O), { verifier: h2, state: w2 } = JSON.parse(m3);
    this.utils.storage.removeItem(O);
    let R = this.utils.createJsonRpcRequestPayload("magic_oauth_parse_redirect_result", [n, h2, w2]), d2 = yield this.request(R), p2 = d2, u2 = d2;
    u2.error && s(this.createError(u2.error, (_2 = u2.error_description) != null ? _2 : "An error occurred.", { errorURI: u2.error_uri, provider: u2.provider })), r2(p2);
  }));
}

// node_modules/@thirdweb-dev/wallets/evm/connectors/magic/dist/thirdweb-dev-wallets-evm-connectors-magic.browser.esm.js
var IS_SERVER = false;
var MagicBaseConnector = class extends WagmiConnector {
  constructor(config) {
    super(config);
    _defineProperty(this, "id", "magic-link");
    _defineProperty(this, "name", "Magic Link");
    _defineProperty(this, "ready", !IS_SERVER);
    this.magicOptions = config.options;
  }
  async getAccount() {
    const provider = new ethers_exports.providers.Web3Provider(await this.getProvider());
    const signer = provider.getSigner();
    const account = await signer.getAddress();
    if (account.startsWith("0x")) {
      return account;
    }
    return `0x${account}`;
  }
  async getProvider() {
    if (this.provider) {
      return this.provider;
    }
    const magic = this.getMagicSDK();
    this.provider = magic.rpcProvider;
    return this.provider;
  }
  async getSigner() {
    const provider = new ethers_exports.providers.Web3Provider(await this.getProvider());
    const signer = await provider.getSigner();
    return signer;
  }
  async isAuthorized() {
    const magic = this.getMagicSDK();
    try {
      return await magic.user.isLoggedIn();
    } catch (e) {
      return false;
    }
  }
  onAccountsChanged(accounts) {
    if (accounts.length === 0) {
      this.emit("disconnect");
    } else {
      if (accounts[0]) {
        this.emit("change", {
          account: utils_exports.getAddress(accounts[0])
        });
      }
    }
  }
  onChainChanged(chainId) {
    const id = normalizeChainId(chainId);
    const unsupported = this.isChainUnsupported(id);
    this.emit("change", {
      chain: {
        id,
        unsupported
      }
    });
  }
  onDisconnect() {
    this.emit("disconnect");
  }
  async disconnect() {
    const magic = this.getMagicSDK();
    await magic.user.logout();
  }
};
var _connectedChainId = /* @__PURE__ */ new WeakMap();
var _type = /* @__PURE__ */ new WeakMap();
var MagicAuthConnector = class extends MagicBaseConnector {
  constructor(config) {
    var _a, _b;
    super(config);
    _classPrivateFieldInitSpec(this, _connectedChainId, {
      writable: true,
      value: void 0
    });
    _classPrivateFieldInitSpec(this, _type, {
      writable: true,
      value: void 0
    });
    this.magicSdkConfiguration = config.options.magicSdkConfiguration;
    _classPrivateFieldSet(this, _type, config.options.type);
    this.oauthProviders = ((_a = config.options.oauthOptions) == null ? void 0 : _a.providers) || [];
    this.oauthRedirectURI = (_b = config.options.oauthOptions) == null ? void 0 : _b.redirectURI;
  }
  async connect(options) {
    if (!this.magicOptions.apiKey) {
      throw new Error("Magic API Key is not provided.");
    }
    try {
      if (options.chainId) {
        this.initializeMagicSDK({
          chainId: options.chainId
        });
      }
      const provider = await this.getProvider();
      this.setupListeners();
      this.emit("message", {
        type: "connecting"
      });
      const isAuthenticated = await this.isAuthorized();
      let chainId;
      try {
        chainId = await this.getChainId();
      } catch (e) {
        chainId = 0;
      }
      _classPrivateFieldSet(this, _connectedChainId, chainId);
      if (isAuthenticated) {
        return {
          provider,
          chain: {
            id: chainId,
            unsupported: false
          },
          account: await this.getAccount()
        };
      }
      const magic = this.getMagicSDK();
      if (_classPrivateFieldGet(this, _type) === "connect") {
        if ("email" in options || "phoneNumber" in options) {
          console.warn("Passing email or phoneNumber is not required for Magic Connect");
        }
        await magic.wallet.connectWithUI();
      } else {
        if ("oauthProvider" in options) {
          await magic.oauth.loginWithRedirect({
            provider: options.oauthProvider,
            redirectURI: this.oauthRedirectURI || window.location.href
          });
          await new Promise((res) => {
            setTimeout(res, 1e4);
          });
        } else if ("email" in options) {
          await magic.auth.loginWithMagicLink({
            email: options.email,
            showUI: true
          });
        } else if ("phoneNumber" in options) {
          await magic.auth.loginWithSMS({
            phoneNumber: options.phoneNumber
          });
        } else {
          throw new Error("Invalid options: Either provide and email, phoneNumber or oauthProvider when using Magic Auth");
        }
      }
      const signer = await this.getSigner();
      let account = await signer.getAddress();
      if (!account.startsWith("0x")) {
        account = `0x${account}`;
      }
      return {
        account,
        chain: {
          id: chainId,
          unsupported: false
        },
        provider
      };
    } catch (error) {
      console.error(error);
      throw new Error("Something went wrong");
    }
  }
  async getChainId() {
    var _a;
    const networkOptions = (_a = this.magicSdkConfiguration) == null ? void 0 : _a.network;
    if (typeof networkOptions === "object") {
      const chainID = networkOptions.chainId;
      if (chainID) {
        return normalizeChainId(chainID);
      }
    }
    throw new Error("Chain ID is not defined");
  }
  initializeMagicSDK() {
    let {
      chainId
    } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    const options = {
      ...this.magicSdkConfiguration,
      extensions: [new Y2()]
    };
    if (chainId) {
      const chain = this.chains.find((c2) => c2.chainId === chainId);
      if (chain) {
        options.network = {
          rpcUrl: chain.rpc[0] || "",
          // TODO handle empty RPC array
          chainId: chain.chainId
        };
      }
    }
    this.magicSDK = new bt2(this.magicOptions.apiKey, options);
    this.provider = this.magicSDK.rpcProvider;
    return this.magicSDK;
  }
  getMagicSDK() {
    if (!this.magicSDK) {
      return this.initializeMagicSDK();
    }
    return this.magicSDK;
  }
  async setupListeners() {
    const provider = await this.getProvider();
    provider.on("accountsChanged", this.onAccountsChanged);
    provider.on("chainChanged", this.onChainChanged);
    provider.on("disconnect", this.onDisconnect);
  }
  async switchChain(chainId) {
    const chain = this.chains.find((c2) => c2.chainId === chainId);
    if (!chain) {
      throw new Error("Chain not found");
    }
    if (_classPrivateFieldGet(this, _connectedChainId) !== chainId) {
      this.initializeMagicSDK({
        chainId
      });
    }
    return chain;
  }
};
export {
  MagicAuthConnector,
  MagicBaseConnector
};
//# sourceMappingURL=thirdweb-dev-wallets-evm-connectors-magic.browser.esm-M2Z55IYT.js.map
